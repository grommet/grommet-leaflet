(function(s,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react/jsx-runtime.js"),require("react"),require("prop-types"),require("styled-components"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet/es6/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet/utils/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react-leaflet/lib/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/leaflet/dist/leaflet-src.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet-icons/es6/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/protomaps/dist/protomaps.module.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/@react-leaflet/core/lib/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react-dom/server.browser.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/uuid/dist/esm-browser/index.js"),require("/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js")):typeof define=="function"&&define.amd?define(["exports","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react/jsx-runtime.js","react","prop-types","styled-components","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet/es6/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet/utils/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react-leaflet/lib/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/leaflet/dist/leaflet-src.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/grommet-icons/es6/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/protomaps/dist/protomaps.module.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/@react-leaflet/core/lib/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/react-dom/server.browser.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/uuid/dist/esm-browser/index.js","/Users/mglissmann/Code/grommet/grommet-leaflet/node_modules/leaflet.markercluster/dist/leaflet.markercluster-src.js"],n):(s=typeof globalThis<"u"?globalThis:s||self,n(s["grommet-leaflet"]={},s.jsxRuntime_js,s.React,s.PropTypes,s.styled,s.index_js$1,s.index_js,s.index_js$2,s.L,s.index_js$3,s.protomaps_module_js,s.index_js$4,s.ReactDOMServer,s.index_js$5))})(this,function(s,n,d,l,i,c,v,h,U,w,B,x,M,V){"use strict";const q=o=>{let e={};return o.forEach(r=>{e=v.deepMerge(e,r)}),e},Y=i(c.Box)`
  // translate to re-align with leaflet div
  transform: translateX(-35%);
  &:hover {
    transform: translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,P=i(c.Text)`
  // multiplier of font-size, for tighter alignment
  line-height: 1rem;
`,S=({cluster:o,kind:e="default",size:r="medium",...a})=>{var f,g,p,C,I,W,X,A,K,J,F,H,Q;const t=d.useContext(i.ThemeContext),m=q([(p=(g=(f=t==null?void 0:t.map)==null?void 0:f.cluster)==null?void 0:g.size)==null?void 0:p.medium,(W=(I=(C=t==null?void 0:t.map)==null?void 0:C.cluster)==null?void 0:I.size)==null?void 0:W[r],(A=(X=t==null?void 0:t.map)==null?void 0:X.cluster)==null?void 0:A.default,(J=(K=t==null?void 0:t.map)==null?void 0:K.cluster)==null?void 0:J[e]]),u=o.getChildCount(),b=(Q=(H=(F=t==null?void 0:t.map)==null?void 0:F.cluster)==null?void 0:H[e])==null?void 0:Q.icon,k=u;return n.jsxs(Y,{...m==null?void 0:m.container,...a,children:[b,n.jsx(P,{...m==null?void 0:m.label,children:k})]})};S.propTypes={cluster:l.object,kind:l.string,size:l.string};const T=({locations:o})=>{const e=U.latLngBounds();return o.features?o.features.forEach(r=>{var a,t;e.extend([(a=r.geometry)==null?void 0:a.coordinates[0],(t=r.geometry)==null?void 0:t.coordinates[1]])}):o.forEach(r=>{e.extend([r==null?void 0:r[0],r==null?void 0:r[1]])}),e},j=1.5,O=({locations:o})=>{const e=h.useMap(),r=o&&T({locations:o}),[a,t]=d.useState(!1);return d.useEffect(()=>{r&&!a&&(JSON.stringify(r._northEast)===JSON.stringify(r._southWest)||e.flyToBounds(r,{duration:j}))},[r,e,a]),d.useEffect(()=>{t(!0)},[]),n.jsx(c.Box,{className:"leaflet-bottom leaflet-right",children:n.jsx(c.Box,{className:"leaflet-control",children:n.jsxs(c.Box,{elevation:"large",round:"medium",background:"background",children:[n.jsx(c.Button,{a11yTitle:"Zoom in",icon:n.jsx(w.Add,{}),onClick:m=>{m.preventDefault(),e.zoomIn()}}),n.jsx(c.Button,{a11yTitle:"Zoom out",icon:n.jsx(w.Subtract,{}),onClick:m=>{m.preventDefault(),e.zoomOut()}}),n.jsx(c.Box,{border:{color:"border-weak",side:"top"},children:r&&n.jsx(c.Button,{a11yTitle:"Zoom to data",icon:n.jsx(w.Globe,{}),onClick:m=>{m.preventDefault(),e.flyToBounds(r,{duration:1.5})}})})]})})})};O.propTypes={locations:l.oneOfType([l.array,l.object])};const L={default:{container:{align:"center",justify:"center",background:"background-front",border:{color:"border",size:"small"},elevation:"medium",flex:!1,round:"full"}}},y={pin:{...v.deepMerge(L,{default:{container:{height:{min:"25px",max:"25px"},width:{min:"25px",max:"25px"}}}})},cluster:{...L,size:{small:{container:{height:{min:"36px",max:"36px"},width:{min:"36px",max:"36px"}},label:{size:"small"}},medium:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"48px",max:"48px"},width:{min:"48px",max:"48px"}},label:{color:"text-strong",size:"medium",weight:500}},large:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"54px",max:"54px"},width:{min:"54px",max:"54px"}},label:{size:"medium"}}}},popup:{background:"background-front",border:{color:"border-weak",size:"xsmall"},gap:"xsmall",margin:"none",pad:"small",round:"xsmall"},tiles:{}},$=({...o},e)=>{const r=B.leafletLayer({paint_rules:o.paintRules,...o});return x.createElementObject(r,e)},_=x.createTileLayerComponent($,x.updateGridLayer),N=({attribution:o,url:e,format:r,...a})=>{var u;const t=d.useContext(i.ThemeContext);let m=n.jsx(h.TileLayer,{attribution:o,url:e,...a});return r==="pmtiles"&&(m=n.jsx(_,{attribution:o,url:e,paintRules:((u=t.map)==null?void 0:u.tiles)&&B.paintRules({...B.light,...t.map.tiles}),...a})),m};N.propTypes={attribution:l.string,url:l.string.isRequired,format:l.oneOf(["pmtiles"])};const R=i(h.MapContainer)`
  ${({theme:o})=>{var e,r;return`
      ${(r=(e=o==null?void 0:o.global)==null?void 0:e.font)!=null&&r.family?`font-family: ${o.global.font.family};`:""}
      height: 100%;
    `}}
`,G=d.forwardRef(({center:o=[0,0],children:e,maxZoom:r=20,minZoom:a=3,scrollWheelZoom:t=!0,tileLayer:m,theme:u,zoom:b=1,zoomControl:k=!1,...f},g)=>{const p=d.useContext(i.ThemeContext),C=v.deepMerge(p,{map:v.deepMerge(y,u)});return n.jsx(i.ThemeContext.Provider,{value:C,children:n.jsxs(R,{attributionControl:!1,center:o,ref:g,scrollWheelZoom:t,maxZoom:r,minZoom:a,zoom:b,zoomControl:k,...f,children:[n.jsx(h.AttributionControl,{position:"bottomright",prefix:!1}),n.jsx(N,{attribution:m.attribution,url:m.url,format:m.format,...m}),e]})})});G.propTypes={center:l.array,children:l.any,scrollWheelZoom:l.string||l.bool,maxZoom:l.number,minZoom:l.number,tileLayer:l.shape({attribution:l.string,url:l.string.isRequired,format:l.oneOf(["pmtiles"])}).isRequired,theme:l.object,zoom:l.number,zoomControl:l.bool};const Z=({icon:o,popup:e,...r})=>{var u;const a=d.useContext(i.ThemeContext),t=(u=o==null?void 0:o.props)==null?void 0:u.kind,m=e?n.jsx(h.Popup,{children:n.jsx(E,{children:e})}):void 0;return n.jsx(h.Marker,{icon:U.divIcon({className:"grommet-marker",html:M.renderToString(n.jsx(i.ThemeContext.Provider,{value:a,children:o||n.jsx(z,{})}))}),kind:t,...r,children:m},V.v4())};Z.propTypes={icon:l.node,popup:l.node};const ee=({...o},e)=>{const r=new U.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,...o});return x.createElementObject(r,x.extendContext(e,{layerContainer:r}))},re=x.createPathComponent(ee),D=({icon:o,popup:e,...r})=>{const a=d.useContext(i.ThemeContext);return n.jsx(re,{iconCreateFunction:t=>{if(e){const m=t.bindPopup(M.renderToString(n.jsx(i.ThemeContext.Provider,{value:a,children:n.jsx(E,{children:e({cluster:t})})})));t.on("click",()=>{m.openPopup()})}return U.divIcon({className:"grommet-cluster-group",html:M.renderToString(n.jsx(i.ThemeContext.Provider,{value:a,children:o?d.cloneElement(o({cluster:t}),{cluster:t}):n.jsx(S,{cluster:t})}))})},...r})};D.propTypes={icon:l.func,popup:l.func};const oe=i(c.Box)`
  // to create the pin shape
  border-bottom-right-radius: 0;
  // translate to re-align with leaflet div
  transform: rotate(45deg) translateX(-35%);
  &:hover {
    transform: rotate(45deg) translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,z=({kind:o="default"})=>{var t,m,u,b,k,f,g,p,C;const e=d.useContext(i.ThemeContext),r=q([(u=(m=(t=e==null?void 0:e.map)==null?void 0:t.pin)==null?void 0:m.default)==null?void 0:u.container,(f=(k=(b=e==null?void 0:e.map)==null?void 0:b.pin)==null?void 0:k[o])==null?void 0:f.container]);let a=(C=(p=(g=e==null?void 0:e.map)==null?void 0:g.pin)==null?void 0:p[o])==null?void 0:C.icon;return a&&(a=d.cloneElement(a,{style:{transform:"rotate(-45deg)"}})),n.jsx(oe,{...r,children:a})};z.propTypes={kind:l.string};const E=({...o})=>{var r;const e=d.useContext(i.ThemeContext);return n.jsx(c.Box,{...(r=e==null?void 0:e.map)==null?void 0:r.popup,...o})};window.console=console;const te=console.error,ne=["useLayoutEffect does nothing on the server, because its effect cannot"];console.error=function(e,...r){ne.some(a=>e.includes(a))||te(e,...r)},s.Cluster=S,s.Controls=O,s.LocationBounds=T,s.Map=G,s.Marker=Z,s.MarkerCluster=D,s.Pin=z,s.Popup=E,s.base=y,s.normalizeTheme=q,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
