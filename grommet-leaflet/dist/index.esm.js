"use client";import T from"react";import v from"prop-types";import Z,{ThemeContext as U}from"styled-components";import{Box as Q,Text as V}from"grommet";import{deepMerge as F}from"grommet/utils";var g=r=>{let e={};return r.forEach(o=>{e=F(e,o)}),e};var Y=Z(Q)`
  // translate to re-align with leaflet div
  transform: translateX(-35%);
  &:hover {
    transform: translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,R=Z(V)`
  // multiplier of font-size, for tighter alignment
  line-height: 1rem;
`,k=({cluster:r,kind:e="default",size:o="medium",...n})=>{var s,u,c,x,L,B,E,O,D,N,j,G,W;let t=T.useContext(U),p=g([(c=(u=(s=t==null?void 0:t.map)==null?void 0:s.cluster)==null?void 0:u.size)==null?void 0:c.medium,(B=(L=(x=t==null?void 0:t.map)==null?void 0:x.cluster)==null?void 0:L.size)==null?void 0:B[o],(O=(E=t==null?void 0:t.map)==null?void 0:E.cluster)==null?void 0:O.default,(N=(D=t==null?void 0:t.map)==null?void 0:D.cluster)==null?void 0:N[e]]),a=r.getChildCount(),m=(W=(G=(j=t==null?void 0:t.map)==null?void 0:j.cluster)==null?void 0:G[e])==null?void 0:W.icon,f=a;return T.createElement(Y,{...p==null?void 0:p.container,...n},m,T.createElement(R,{...p==null?void 0:p.label},f))};k.propTypes={cluster:v.object,kind:v.string,size:v.string};import i from"react";import w from"prop-types";import{useMap as ee}from"react-leaflet";import oe from"leaflet";import{Box as y,Button as P}from"grommet";import{Add as te,Subtract as re,Globe as ne}from"grommet-icons";var pe=({locations:r})=>{let e=oe.latLngBounds();return r.features?r.features.forEach(o=>{var n,t;e.extend([(n=o.geometry)==null?void 0:n.coordinates[0],(t=o.geometry)==null?void 0:t.coordinates[1]])}):r.forEach(o=>{e.extend([o==null?void 0:o[0],o==null?void 0:o[1]])}),e},ie=1.5,ae=({locations:r})=>{let e=ee(),o=r&&pe({locations:r});return o&&(JSON.stringify(o._northEast)===JSON.stringify(o._southWest)||e.flyToBounds(o,{duration:ie})),i.createElement(y,{className:"leaflet-bottom leaflet-right"},i.createElement(y,{className:"leaflet-control"},i.createElement(y,{elevation:"large",round:"medium",background:"background"},i.createElement(P,{a11yTitle:"Zoom in",icon:i.createElement(te,null),onClick:n=>{n.preventDefault(),e.zoomIn()}}),i.createElement(P,{a11yTitle:"Zoom out",icon:i.createElement(re,null),onClick:n=>{n.preventDefault(),e.zoomOut()}}),i.createElement(y,{border:{color:"border-weak",side:"top"}},o&&i.createElement(P,{a11yTitle:"Zoom to data",icon:i.createElement(ne,null),onClick:n=>{n.preventDefault(),e.flyToBounds(o,{duration:1.5})}})))))};ae.propTypes={locations:w.oneOfType([w.array,w.object])};import b,{forwardRef as me,useContext as fe}from"react";import l from"prop-types";import{MapContainer as de,TileLayer as ue,AttributionControl as ce}from"react-leaflet";import xe,{ThemeContext as X}from"styled-components";import{deepMerge as _}from"grommet/utils";import{deepMerge as se}from"grommet/utils";var A={default:{container:{align:"center",justify:"center",background:"background-front",border:{color:"border",size:"small"},elevation:"medium",flex:!1,round:"full"}}},le=se(A,{default:{container:{height:{min:"25px",max:"25px"},width:{min:"25px",max:"25px"}}}}),I={pin:{...le},cluster:{...A,size:{small:{container:{height:{min:"36px",max:"36px"},width:{min:"36px",max:"36px"}},label:{size:"small"}},medium:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"48px",max:"48px"},width:{min:"48px",max:"48px"}},label:{color:"text-strong",size:"medium",weight:500}},large:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"54px",max:"54px"},width:{min:"54px",max:"54px"}},label:{size:"medium"}}}},popup:{background:"background-front",border:{color:"border-weak",size:"xsmall"},gap:"xsmall",margin:"none",pad:"small",round:"xsmall"}};var he=xe(de)`
  ${({theme:r})=>`
      font-family: ${r.global.font.family};
      height: 100%;
    `}
`,ge=me(({center:r=[0,0],children:e,scrollWheelZoom:o=!0,theme:n,zoom:t=1,zoomControl:p=!1,...a},m)=>{let f=fe(X),s=_(f,{map:_(I,n)});return b.createElement(X.Provider,{value:s},b.createElement(he,{attributionControl:!1,center:r,ref:m,scrollWheelZoom:o,zoom:t,zoomControl:p,...a},b.createElement(ce,{position:"bottomright",prefix:!1}),b.createElement(ue,{attribution:`
            &copy; <a href="https://stadiamaps.com/">Stadia Maps</a>,
            &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a>,
            &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors`,url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"}),e))});ge.propTypes={center:l.array,children:l.any,scrollWheelZoom:l.string||l.bool,theme:l.object,zoom:l.number,zoomControl:l.bool};import h,{useContext as ye}from"react";import H from"prop-types";import be from"react-dom/server";import{v4 as Ce}from"uuid";import{ThemeContext as J}from"styled-components";import{Marker as Te,Popup as ve}from"react-leaflet";import ke from"leaflet";var we=({icon:r,popup:e,...o})=>{var a;let n=ye(J),t=(a=r==null?void 0:r.props)==null?void 0:a.kind,p=e?h.createElement(ve,null,h.createElement(C,null,e)):void 0;return h.createElement(Te,{key:Ce(),icon:ke.divIcon({className:"grommet-marker",html:be.renderToString(h.createElement(J.Provider,{value:n},r||h.createElement(z,null)))}),kind:t,...o},p)};we.propTypes={icon:H.node,popup:H.node};import d,{useContext as Pe}from"react";import K from"prop-types";import{ThemeContext as M}from"styled-components";import{createElementObject as ze,createPathComponent as Me,extendContext as Se}from"@react-leaflet/core";import q from"leaflet";import"leaflet.markercluster";import $ from"react-dom/server";var Le=({...r},e)=>{let o=new q.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,...r});return ze(o,Se(e,{layerContainer:o}))},Be=Me(Le),Ee=({icon:r,popup:e,...o})=>{let n=Pe(M);return d.createElement(Be,{iconCreateFunction:t=>{if(e){let p=t.bindPopup($.renderToString(d.createElement(M.Provider,{value:n},d.createElement(C,null,e({cluster:t})))));t.on("click",()=>{p.openPopup()})}return q.divIcon({className:"grommet-cluster-group",html:$.renderToString(d.createElement(M.Provider,{value:n},r?d.cloneElement(r({cluster:t}),{cluster:t}):d.createElement(k,{cluster:t})))})},...o})};Ee.propTypes={icon:K.func,popup:K.func};import S from"react";import Oe from"prop-types";import De from"styled-components";import{Box as Ne,ThemeContext as je}from"grommet";var Ge=De(Ne)`
  // to create the pin shape
  border-bottom-right-radius: 0;
  // translate to re-align with leaflet div
  transform: rotate(45deg) translateX(-35%);
  &:hover {
    transform: rotate(45deg) translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,z=({kind:r="default"})=>{var t,p,a,m,f,s,u,c,x;let e=S.useContext(je),o=g([(a=(p=(t=e==null?void 0:e.map)==null?void 0:t.pin)==null?void 0:p.default)==null?void 0:a.container,(s=(f=(m=e==null?void 0:e.map)==null?void 0:m.pin)==null?void 0:f[r])==null?void 0:s.container]),n=(x=(c=(u=e==null?void 0:e.map)==null?void 0:u.pin)==null?void 0:c[r])==null?void 0:x.icon;return n&&(n=S.cloneElement(n,{style:{transform:"rotate(-45deg)"}})),S.createElement(Ge,{...o},n)};z.propTypes={kind:Oe.string};import We,{useContext as Ze}from"react";import{ThemeContext as Ae}from"styled-components";import{Box as Ie}from"grommet";var C=({...r})=>{var o;let e=Ze(Ae);return We.createElement(Ie,{...(o=e==null?void 0:e.map)==null?void 0:o.popup,...r})};window.console=console;var Xe=console.error,_e=["useLayoutEffect does nothing on the server, because its effect cannot"];console.error=function(e,...o){_e.some(n=>e.includes(n))||Xe(e,...o)};export{k as Cluster,ae as Controls,pe as LocationBounds,ge as Map,we as Marker,Ee as MarkerCluster,z as Pin,C as Popup,I as base,g as normalizeTheme};
//# sourceMappingURL=index.esm.js.map
