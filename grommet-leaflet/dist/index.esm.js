"use client";import T from"react";import v from"prop-types";import Z,{ThemeContext as U}from"styled-components";import{Box as Q,Text as V}from"grommet";import{deepMerge as F}from"grommet/utils";var g=t=>{let e={};return t.forEach(o=>{e=F(e,o)}),e};var Y=Z(Q)`
  // translate to re-align with leaflet div
  transform: translateX(-35%);
  &:hover {
    transform: translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,R=Z(V)`
  // multiplier of font-size, for tighter alignment
  line-height: 1rem;
`,k=({cluster:t,kind:e="default",size:o="medium",...n})=>{var l,m,c,x,L,B,E,O,D,N,j,G,W;let r=T.useContext(U),i=g([(c=(m=(l=r==null?void 0:r.map)==null?void 0:l.cluster)==null?void 0:m.size)==null?void 0:c.medium,(B=(L=(x=r==null?void 0:r.map)==null?void 0:x.cluster)==null?void 0:L.size)==null?void 0:B[o],(O=(E=r==null?void 0:r.map)==null?void 0:E.cluster)==null?void 0:O.default,(N=(D=r==null?void 0:r.map)==null?void 0:D.cluster)==null?void 0:N[e]]),s=t.getChildCount(),f=(W=(G=(j=r==null?void 0:r.map)==null?void 0:j.cluster)==null?void 0:G[e])==null?void 0:W.icon,u=s;return T.createElement(Y,{...i==null?void 0:i.container,...n},f,T.createElement(R,{...i==null?void 0:i.label},u))};k.propTypes={cluster:v.object,kind:v.string,size:v.string};import p from"react";import w from"prop-types";import{useMap as ee}from"react-leaflet";import oe from"leaflet";import{Box as b,Button as P}from"grommet";import{Add as re,Subtract as te,Globe as ne}from"grommet-icons";var ie=({locations:t})=>{let e=oe.latLngBounds();return t.features?t.features.forEach(o=>{var n,r;e.extend([(n=o.geometry)==null?void 0:n.coordinates[0],(r=o.geometry)==null?void 0:r.coordinates[1]])}):t.forEach(o=>{e.extend([o==null?void 0:o[0],o==null?void 0:o[1]])}),e},pe=1.5,ae=({locations:t})=>{let e=ee(),o=t&&ie({locations:t});return o&&(JSON.stringify(o._northEast)===JSON.stringify(o._southWest)||e.flyToBounds(o,{duration:pe})),p.createElement(b,{className:"leaflet-bottom leaflet-right"},p.createElement(b,{className:"leaflet-control"},p.createElement(b,{elevation:"large",round:"medium",background:"background"},p.createElement(P,{a11yTitle:"Zoom in",icon:p.createElement(re,null),onClick:n=>{n.preventDefault(),e.zoomIn()}}),p.createElement(P,{a11yTitle:"Zoom out",icon:p.createElement(te,null),onClick:n=>{n.preventDefault(),e.zoomOut()}}),p.createElement(b,{border:{color:"border-weak",side:"top"}},o&&p.createElement(P,{a11yTitle:"Zoom to data",icon:p.createElement(ne,null),onClick:n=>{n.preventDefault(),e.flyToBounds(o,{duration:1.5})}})))))};ae.propTypes={locations:w.oneOfType([w.array,w.object])};import y,{forwardRef as me,useContext as fe}from"react";import a from"prop-types";import{MapContainer as ue,TileLayer as de,AttributionControl as ce}from"react-leaflet";import xe,{ThemeContext as X}from"styled-components";import{deepMerge as q}from"grommet/utils";import{deepMerge as se}from"grommet/utils";var A={default:{container:{align:"center",justify:"center",background:"background-front",border:{color:"border",size:"small"},elevation:"medium",flex:!1,round:"full"}}},le=se(A,{default:{container:{height:{min:"25px",max:"25px"},width:{min:"25px",max:"25px"}}}}),I={pin:{...le},cluster:{...A,size:{small:{container:{height:{min:"36px",max:"36px"},width:{min:"36px",max:"36px"}},label:{size:"small"}},medium:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"48px",max:"48px"},width:{min:"48px",max:"48px"}},label:{color:"text-strong",size:"medium",weight:500}},large:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"54px",max:"54px"},width:{min:"54px",max:"54px"}},label:{size:"medium"}}}},popup:{background:"background-front",border:{color:"border-weak",size:"xsmall"},gap:"xsmall",margin:"none",pad:"small",round:"xsmall"}};var he=xe(ue)`
  ${({theme:t})=>`
      font-family: ${t.global.font.family};
      height: 100%;
    `}
`,ge=me(({center:t=[0,0],children:e,scrollWheelZoom:o=!0,tileLayer:n,theme:r,zoom:i=1,zoomControl:s=!1,...f},u)=>{let l=fe(X),m=q(l,{map:q(I,r)});return y.createElement(X.Provider,{value:m},y.createElement(he,{attributionControl:!1,center:t,ref:u,scrollWheelZoom:o,zoom:i,zoomControl:s,...f},y.createElement(ce,{position:"bottomright",prefix:!1}),y.createElement(de,{attribution:n.attribution,url:n.url}),e))});ge.propTypes={center:a.array,children:a.any,scrollWheelZoom:a.string||a.bool,tileLayer:a.shape({attribution:a.string,url:a.string.isRequired}).isRequired,theme:a.object,zoom:a.number,zoomControl:a.bool};import h,{useContext as be}from"react";import _ from"prop-types";import ye from"react-dom/server";import{v4 as Ce}from"uuid";import{ThemeContext as H}from"styled-components";import{Marker as Te,Popup as ve}from"react-leaflet";import ke from"leaflet";var we=({icon:t,popup:e,...o})=>{var s;let n=be(H),r=(s=t==null?void 0:t.props)==null?void 0:s.kind,i=e?h.createElement(ve,null,h.createElement(C,null,e)):void 0;return h.createElement(Te,{key:Ce(),icon:ke.divIcon({className:"grommet-marker",html:ye.renderToString(h.createElement(H.Provider,{value:n},t||h.createElement(z,null)))}),kind:r,...o},i)};we.propTypes={icon:_.node,popup:_.node};import d,{useContext as Pe}from"react";import J from"prop-types";import{ThemeContext as S}from"styled-components";import{createElementObject as ze,createPathComponent as Se,extendContext as Me}from"@react-leaflet/core";import $ from"leaflet";import"leaflet.markercluster";import K from"react-dom/server";var Le=({...t},e)=>{let o=new $.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,...t});return ze(o,Me(e,{layerContainer:o}))},Be=Se(Le),Ee=({icon:t,popup:e,...o})=>{let n=Pe(S);return d.createElement(Be,{iconCreateFunction:r=>{if(e){let i=r.bindPopup(K.renderToString(d.createElement(S.Provider,{value:n},d.createElement(C,null,e({cluster:r})))));r.on("click",()=>{i.openPopup()})}return $.divIcon({className:"grommet-cluster-group",html:K.renderToString(d.createElement(S.Provider,{value:n},t?d.cloneElement(t({cluster:r}),{cluster:r}):d.createElement(k,{cluster:r})))})},...o})};Ee.propTypes={icon:J.func,popup:J.func};import M from"react";import Oe from"prop-types";import De from"styled-components";import{Box as Ne,ThemeContext as je}from"grommet";var Ge=De(Ne)`
  // to create the pin shape
  border-bottom-right-radius: 0;
  // translate to re-align with leaflet div
  transform: rotate(45deg) translateX(-35%);
  &:hover {
    transform: rotate(45deg) translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,z=({kind:t="default"})=>{var r,i,s,f,u,l,m,c,x;let e=M.useContext(je),o=g([(s=(i=(r=e==null?void 0:e.map)==null?void 0:r.pin)==null?void 0:i.default)==null?void 0:s.container,(l=(u=(f=e==null?void 0:e.map)==null?void 0:f.pin)==null?void 0:u[t])==null?void 0:l.container]),n=(x=(c=(m=e==null?void 0:e.map)==null?void 0:m.pin)==null?void 0:c[t])==null?void 0:x.icon;return n&&(n=M.cloneElement(n,{style:{transform:"rotate(-45deg)"}})),M.createElement(Ge,{...o},n)};z.propTypes={kind:Oe.string};import We,{useContext as Ze}from"react";import{ThemeContext as Ae}from"styled-components";import{Box as Ie}from"grommet";var C=({...t})=>{var o;let e=Ze(Ae);return We.createElement(Ie,{...(o=e==null?void 0:e.map)==null?void 0:o.popup,...t})};window.console=console;var Xe=console.error,qe=["useLayoutEffect does nothing on the server, because its effect cannot"];console.error=function(e,...o){qe.some(n=>e.includes(n))||Xe(e,...o)};export{k as Cluster,ae as Controls,ie as LocationBounds,ge as Map,we as Marker,Ee as MarkerCluster,z as Pin,C as Popup,I as base,g as normalizeTheme};
//# sourceMappingURL=index.esm.js.map
