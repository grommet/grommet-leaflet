"use client";var ye=Object.create;var S=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var Te=Object.getOwnPropertyNames;var ve=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var we=(o,e)=>{for(var r in e)S(o,r,{get:e[r],enumerable:!0})},oe=(o,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of Te(e))!ke.call(o,t)&&t!==r&&S(o,t,{get:()=>e[t],enumerable:!(n=Ce(e,t))||n.enumerable});return o};var i=(o,e,r)=>(r=o!=null?ye(ve(o)):{},oe(e||!o||!o.__esModule?S(r,"default",{value:o,enumerable:!0}):r,o)),Pe=o=>oe(S({},"__esModule",{value:!0}),o);var Ge={};we(Ge,{Cluster:()=>E,Controls:()=>pe,LocationBounds:()=>ie,Map:()=>le,Marker:()=>de,MarkerCluster:()=>ce,Pin:()=>N,Popup:()=>z,base:()=>A,normalizeTheme:()=>k});module.exports=Pe(Ge);var M=i(require("react")),L=i(require("prop-types")),w=i(require("styled-components")),B=require("grommet");var re=require("grommet/utils"),k=o=>{let e={};return o.forEach(r=>{e=(0,re.deepMerge)(e,r)}),e};var ze=(0,w.default)(B.Box)`
  // translate to re-align with leaflet div
  transform: translateX(-35%);
  &:hover {
    transform: translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,Se=(0,w.default)(B.Text)`
  // multiplier of font-size, for tighter alignment
  line-height: 1rem;
`,E=({cluster:o,kind:e="default",size:r="medium",...n})=>{var c,x,T,v,K,$,F,U,Q,V,Y,R,ee;let t=M.default.useContext(w.ThemeContext),p=k([(T=(x=(c=t==null?void 0:t.map)==null?void 0:c.cluster)==null?void 0:x.size)==null?void 0:T.medium,($=(K=(v=t==null?void 0:t.map)==null?void 0:v.cluster)==null?void 0:K.size)==null?void 0:$[r],(U=(F=t==null?void 0:t.map)==null?void 0:F.cluster)==null?void 0:U.default,(V=(Q=t==null?void 0:t.map)==null?void 0:Q.cluster)==null?void 0:V[e]]),l=o.getChildCount(),h=(ee=(R=(Y=t==null?void 0:t.map)==null?void 0:Y.cluster)==null?void 0:R[e])==null?void 0:ee.icon,g=l;return M.default.createElement(ze,{...p==null?void 0:p.container,...n},h,M.default.createElement(Se,{...p==null?void 0:p.label},g))};E.propTypes={cluster:L.default.object,kind:L.default.string,size:L.default.string};var a=i(require("react")),O=i(require("prop-types")),te=require("react-leaflet"),ne=i(require("leaflet")),m=require("grommet"),b=require("grommet-icons"),ie=({locations:o})=>{let e=ne.default.latLngBounds();return o.features?o.features.forEach(r=>{var n,t;e.extend([(n=r.geometry)==null?void 0:n.coordinates[0],(t=r.geometry)==null?void 0:t.coordinates[1]])}):o.forEach(r=>{e.extend([r==null?void 0:r[0],r==null?void 0:r[1]])}),e},Me=1.5,pe=({locations:o})=>{let e=(0,te.useMap)(),r=o&&ie({locations:o});return r&&(JSON.stringify(r._northEast)===JSON.stringify(r._southWest)||e.flyToBounds(r,{duration:Me})),a.default.createElement(m.Box,{className:"leaflet-bottom leaflet-right"},a.default.createElement(m.Box,{className:"leaflet-control"},a.default.createElement(m.Box,{elevation:"large",round:"medium",background:"background"},a.default.createElement(m.Button,{a11yTitle:"Zoom in",icon:a.default.createElement(b.Add,null),onClick:n=>{n.preventDefault(),e.zoomIn()}}),a.default.createElement(m.Button,{a11yTitle:"Zoom out",icon:a.default.createElement(b.Subtract,null),onClick:n=>{n.preventDefault(),e.zoomOut()}}),a.default.createElement(m.Box,{border:{color:"border-weak",side:"top"}},r&&a.default.createElement(m.Button,{a11yTitle:"Zoom to data",icon:a.default.createElement(b.Globe,null),onClick:n=>{n.preventDefault(),e.flyToBounds(r,{duration:1.5})}})))))};pe.propTypes={locations:O.default.oneOfType([O.default.array,O.default.object])};var f=i(require("react")),s=i(require("prop-types")),y=require("react-leaflet"),P=i(require("styled-components")),I=require("grommet/utils");var ae=require("grommet/utils"),se={default:{container:{align:"center",justify:"center",background:"background-front",border:{color:"border",size:"small"},elevation:"medium",flex:!1,round:"full"}}},Le=(0,ae.deepMerge)(se,{default:{container:{height:{min:"25px",max:"25px"},width:{min:"25px",max:"25px"}}}}),A={pin:{...Le},cluster:{...se,size:{small:{container:{height:{min:"36px",max:"36px"},width:{min:"36px",max:"36px"}},label:{size:"small"}},medium:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"48px",max:"48px"},width:{min:"48px",max:"48px"}},label:{color:"text-strong",size:"medium",weight:500}},large:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"54px",max:"54px"},width:{min:"54px",max:"54px"}},label:{size:"medium"}}}},popup:{background:"background-front",border:{color:"border-weak",size:"xsmall"},gap:"xsmall",margin:"none",pad:"small",round:"xsmall"}};var Be=(0,P.default)(y.MapContainer)`
  ${({theme:o})=>`
      font-family: ${o.global.font.family};
      height: 100%;
    `}
`,le=(0,f.forwardRef)(({center:o=[0,0],children:e,scrollWheelZoom:r=!0,tileLayer:n,theme:t,zoom:p=1,zoomControl:l=!1,...h},g)=>{let c=(0,f.useContext)(P.ThemeContext),x=(0,I.deepMerge)(c,{map:(0,I.deepMerge)(A,t)});return f.default.createElement(P.ThemeContext.Provider,{value:x},f.default.createElement(Be,{attributionControl:!1,center:o,ref:g,scrollWheelZoom:r,zoom:p,zoomControl:l,...h},f.default.createElement(y.AttributionControl,{position:"bottomright",prefix:!1}),f.default.createElement(y.TileLayer,{attribution:n.attribution,url:n.url}),e))});le.propTypes={center:s.default.array,children:s.default.any,scrollWheelZoom:s.default.string||s.default.bool,tileLayer:s.default.shape({attribution:s.default.string,url:s.default.string.isRequired}).isRequired,theme:s.default.object,zoom:s.default.number,zoomControl:s.default.bool};var d=i(require("react")),X=i(require("prop-types")),me=i(require("react-dom/server")),fe=require("uuid"),q=require("styled-components"),D=require("react-leaflet"),ue=i(require("leaflet"));var de=({icon:o,popup:e,...r})=>{var l;let n=(0,d.useContext)(q.ThemeContext),t=(l=o==null?void 0:o.props)==null?void 0:l.kind,p=e?d.default.createElement(D.Popup,null,d.default.createElement(z,null,e)):void 0;return d.default.createElement(D.Marker,{key:(0,fe.v4)(),icon:ue.default.divIcon({className:"grommet-marker",html:me.default.renderToString(d.default.createElement(q.ThemeContext.Provider,{value:n},o||d.default.createElement(N,null)))}),kind:t,...r},p)};de.propTypes={icon:X.default.node,popup:X.default.node};var u=i(require("react")),_=i(require("prop-types")),j=require("styled-components"),C=require("@react-leaflet/core"),J=i(require("leaflet")),Re=require("leaflet.markercluster"),H=i(require("react-dom/server"));var Ee=({...o},e)=>{let r=new J.default.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,...o});return(0,C.createElementObject)(r,(0,C.extendContext)(e,{layerContainer:r}))},Oe=(0,C.createPathComponent)(Ee),ce=({icon:o,popup:e,...r})=>{let n=(0,u.useContext)(j.ThemeContext);return u.default.createElement(Oe,{iconCreateFunction:t=>{if(e){let p=t.bindPopup(H.default.renderToString(u.default.createElement(j.ThemeContext.Provider,{value:n},u.default.createElement(z,null,e({cluster:t})))));t.on("click",()=>{p.openPopup()})}return J.default.divIcon({className:"grommet-cluster-group",html:H.default.renderToString(u.default.createElement(j.ThemeContext.Provider,{value:n},o?u.default.cloneElement(o({cluster:t}),{cluster:t}):u.default.createElement(E,{cluster:t})))})},...r})};ce.propTypes={icon:_.default.func,popup:_.default.func};var G=i(require("react")),xe=i(require("prop-types")),he=i(require("styled-components")),W=require("grommet");var De=(0,he.default)(W.Box)`
  // to create the pin shape
  border-bottom-right-radius: 0;
  // translate to re-align with leaflet div
  transform: rotate(45deg) translateX(-35%);
  &:hover {
    transform: rotate(45deg) translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,N=({kind:o="default"})=>{var t,p,l,h,g,c,x,T,v;let e=G.default.useContext(W.ThemeContext),r=k([(l=(p=(t=e==null?void 0:e.map)==null?void 0:t.pin)==null?void 0:p.default)==null?void 0:l.container,(c=(g=(h=e==null?void 0:e.map)==null?void 0:h.pin)==null?void 0:g[o])==null?void 0:c.container]),n=(v=(T=(x=e==null?void 0:e.map)==null?void 0:x.pin)==null?void 0:T[o])==null?void 0:v.icon;return n&&(n=G.default.cloneElement(n,{style:{transform:"rotate(-45deg)"}})),G.default.createElement(De,{...r},n)};N.propTypes={kind:xe.default.string};var Z=i(require("react")),ge=require("styled-components"),be=require("grommet");var z=({...o})=>{var r;let e=(0,Z.useContext)(ge.ThemeContext);return Z.default.createElement(be.Box,{...(r=e==null?void 0:e.map)==null?void 0:r.popup,...o})};window.console=console;var Ne=console.error,je=["useLayoutEffect does nothing on the server, because its effect cannot"];console.error=function(e,...r){je.some(n=>e.includes(n))||Ne(e,...r)};
//# sourceMappingURL=index.cjs.js.map
