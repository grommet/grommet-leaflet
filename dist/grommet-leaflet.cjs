"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const ut=require("react/jsx-runtime"),q=require("react"),St=require("styled-components"),Jt=require("grommet"),Xl=require("react-dom"),$l=require("react-dom/server"),tr=r=>r&&r.__esModule?r:{default:r},Ot=tr(q),ui=tr(St),Fn=tr($l);function ts(r,i){const n=q.useRef(i);q.useEffect(function(){i!==n.current&&r.attributionControl!=null&&(n.current!=null&&r.attributionControl.removeAttribution(n.current),i!=null&&r.attributionControl.addAttribution(i)),n.current=i},[r,i])}const Kl=1;function Jl(r){return Object.freeze({__version:Kl,map:r})}function Ql(r,i){return Object.freeze({...r,...i})}const es=q.createContext(null),is=es.Provider;function ci(){const r=q.useContext(es);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function ns(r){function i(n,a){const{instance:l,context:s}=r(n).current;return q.useImperativeHandle(a,()=>l),n.children==null?null:Ot.default.createElement(is,{value:s},n.children)}return q.forwardRef(i)}function th(r){function i(n,a){const[l,s]=q.useState(!1),{instance:h}=r(n,s).current;q.useImperativeHandle(a,()=>h),q.useEffect(function(){l&&h.update()},[h,l,n.children]);const c=h._contentNode;return c?Xl.createPortal(n.children,c):null}return q.forwardRef(i)}function rs(r){function i(n,a){const{instance:l}=r(n).current;return q.useImperativeHandle(a,()=>l),null}return q.forwardRef(i)}function eh(r){return function(n){const a=ci(),l=r(n,a),{instance:s}=l.current,h=q.useRef(n.position),{position:c}=n;return q.useEffect(function(){return s.addTo(a.map),function(){s.remove()}},[a.map,s]),q.useEffect(function(){c!=null&&c!==h.current&&(s.setPosition(c),h.current=c)},[s,c]),l}}function er(r,i){const n=q.useRef();q.useEffect(function(){return i!=null&&r.instance.on(i),n.current=i,function(){n.current!=null&&r.instance.off(n.current),n.current=null}},[r,i])}function Hi(r,i){const n=r.pane??i.pane;return n?{...r,pane:n}:r}function ih(r,i){return function(a,l){const s=ci(),h=r(Hi(a,s),s);return ts(s.map,a.attribution),er(h.current,a.eventHandlers),i(h.current,s,a,l),h}}var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ss(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(r,i){(function(n,a){a(i)})(os,function(n){var a="1.9.4";function l(t){var e,o,u,f;for(o=1,u=arguments.length;o<u;o++){f=arguments[o];for(e in f)t[e]=f[e]}return t}var s=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function h(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var u=o.call(arguments,2);return function(){return t.apply(e,u.length?u.concat(o.call(arguments)):arguments)}}var c=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function _(t,e,o){var u,f,g,b;return b=function(){u=!1,f&&(g.apply(o,f),f=!1)},g=function(){u?f=arguments:(t.apply(o,arguments),setTimeout(b,e),u=!0)},g}function m(t,e,o){var u=e[1],f=e[0],g=u-f;return t===u&&o?t:((t-f)%g+g)%g+f}function p(){return!1}function v(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w(t){return y(t).split(/\s+/)}function x(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function E(t,e,o){var u=[];for(var f in t)u.push(encodeURIComponent(o?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!e||e.indexOf("?")===-1?"?":"&")+u.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function I(t,e){return t.replace(M,function(o,u){var f=e[u];if(f===void 0)throw new Error("No value provided for variable "+o);return typeof f=="function"&&(f=f(e)),f})}var A=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function O(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ot(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var G=0;function et(t){var e=+new Date,o=Math.max(0,16-(e-G));return G=e+o,window.setTimeout(t,o)}var yt=window.requestAnimationFrame||ot("RequestAnimationFrame")||et,dt=window.cancelAnimationFrame||ot("CancelAnimationFrame")||ot("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function mt(t,e,o){if(o&&yt===et)t.call(e);else return yt.call(window,h(t,e))}function Pt(t){t&&dt.call(window,t)}var fe={__proto__:null,extend:l,create:s,bind:h,get lastId(){return c},stamp:d,throttle:_,wrapNum:m,falseFn:p,formatNum:v,trim:y,splitWords:w,setOptions:x,getParamString:E,template:I,isArray:A,indexOf:O,emptyImageUrl:S,requestFn:yt,cancelFn:dt,requestAnimFrame:mt,cancelAnimFrame:Pt};function wt(){}wt.extend=function(t){var e=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,u=s(o);u.constructor=e,e.prototype=u;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(e[f]=this[f]);return t.statics&&l(e,t.statics),t.includes&&(Nt(t.includes),l.apply(null,[u].concat(t.includes))),l(u,t),delete u.statics,delete u.includes,u.options&&(u.options=o.options?s(o.options):{},l(u.options,t.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,b=u._initHooks.length;g<b;g++)u._initHooks[g].call(this)}},e},wt.include=function(t){var e=this.prototype.options;return l(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},wt.mergeOptions=function(t){return l(this.prototype.options,t),this},wt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Nt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=A(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(t,e,o){if(typeof t=="object")for(var u in t)this._on(u,t[u],e);else{t=w(t);for(var f=0,g=t.length;f<g;f++)this._on(t[f],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var u in t)this._off(u,t[u],e);else{t=w(t);for(var f=arguments.length===1,g=0,b=t.length;g<b;g++)f?this._off(t[g]):this._off(t[g],e,o)}return this},_on:function(t,e,o,u){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var f={fn:e,ctx:o};u&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,e,o){var u,f,g;if(this._events&&(u=this._events[t],!!u)){if(arguments.length===1){if(this._firingCount)for(f=0,g=u.length;f<g;f++)u[f].fn=p;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var b=this._listens(t,e,o);if(b!==!1){var P=u[b];this._firingCount&&(P.fn=p,this._events[t]=u=u.slice()),u.splice(b,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var u=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var g=0,b=f.length;g<b;g++){var P=f[g],C=P.fn;P.once&&this.off(t,C,P.ctx),C.call(P.ctx||this,u)}this._firingCount--}}return o&&this._propagateEvent(u),this},listens:function(t,e,o,u){typeof t!="string"&&console.warn('"string" type argument expected');var f=e;typeof e!="function"&&(u=!!e,f=void 0,o=void 0);var g=this._events&&this._events[t];if(g&&g.length&&this._listens(t,f,o)!==!1)return!0;if(u){for(var b in this._eventParents)if(this._eventParents[b].listens(t,e,o,u))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var u=this._events[t]||[];if(!e)return!!u.length;o===this&&(o=void 0);for(var f=0,g=u.length;f<g;f++)if(u[f].fn===e&&u[f].ctx===o)return f;return!1},once:function(t,e,o){if(typeof t=="object")for(var u in t)this._on(u,t[u],e,!0);else{t=w(t);for(var f=0,g=t.length;f<g;f++)this._on(t[f],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var Mt=wt.extend(ct);function N(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var le=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(k(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(k(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(t){t=k(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=k(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=k(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function k(t,e,o){return t instanceof N?t:A(t)?new N(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,e,o)}function B(t,e){if(t)for(var o=e?[t,e]:t,u=0,f=o.length;u<f;u++)this.extend(o[u])}B.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof N||typeof t[0]=="number"||"x"in t)e=o=k(t);else if(t=U(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return k(this.min.x,this.max.y)},getTopRight:function(){return k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof N?t=k(t):t=U(t),t instanceof B?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=U(t);var e=this.min,o=this.max,u=t.min,f=t.max,g=f.x>=e.x&&u.x<=o.x,b=f.y>=e.y&&u.y<=o.y;return g&&b},overlaps:function(t){t=U(t);var e=this.min,o=this.max,u=t.min,f=t.max,g=f.x>e.x&&u.x<o.x,b=f.y>e.y&&u.y<o.y;return g&&b},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,u=Math.abs(e.x-o.x)*t,f=Math.abs(e.y-o.y)*t;return U(k(e.x-u,e.y-f),k(o.x+u,o.y+f))},equals:function(t){return t?(t=U(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function U(t,e){return!t||t instanceof B?t:new B(t,e)}function H(t,e){if(t)for(var o=e?[t,e]:t,u=0,f=o.length;u<f;u++)this.extend(o[u])}H.prototype={extend:function(t){var e=this._southWest,o=this._northEast,u,f;if(t instanceof j)u=t,f=t;else if(t instanceof H){if(u=t._southWest,f=t._northEast,!u||!f)return this}else return t?this.extend(Z(t)||F(t)):this;return!e&&!o?(this._southWest=new j(u.lat,u.lng),this._northEast=new j(f.lat,f.lng)):(e.lat=Math.min(u.lat,e.lat),e.lng=Math.min(u.lng,e.lng),o.lat=Math.max(f.lat,o.lat),o.lng=Math.max(f.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,u=Math.abs(e.lat-o.lat)*t,f=Math.abs(e.lng-o.lng)*t;return new H(new j(e.lat-u,e.lng-f),new j(o.lat+u,o.lng+f))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof j||"lat"in t?t=Z(t):t=F(t);var e=this._southWest,o=this._northEast,u,f;return t instanceof H?(u=t.getSouthWest(),f=t.getNorthEast()):u=f=t,u.lat>=e.lat&&f.lat<=o.lat&&u.lng>=e.lng&&f.lng<=o.lng},intersects:function(t){t=F(t);var e=this._southWest,o=this._northEast,u=t.getSouthWest(),f=t.getNorthEast(),g=f.lat>=e.lat&&u.lat<=o.lat,b=f.lng>=e.lng&&u.lng<=o.lng;return g&&b},overlaps:function(t){t=F(t);var e=this._southWest,o=this._northEast,u=t.getSouthWest(),f=t.getNorthEast(),g=f.lat>e.lat&&u.lat<o.lat,b=f.lng>e.lng&&u.lng<o.lng;return g&&b},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function F(t,e){return t instanceof H?t:new H(t,e)}function j(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}j.prototype={equals:function(t,e){if(!t)return!1;t=Z(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return X.distance(this,Z(t))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return F([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new j(this.lat,this.lng,this.alt)}};function Z(t,e,o){return t instanceof j?t:A(t)&&typeof t[0]!="object"?t.length===3?new j(t[0],t[1],t[2]):t.length===2?new j(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new j(t,e,o)}var W={latLngToPoint:function(t,e){var o=this.projection.project(t),u=this.scale(e);return this.transformation._transform(o,u)},pointToLatLng:function(t,e){var o=this.scale(e),u=this.transformation.untransform(t,o);return this.projection.unproject(u)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),u=this.transformation.transform(e.min,o),f=this.transformation.transform(e.max,o);return new B(u,f)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,u=t.alt;return new j(o,e,u)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),u=e.lat-o.lat,f=e.lng-o.lng;if(u===0&&f===0)return t;var g=t.getSouthWest(),b=t.getNorthEast(),P=new j(g.lat-u,g.lng-f),C=new j(b.lat-u,b.lng-f);return new H(P,C)}},X=l({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,u=t.lat*o,f=e.lat*o,g=Math.sin((e.lat-t.lat)*o/2),b=Math.sin((e.lng-t.lng)*o/2),P=g*g+Math.cos(u)*Math.cos(f)*b*b,C=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*C}}),it=6378137,Q={R:it,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,u=Math.max(Math.min(o,t.lat),-o),f=Math.sin(u*e);return new N(this.R*t.lng*e,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var e=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=it*Math.PI;return new B([-t,-t],[t,t])}()};function gt(t,e,o,u){if(A(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=u}gt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new N((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function R(t,e,o,u){return new gt(t,e,o,u)}var It=l({},X,{code:"EPSG:3857",projection:Q,transformation:function(){var t=.5/(Math.PI*Q.R);return R(t,.5,-t,.5)}()}),ve=l({},It,{code:"EPSG:900913"});function Re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function mr(t,e){var o="",u,f,g,b,P,C;for(u=0,g=t.length;u<g;u++){for(P=t[u],f=0,b=P.length;f<b;f++)C=P[f],o+=(f?"L":"M")+C.x+" "+C.y;o+=e?V.svg?"z":"x":""}return o||"M0 0"}var Gi=document.documentElement.style,mi="ActiveXObject"in window,Ca=mi&&!document.addEventListener,pr="msLaunchUri"in navigator&&!("documentMode"in document),Xi=Qt("webkit"),gr=Qt("android"),vr=Qt("android 2")||Qt("android 3"),ka=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ma=gr&&Qt("Google")&&ka<537&&!("AudioNode"in window),$i=!!window.opera,yr=!pr&&Qt("chrome"),br=Qt("gecko")&&!Xi&&!$i&&!mi,Sa=!yr&&Qt("safari"),xr=Qt("phantom"),wr="OTransition"in Gi,za=navigator.platform.indexOf("Win")===0,Lr=mi&&"transition"in Gi,Ki="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vr,Pr="MozPerspective"in Gi,Ea=!window.L_DISABLE_3D&&(Lr||Ki||Pr)&&!wr&&!xr,Ze=typeof orientation<"u"||Qt("mobile"),Oa=Ze&&Xi,Ia=Ze&&Ki,Tr=!window.PointerEvent&&window.MSPointerEvent,Cr=!!(window.PointerEvent||Tr),kr="ontouchstart"in window||!!window.TouchEvent,Ba=!window.L_NO_TOUCH&&(kr||Cr),Aa=Ze&&$i,Ra=Ze&&br,Za=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Da=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,e),window.removeEventListener("testPassiveEventSupport",p,e)}catch{}return t}(),Fa=function(){return!!document.createElement("canvas").getContext}(),Ji=!!(document.createElementNS&&Re("svg").createSVGRect),ja=!!Ji&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Na=!Ji&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Ua=navigator.platform.indexOf("Mac")===0,Va=navigator.platform.indexOf("Linux")===0;function Qt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var V={ie:mi,ielt9:Ca,edge:pr,webkit:Xi,android:gr,android23:vr,androidStock:Ma,opera:$i,chrome:yr,gecko:br,safari:Sa,phantom:xr,opera12:wr,win:za,ie3d:Lr,webkit3d:Ki,gecko3d:Pr,any3d:Ea,mobile:Ze,mobileWebkit:Oa,mobileWebkit3d:Ia,msPointer:Tr,pointer:Cr,touch:Ba,touchNative:kr,mobileOpera:Aa,mobileGecko:Ra,retina:Za,passiveEvents:Da,canvas:Fa,svg:Ji,vml:Na,inlineSvg:ja,mac:Ua,linux:Va},Mr=V.msPointer?"MSPointerDown":"pointerdown",Sr=V.msPointer?"MSPointerMove":"pointermove",zr=V.msPointer?"MSPointerUp":"pointerup",Er=V.msPointer?"MSPointerCancel":"pointercancel",Qi={touchstart:Mr,touchmove:Sr,touchend:zr,touchcancel:Er},Or={touchstart:Xa,touchmove:pi,touchend:pi,touchcancel:pi},ye={},Ir=!1;function Ha(t,e,o){return e==="touchstart"&&Ga(),Or[e]?(o=Or[e].bind(this,o),t.addEventListener(Qi[e],o,!1),o):(console.warn("wrong event specified:",e),p)}function Wa(t,e,o){if(!Qi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Qi[e],o,!1)}function Ya(t){ye[t.pointerId]=t}function qa(t){ye[t.pointerId]&&(ye[t.pointerId]=t)}function Br(t){delete ye[t.pointerId]}function Ga(){Ir||(document.addEventListener(Mr,Ya,!0),document.addEventListener(Sr,qa,!0),document.addEventListener(zr,Br,!0),document.addEventListener(Er,Br,!0),Ir=!0)}function pi(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in ye)e.touches.push(ye[o]);e.changedTouches=[e],t(e)}}function Xa(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ct(e),pi(t,e)}function $a(t){var e={},o,u;for(u in t)o=t[u],e[u]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ka=200;function Ja(t,e){t.addEventListener("dblclick",e);var o=0,u;function f(g){if(g.detail!==1){u=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var b=Fr(g);if(!(b.some(function(C){return C instanceof HTMLLabelElement&&C.attributes.for})&&!b.some(function(C){return C instanceof HTMLInputElement||C instanceof HTMLSelectElement}))){var P=Date.now();P-o<=Ka?(u++,u===2&&e($a(g))):u=1,o=P}}}return t.addEventListener("click",f),{dblclick:e,simDblclick:f}}function Qa(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var tn=yi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),De=yi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ar=De==="webkitTransition"||De==="OTransition"?De+"End":"transitionend";function Rr(t){return typeof t=="string"?document.getElementById(t):t}function Fe(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(t,null);o=u?u[e]:null}return o==="auto"?null:o}function st(t,e,o){var u=document.createElement(t);return u.className=e||"",o&&o.appendChild(u),u}function _t(t){var e=t.parentNode;e&&e.removeChild(t)}function gi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function be(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function xe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function en(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=vi(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function J(t,e){if(t.classList!==void 0)for(var o=w(e),u=0,f=o.length;u<f;u++)t.classList.add(o[u]);else if(!en(t,e)){var g=vi(t);nn(t,(g?g+" ":"")+e)}}function vt(t,e){t.classList!==void 0?t.classList.remove(e):nn(t,y((" "+vi(t)+" ").replace(" "+e+" "," ")))}function nn(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function vi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ut(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&tl(t,e)}function tl(t,e){var o=!1,u="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(u)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+u+"(opacity="+e+")"}function yi(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function de(t,e,o){var u=e||new N(0,0);t.style[tn]=(V.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(o?" scale("+o+")":"")}function bt(t,e){t._leaflet_pos=e,V.any3d?de(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function _e(t){return t._leaflet_pos||new N(0,0)}var je,Ne,rn;if("onselectstart"in document)je=function(){$(window,"selectstart",Ct)},Ne=function(){ft(window,"selectstart",Ct)};else{var Ue=yi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);je=function(){if(Ue){var t=document.documentElement.style;rn=t[Ue],t[Ue]="none"}},Ne=function(){Ue&&(document.documentElement.style[Ue]=rn,rn=void 0)}}function on(){$(window,"dragstart",Ct)}function sn(){ft(window,"dragstart",Ct)}var bi,an;function ln(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(xi(),bi=t,an=t.style.outlineStyle,t.style.outlineStyle="none",$(window,"keydown",xi))}function xi(){bi&&(bi.style.outlineStyle=an,bi=void 0,an=void 0,ft(window,"keydown",xi))}function Zr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function hn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var el={__proto__:null,TRANSFORM:tn,TRANSITION:De,TRANSITION_END:Ar,get:Rr,getStyle:Fe,create:st,remove:_t,empty:gi,toFront:be,toBack:xe,hasClass:en,addClass:J,removeClass:vt,setClass:nn,getClass:vi,setOpacity:Ut,testProp:yi,setTransform:de,setPosition:bt,getPosition:_e,get disableTextSelection(){return je},get enableTextSelection(){return Ne},disableImageDrag:on,enableImageDrag:sn,preventOutline:ln,restoreOutline:xi,getSizedParentNode:Zr,getScale:hn};function $(t,e,o,u){if(e&&typeof e=="object")for(var f in e)cn(t,f,e[f],o);else{e=w(e);for(var g=0,b=e.length;g<b;g++)cn(t,e[g],o,u)}return this}var te="_leaflet_events";function ft(t,e,o,u){if(arguments.length===1)Dr(t),delete t[te];else if(e&&typeof e=="object")for(var f in e)fn(t,f,e[f],o);else if(e=w(e),arguments.length===2)Dr(t,function(P){return O(e,P)!==-1});else for(var g=0,b=e.length;g<b;g++)fn(t,e[g],o,u);return this}function Dr(t,e){for(var o in t[te]){var u=o.split(/\d/)[0];(!e||e(u))&&fn(t,u,null,null,o)}}var un={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cn(t,e,o,u){var f=e+d(o)+(u?"_"+d(u):"");if(t[te]&&t[te][f])return this;var g=function(P){return o.call(u||t,P||window.event)},b=g;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?g=Ha(t,e,g):V.touch&&e==="dblclick"?g=Ja(t,g):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(un[e]||e,g,V.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(g=function(P){P=P||window.event,_n(t,P)&&b(P)},t.addEventListener(un[e],g,!1)):t.addEventListener(e,b,!1):t.attachEvent("on"+e,g),t[te]=t[te]||{},t[te][f]=g}function fn(t,e,o,u,f){f=f||e+d(o)+(u?"_"+d(u):"");var g=t[te]&&t[te][f];if(!g)return this;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?Wa(t,e,g):V.touch&&e==="dblclick"?Qa(t,g):"removeEventListener"in t?t.removeEventListener(un[e]||e,g,!1):t.detachEvent("on"+e,g),t[te][f]=null}function me(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function dn(t){return cn(t,"wheel",me),this}function Ve(t){return $(t,"mousedown touchstart dblclick contextmenu",me),t._leaflet_disable_click=!0,this}function Ct(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function pe(t){return Ct(t),me(t),this}function Fr(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function jr(t,e){if(!e)return new N(t.clientX,t.clientY);var o=hn(e),u=o.boundingClientRect;return new N((t.clientX-u.left)/o.x-e.clientLeft,(t.clientY-u.top)/o.y-e.clientTop)}var il=V.linux&&V.chrome?window.devicePixelRatio:V.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Nr(t){return V.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/il:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function _n(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var nl={__proto__:null,on:$,off:ft,stopPropagation:me,disableScrollPropagation:dn,disableClickPropagation:Ve,preventDefault:Ct,stop:pe,getPropagationPath:Fr,getMousePosition:jr,getWheelDelta:Nr,isExternalTarget:_n,addListener:$,removeListener:ft},Ur=Mt.extend({run:function(t,e,o,u){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=_e(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=mt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),bt(this._el,o),this.fire("step")},_complete:function(){Pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),nt=Mt.extend({options:{crs:It,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=x(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(Z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=De&&V.any3d&&!V.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$(this._proxy,Ar,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(Z(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=l({animate:o.animate},o.zoom),o.pan=l({animate:o.animate,duration:o.duration},o.pan));var u=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var u=this.getZoomScale(e),f=this.getSize().divideBy(2),g=t instanceof N?t:this.latLngToContainerPoint(t),b=g.subtract(f).multiplyBy(1-1/u),P=this.containerPointToLatLng(f.add(b));return this.setView(P,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var o=k(e.paddingTopLeft||e.padding||[0,0]),u=k(e.paddingBottomRight||e.padding||[0,0]),f=this.getBoundsZoom(t,!1,o.add(u));if(f=typeof e.maxZoom=="number"?Math.min(e.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var g=u.subtract(o).divideBy(2),b=this.project(t.getSouthWest(),f),P=this.project(t.getNorthEast(),f),C=this.unproject(b.add(P).divideBy(2).add(g),f);return{center:C,zoom:f}},fitBounds:function(t,e){if(t=F(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=k(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ur,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){J(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!V.any3d)return this.setView(t,e,o);this._stop();var u=this.project(this.getCenter()),f=this.project(t),g=this.getSize(),b=this._zoom;t=Z(t),e=e===void 0?b:e;var P=Math.max(g.x,g.y),C=P*this.getZoomScale(b,e),z=f.distanceTo(u)||1,D=1.42,Y=D*D;function tt(xt){var Ii=xt?-1:1,Wl=xt?C:P,Yl=C*C-P*P+Ii*Y*Y*z*z,ql=2*Wl*Y*z,Tn=Yl/ql,Lo=Math.sqrt(Tn*Tn+1)-Tn,Gl=Lo<1e-9?-18:Math.log(Lo);return Gl}function zt(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function Tt(xt){return(Math.exp(xt)+Math.exp(-xt))/2}function Ht(xt){return zt(xt)/Tt(xt)}var Bt=tt(0);function ke(xt){return P*(Tt(Bt)/Tt(Bt+D*xt))}function Nl(xt){return P*(Tt(Bt)*Ht(Bt+D*xt)-zt(Bt))/Y}function Ul(xt){return 1-Math.pow(1-xt,1.5)}var Vl=Date.now(),xo=(tt(1)-Bt)/D,Hl=o.duration?1e3*o.duration:1e3*xo*.8;function wo(){var xt=(Date.now()-Vl)/Hl,Ii=Ul(xt)*xo;xt<=1?(this._flyToFrame=mt(wo,this),this._move(this.unproject(u.add(f.subtract(u).multiplyBy(Nl(Ii)/z)),b),this.getScaleZoom(P/ke(Ii),b),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),wo.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=F(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),u=this._limitCenter(o,this._zoom,F(t));return o.equals(u)||this.panTo(u,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=k(e.paddingTopLeft||e.padding||[0,0]),u=k(e.paddingBottomRight||e.padding||[0,0]),f=this.project(this.getCenter()),g=this.project(t),b=this.getPixelBounds(),P=U([b.min.add(o),b.max.subtract(u)]),C=P.getSize();if(!P.contains(g)){this._enforcingBounds=!0;var z=g.subtract(P.getCenter()),D=P.extend(g).getSize().subtract(C);f.x+=z.x<0?-D.x:D.x,f.y+=z.y<0?-D.y:D.y,this.panTo(this.unproject(f),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),u=e.divideBy(2).round(),f=o.divideBy(2).round(),g=u.subtract(f);return!g.x&&!g.y?this:(t.animate&&t.pan?this.panBy(g):(t.pan&&this._rawPanBy(g),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=h(this._handleGeolocationResponse,this),o=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,u=new j(e,o),f=u.toBounds(t.coords.accuracy*2),g=this._locateOptions;if(g.setView){var b=this.getBoundsZoom(f);this.setView(u,g.maxZoom?Math.min(b,g.maxZoom):b)}var P={latlng:u,bounds:f,timestamp:t.timestamp};for(var C in t.coords)typeof t.coords[C]=="number"&&(P[C]=t.coords[C]);this.fire("locationfound",P)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)_t(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),u=st("div",o,e||this._mapPane);return t&&(this._panes[t]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new H(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=F(t),o=k(o||[0,0]);var u=this.getZoom()||0,f=this.getMinZoom(),g=this.getMaxZoom(),b=t.getNorthWest(),P=t.getSouthEast(),C=this.getSize().subtract(o),z=U(this.project(P,u),this.project(b,u)).getSize(),D=V.any3d?this.options.zoomSnap:1,Y=C.x/z.x,tt=C.y/z.y,zt=e?Math.max(Y,tt):Math.min(Y,tt);return u=this.getScaleZoom(zt,u),D&&(u=Math.round(u/(D/100))*(D/100),u=e?Math.ceil(u/D)*D:Math.floor(u/D)*D),Math.max(f,Math.min(g,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new B(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var u=o.zoom(t*o.scale(e));return isNaN(u)?1/0:u},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(Z(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(k(t),e)},layerPointToLatLng:function(t){var e=k(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(Z(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(Z(t),Z(e))},containerPointToLayerPoint:function(t){return k(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return k(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(k(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(t)))},mouseEventToContainerPoint:function(t){return jr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Rr(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&V.any3d,J(t,"leaflet-container"+(V.touch?" leaflet-touch":"")+(V.retina?" leaflet-retina":"")+(V.ielt9?" leaflet-oldie":"")+(V.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Fe(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(J(t.markerPane,"leaflet-zoom-hide"),J(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){bt(this._mapPane,new N(0,0));var u=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var f=this._zoom!==e;this._moveStart(f,o)._move(t,e)._moveEnd(f),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,u){e===void 0&&(e=this._zoom);var f=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),u?o&&o.pinch&&this.fire("zoom",o):((f||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){bt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?ft:$;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),V.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Pt(this._resizeRequest),this._resizeRequest=mt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],u,f=e==="mouseout"||e==="mouseover",g=t.target||t.srcElement,b=!1;g;){if(u=this._targets[d(g)],u&&(e==="click"||e==="preclick")&&this._draggableMoved(u)){b=!0;break}if(u&&u.listens(e,!0)&&(f&&!_n(g,t)||(o.push(u),f))||g===this._container)break;g=g.parentNode}return!o.length&&!b&&!f&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&ln(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var u=l({},t);u.type="preclick",this._fireDOMEvent(u,u.type,o)}var f=this._findEventTargets(t,e);if(o){for(var g=[],b=0;b<o.length;b++)o[b].listens(e,!0)&&g.push(o[b]);f=g.concat(f)}if(f.length){e==="contextmenu"&&Ct(t);var P=f[0],C={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var z=P.getLatLng&&(!P._radius||P._radius<=10);C.containerPoint=z?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(t),C.layerPoint=this.containerPointToLayerPoint(C.containerPoint),C.latlng=z?P.getLatLng():this.layerPointToLatLng(C.layerPoint)}for(b=0;b<f.length;b++)if(f[b].fire(e,C,!0),C.originalEvent._stopped||f[b].options.bubblingMouseEvents===!1&&O(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return _e(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var u=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(u)},_latLngBoundsToNewLayerBounds:function(t,e,o){var u=this._getNewPixelOrigin(o,e);return U([this.project(t.getSouthWest(),e)._subtract(u),this.project(t.getNorthWest(),e)._subtract(u),this.project(t.getSouthEast(),e)._subtract(u),this.project(t.getNorthEast(),e)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var u=this.project(t,e),f=this.getSize().divideBy(2),g=new B(u.subtract(f),u.add(f)),b=this._getBoundsOffset(g,o,e);return Math.abs(b.x)<=1&&Math.abs(b.y)<=1?t:this.unproject(u.add(b),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),u=new B(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(u,e))},_getBoundsOffset:function(t,e,o){var u=U(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),f=u.min.subtract(t.min),g=u.max.subtract(t.max),b=this._rebound(f.x,-g.x),P=this._rebound(f.y,-g.y);return new N(b,P)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),u=V.any3d?this.options.zoomSnap:1;return u&&(t=Math.round(t/u)*u),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=st("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=tn,u=this._proxy.style[o];de(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),u===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();de(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(e),f=this._getCenterOffset(t)._divideBy(1-1/u);return o.animate!==!0&&!this.getSize().contains(f)?!1:(mt(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,u){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,J(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rl(t,e){return new nt(t,e)}var Gt=wt.extend({options:{position:"topright"},initialize:function(t){x(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),u=t._controlCorners[o];return J(e,"leaflet-control"),o.indexOf("bottom")!==-1?u.insertBefore(e,u.firstChild):u.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),He=function(t){return new Gt(t)};nt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=st("div",e+"control-container",this._container);function u(f,g){var b=e+f+" "+e+g;t[f+g]=st("div",b,o)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)_t(this._controlCorners[t]);_t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Vr=Gt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,u){return o<u?-1:u<o?1:0}},initialize:function(t,e,o){x(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var u in t)this._addLayer(t[u],u);for(u in e)this._addLayer(e[u],u,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Gt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){J(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(J(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=st("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ve(e),dn(e);var u=this._section=st("section",t+"-list");o&&(this._map.on("click",this.collapse,this),$(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=st("a",t+"-toggle",e);f.href="#",f.title="Layers",f.setAttribute("role","button"),$(f,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){Ct(g),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=st("div",t+"-base",u),this._separator=st("div",t+"-separator",u),this._overlaysList=st("div",t+"-overlays",u),e.appendChild(u)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(h(function(u,f){return this.options.sortFunction(u.layer,f.layer,u.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gi(this._baseLayersList),gi(this._overlaysList),this._layerControlInputs=[];var t,e,o,u,f=0;for(o=0;o<this._layers.length;o++)u=this._layers[o],this._addItem(u),e=e||u.overlay,t=t||!u.overlay,f+=u.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=o,u.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),u;t.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=o):u=this._createRadioElement("leaflet-base-layers_"+d(this),o),this._layerControlInputs.push(u),u.layerId=d(t.layer),$(u,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var g=document.createElement("span");e.appendChild(g),g.appendChild(u),g.appendChild(f);var b=t.overlay?this._overlaysList:this._baseLayersList;return b.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,u=[],f=[];this._handlingClick=!0;for(var g=t.length-1;g>=0;g--)e=t[g],o=this._getLayer(e.layerId).layer,e.checked?u.push(o):e.checked||f.push(o);for(g=0;g<f.length;g++)this._map.hasLayer(f[g])&&this._map.removeLayer(f[g]);for(g=0;g<u.length;g++)this._map.hasLayer(u[g])||this._map.addLayer(u[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,u=this._map.getZoom(),f=t.length-1;f>=0;f--)e=t[f],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&u<o.options.minZoom||o.options.maxZoom!==void 0&&u>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,$(t,"click",Ct),this.expand();var e=this;setTimeout(function(){ft(t,"click",Ct),e._preventClick=!1})}}),ol=function(t,e,o){return new Vr(t,e,o)},mn=Gt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=st("div",e+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,u,f){var g=st("a",o,u);return g.innerHTML=t,g.href="#",g.title=e,g.setAttribute("role","button"),g.setAttribute("aria-label",e),Ve(g),$(g,"click",pe),$(g,"click",f,this),$(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";vt(this._zoomInButton,e),vt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(J(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(J(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mn,this.addControl(this.zoomControl))});var sl=function(t){return new mn(t)},Hr=Gt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=st("div",e),u=this.options;return this._addScales(u,e+"-line",o),t.on(u.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=st("div",e,o)),t.imperial&&(this._iScale=st("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,u,f;e>5280?(o=e/5280,u=this._getRoundNum(o),this._updateScale(this._iScale,u+" mi",u/o)):(f=this._getRoundNum(e),this._updateScale(this._iScale,f+" ft",f/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),al=function(t){return new Hr(t)},ll='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=Gt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(V.inlineSvg?ll+" ":"")+"Leaflet</a>"},initialize:function(t){x(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=st("div","leaflet-control-attribution"),Ve(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new pn().addTo(this)});var hl=function(t){return new pn(t)};Gt.Layers=Vr,Gt.Zoom=mn,Gt.Scale=Hr,Gt.Attribution=pn,He.layers=ol,He.zoom=sl,He.scale=al,He.attribution=hl;var ee=wt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ee.addTo=function(t,e){return t.addHandler(e,this),this};var ul={Events:ct},Wr=V.touch?"touchstart mousedown":"mousedown",he=Mt.extend({options:{clickTolerance:3},initialize:function(t,e,o,u){x(this,u),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||($(this._dragStartTarget,Wr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(he._dragging===this&&this.finishDrag(!0),ft(this._dragStartTarget,Wr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!en(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){he._dragging===this&&this.finishDrag();return}if(!(he._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(he._dragging=this,this._preventOutline&&ln(this._element),on(),je(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=Zr(this._element);this._startPoint=new N(e.clientX,e.clientY),this._startPos=_e(this._element),this._parentScale=hn(o);var u=t.type==="mousedown";$(document,u?"mousemove":"touchmove",this._onMove,this),$(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new N(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,Ct(t),this._moved||(this.fire("dragstart"),this._moved=!0,J(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),J(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),bt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){vt(document.body,"leaflet-dragging"),this._lastTarget&&(vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ft(document,"mousemove touchmove",this._onMove,this),ft(document,"mouseup touchend touchcancel",this._onUp,this),sn(),Ne();var e=this._moved&&this._moving;this._moving=!1,he._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Yr(t,e,o){var u,f=[1,4,2,8],g,b,P,C,z,D,Y,tt;for(g=0,D=t.length;g<D;g++)t[g]._code=ge(t[g],e);for(P=0;P<4;P++){for(Y=f[P],u=[],g=0,D=t.length,b=D-1;g<D;b=g++)C=t[g],z=t[b],C._code&Y?z._code&Y||(tt=wi(z,C,Y,e,o),tt._code=ge(tt,e),u.push(tt)):(z._code&Y&&(tt=wi(z,C,Y,e,o),tt._code=ge(tt,e),u.push(tt)),u.push(C));t=u}return t}function qr(t,e){var o,u,f,g,b,P,C,z,D;if(!t||t.length===0)throw new Error("latlngs not passed");Vt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Y=Z([0,0]),tt=F(t),zt=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());zt<1700&&(Y=gn(t));var Tt=t.length,Ht=[];for(o=0;o<Tt;o++){var Bt=Z(t[o]);Ht.push(e.project(Z([Bt.lat-Y.lat,Bt.lng-Y.lng])))}for(P=C=z=0,o=0,u=Tt-1;o<Tt;u=o++)f=Ht[o],g=Ht[u],b=f.y*g.x-g.y*f.x,C+=(f.x+g.x)*b,z+=(f.y+g.y)*b,P+=b*3;P===0?D=Ht[0]:D=[C/P,z/P];var ke=e.unproject(k(D));return Z([ke.lat+Y.lat,ke.lng+Y.lng])}function gn(t){for(var e=0,o=0,u=0,f=0;f<t.length;f++){var g=Z(t[f]);e+=g.lat,o+=g.lng,u++}return Z([e/u,o/u])}var cl={__proto__:null,clipPolygon:Yr,polygonCenter:qr,centroid:gn};function Gr(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=_l(t,o),t=dl(t,o),t}function Xr(t,e,o){return Math.sqrt(We(t,e,o,!0))}function fl(t,e,o){return We(t,e,o)}function dl(t,e){var o=t.length,u=typeof Uint8Array<"u"?Uint8Array:Array,f=new u(o);f[0]=f[o-1]=1,vn(t,f,e,0,o-1);var g,b=[];for(g=0;g<o;g++)f[g]&&b.push(t[g]);return b}function vn(t,e,o,u,f){var g=0,b,P,C;for(P=u+1;P<=f-1;P++)C=We(t[P],t[u],t[f],!0),C>g&&(b=P,g=C);g>o&&(e[b]=1,vn(t,e,o,u,b),vn(t,e,o,b,f))}function _l(t,e){for(var o=[t[0]],u=1,f=0,g=t.length;u<g;u++)ml(t[u],t[f])>e&&(o.push(t[u]),f=u);return f<g-1&&o.push(t[g-1]),o}var $r;function Kr(t,e,o,u,f){var g=u?$r:ge(t,o),b=ge(e,o),P,C,z;for($r=b;;){if(!(g|b))return[t,e];if(g&b)return!1;P=g||b,C=wi(t,e,P,o,f),z=ge(C,o),P===g?(t=C,g=z):(e=C,b=z)}}function wi(t,e,o,u,f){var g=e.x-t.x,b=e.y-t.y,P=u.min,C=u.max,z,D;return o&8?(z=t.x+g*(C.y-t.y)/b,D=C.y):o&4?(z=t.x+g*(P.y-t.y)/b,D=P.y):o&2?(z=C.x,D=t.y+b*(C.x-t.x)/g):o&1&&(z=P.x,D=t.y+b*(P.x-t.x)/g),new N(z,D,f)}function ge(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function ml(t,e){var o=e.x-t.x,u=e.y-t.y;return o*o+u*u}function We(t,e,o,u){var f=e.x,g=e.y,b=o.x-f,P=o.y-g,C=b*b+P*P,z;return C>0&&(z=((t.x-f)*b+(t.y-g)*P)/C,z>1?(f=o.x,g=o.y):z>0&&(f+=b*z,g+=P*z)),b=t.x-f,P=t.y-g,u?b*b+P*P:new N(f,g)}function Vt(t){return!A(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Jr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Vt(t)}function Qr(t,e){var o,u,f,g,b,P,C,z;if(!t||t.length===0)throw new Error("latlngs not passed");Vt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var D=Z([0,0]),Y=F(t),tt=Y.getNorthWest().distanceTo(Y.getSouthWest())*Y.getNorthEast().distanceTo(Y.getNorthWest());tt<1700&&(D=gn(t));var zt=t.length,Tt=[];for(o=0;o<zt;o++){var Ht=Z(t[o]);Tt.push(e.project(Z([Ht.lat-D.lat,Ht.lng-D.lng])))}for(o=0,u=0;o<zt-1;o++)u+=Tt[o].distanceTo(Tt[o+1])/2;if(u===0)z=Tt[0];else for(o=0,g=0;o<zt-1;o++)if(b=Tt[o],P=Tt[o+1],f=b.distanceTo(P),g+=f,g>u){C=(g-u)/f,z=[P.x-C*(P.x-b.x),P.y-C*(P.y-b.y)];break}var Bt=e.unproject(k(z));return Z([Bt.lat+D.lat,Bt.lng+D.lng])}var pl={__proto__:null,simplify:Gr,pointToSegmentDistance:Xr,closestPointOnSegment:fl,clipSegment:Kr,_getEdgeIntersection:wi,_getBitCode:ge,_sqClosestPointOnSegment:We,isFlat:Vt,_flat:Jr,polylineCenter:Qr},yn={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new B([-180,-90],[180,90])},bn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,u=t.lat*e,f=this.R_MINOR/o,g=Math.sqrt(1-f*f),b=g*Math.sin(u),P=Math.tan(Math.PI/4-u/2)/Math.pow((1-b)/(1+b),g/2);return u=-o*Math.log(Math.max(P,1e-10)),new N(t.lng*e*o,u)},unproject:function(t){for(var e=180/Math.PI,o=this.R,u=this.R_MINOR/o,f=Math.sqrt(1-u*u),g=Math.exp(-t.y/o),b=Math.PI/2-2*Math.atan(g),P=0,C=.1,z;P<15&&Math.abs(C)>1e-7;P++)z=f*Math.sin(b),z=Math.pow((1-z)/(1+z),f/2),C=Math.PI/2-2*Math.atan(g*z)-b,b+=C;return new j(b*e,t.x*e/o)}},gl={__proto__:null,LonLat:yn,Mercator:bn,SphericalMercator:Q},vl=l({},X,{code:"EPSG:3395",projection:bn,transformation:function(){var t=.5/(Math.PI*bn.R);return R(t,.5,-t,.5)}()}),to=l({},X,{code:"EPSG:4326",projection:yn,transformation:R(1/180,1,-1/180,.5)}),yl=l({},W,{projection:yn,transformation:R(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,u=e.lat-t.lat;return Math.sqrt(o*o+u*u)},infinite:!0});W.Earth=X,W.EPSG3395=vl,W.EPSG3857=It,W.EPSG900913=ve,W.EPSG4326=to,W.Simple=yl;var Xt=Mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?A(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var u in this._zoomBoundLayers){var f=this._zoomBoundLayers[u].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),e=f.maxZoom===void 0?e:Math.max(e,f.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var we=Xt.extend({initialize:function(t,e){x(this,e),this._layers={};var o,u;if(t)for(o=0,u=t.length;o<u;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,u;for(o in this._layers)u=this._layers[o],u[t]&&u[t].apply(u,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),bl=function(t,e){return new we(t,e)},ne=we.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),we.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),we.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new H;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),xl=function(t,e){return new ne(t,e)},Le=wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){x(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(u,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(t,e){var o=this.options,u=o[e+"Size"];typeof u=="number"&&(u=[u,u]);var f=k(u),g=k(e==="shadow"&&o.shadowAnchor||o.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),g&&(t.style.marginLeft=-g.x+"px",t.style.marginTop=-g.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return V.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function wl(t){return new Le(t)}var Ye=Le.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ye.imagePath!="string"&&(Ye.imagePath=this._detectIconPath()),(this.options.imagePath||Ye.imagePath)+Le.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,u,f){var g=u.exec(o);return g&&g[f]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=st("div","leaflet-default-icon-path",document.body),e=Fe(t,"background-image")||Fe(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),eo=ee.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new he(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),J(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,u=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,g=_e(e._icon),b=o.getPixelBounds(),P=o.getPixelOrigin(),C=U(b.min._subtract(P).add(f),b.max._subtract(P).subtract(f));if(!C.contains(g)){var z=k((Math.max(C.max.x,g.x)-C.max.x)/(b.max.x-C.max.x)-(Math.min(C.min.x,g.x)-C.min.x)/(b.min.x-C.min.x),(Math.max(C.max.y,g.y)-C.max.y)/(b.max.y-C.max.y)-(Math.min(C.min.y,g.y)-C.min.y)/(b.min.y-C.min.y)).multiplyBy(u);o.panBy(z,{animate:!1}),this._draggable._newPos._add(z),this._draggable._startPos._add(z),bt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=mt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Pt(this._panRequest),this._panRequest=mt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,u=_e(e._icon),f=e._map.layerPointToLatLng(u);o&&bt(o,u),e._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Li=Xt.extend({options:{icon:new Ye,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){x(this,e),this._latlng=Z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),u=!1;o!==this._icon&&(this._icon&&this._removeIcon(),u=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),J(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$(o,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0),f&&(J(f,e),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&g&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(this._icon,"focus",this._panOnFocus,this),_t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_t(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&bt(this._icon,t),this._shadow&&bt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(J(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),eo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new eo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ut(this._icon,t),this._shadow&&Ut(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?k(e.iconSize):k(0,0),u=e.iconAnchor?k(e.iconAnchor):k(0,0);t.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:o.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ll(t,e){return new Li(t,e)}var ue=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return x(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pi=ue.extend({options:{fill:!0,radius:10},initialize:function(t,e){x(this,e),this._latlng=Z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ue.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),u=[t+o,e+o];this._pxBounds=new B(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pl(t,e){return new Pi(t,e)}var xn=Pi.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=l({},o,{radius:e})),x(this,e),this._latlng=Z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ue.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,u=o.options.crs;if(u.distance===X.distance){var f=Math.PI/180,g=this._mRadius/X.R/f,b=o.project([e+g,t]),P=o.project([e-g,t]),C=b.add(P).divideBy(2),z=o.unproject(C).lat,D=Math.acos((Math.cos(g*f)-Math.sin(e*f)*Math.sin(z*f))/(Math.cos(e*f)*Math.cos(z*f)))/f;(isNaN(D)||D===0)&&(D=g/Math.cos(Math.PI/180*e)),this._point=C.subtract(o.getPixelOrigin()),this._radius=isNaN(D)?0:C.x-o.project([z,t-D]).x,this._radiusY=C.y-b.y}else{var Y=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Y).x}this._updateBounds()}});function Tl(t,e,o){return new xn(t,e,o)}var re=ue.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){x(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,u=We,f,g,b=0,P=this._parts.length;b<P;b++)for(var C=this._parts[b],z=1,D=C.length;z<D;z++){f=C[z-1],g=C[z];var Y=u(t,f,g,!0);Y<e&&(e=Y,o=u(t,f,g))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=Z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new H,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Vt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=Vt(t),u=0,f=t.length;u<f;u++)o?(e[u]=Z(t[u]),this._bounds.extend(e[u])):e[u]=this._convertLatLngs(t[u]);return e},_project:function(){var t=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new N(t,t);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var u=t[0]instanceof j,f=t.length,g,b;if(u){for(b=[],g=0;g<f;g++)b[g]=this._map.latLngToLayerPoint(t[g]),o.extend(b[g]);e.push(b)}else for(g=0;g<f;g++)this._projectLatlngs(t[g],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,u,f,g,b,P,C;for(o=0,f=0,g=this._rings.length;o<g;o++)for(C=this._rings[o],u=0,b=C.length;u<b-1;u++)P=Kr(C[u],C[u+1],t,u,!0),P&&(e[f]=e[f]||[],e[f].push(P[0]),(P[1]!==C[u+1]||u===b-2)&&(e[f].push(P[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,u=t.length;o<u;o++)t[o]=Gr(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,u,f,g,b,P,C=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,g=this._parts.length;o<g;o++)for(P=this._parts[o],u=0,b=P.length,f=b-1;u<b;f=u++)if(!(!e&&u===0)&&Xr(t,P[f],P[u])<=C)return!0;return!1}});function Cl(t,e){return new re(t,e)}re._flat=Jr;var Pe=re.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=re.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof j&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){re.prototype._setLatLngs.call(this,t),Vt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Vt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new N(e,e);if(t=new B(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,f=this._rings.length,g;u<f;u++)g=Yr(this._rings[u],t,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,u,f,g,b,P,C,z;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(g=0,C=this._parts.length;g<C;g++)for(o=this._parts[g],b=0,z=o.length,P=z-1;b<z;P=b++)u=o[b],f=o[P],u.y>t.y!=f.y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(e=!e);return e||re.prototype._containsPoint.call(this,t,!0)}});function kl(t,e){return new Pe(t,e)}var oe=ne.extend({initialize:function(t,e){x(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=A(t)?t:t.features,o,u,f;if(e){for(o=0,u=e.length;o<u;o++)f=e[o],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var g=this.options;if(g.filter&&!g.filter(t))return this;var b=Ti(t,g);return b?(b.feature=Mi(t),b.defaultOptions=b.options,this.resetStyle(b),g.onEachFeature&&g.onEachFeature(t,b),this.addLayer(b)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Ti(t,e){var o=t.type==="Feature"?t.geometry:t,u=o?o.coordinates:null,f=[],g=e&&e.pointToLayer,b=e&&e.coordsToLatLng||wn,P,C,z,D;if(!u&&!o)return null;switch(o.type){case"Point":return P=b(u),io(g,t,P,e);case"MultiPoint":for(z=0,D=u.length;z<D;z++)P=b(u[z]),f.push(io(g,t,P,e));return new ne(f);case"LineString":case"MultiLineString":return C=Ci(u,o.type==="LineString"?0:1,b),new re(C,e);case"Polygon":case"MultiPolygon":return C=Ci(u,o.type==="Polygon"?1:2,b),new Pe(C,e);case"GeometryCollection":for(z=0,D=o.geometries.length;z<D;z++){var Y=Ti({geometry:o.geometries[z],type:"Feature",properties:t.properties},e);Y&&f.push(Y)}return new ne(f);case"FeatureCollection":for(z=0,D=o.features.length;z<D;z++){var tt=Ti(o.features[z],e);tt&&f.push(tt)}return new ne(f);default:throw new Error("Invalid GeoJSON object.")}}function io(t,e,o,u){return t?t(e,o):new Li(o,u&&u.markersInheritOptions&&u)}function wn(t){return new j(t[1],t[0],t[2])}function Ci(t,e,o){for(var u=[],f=0,g=t.length,b;f<g;f++)b=e?Ci(t[f],e-1,o):(o||wn)(t[f]),u.push(b);return u}function Ln(t,e){return t=Z(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function ki(t,e,o,u){for(var f=[],g=0,b=t.length;g<b;g++)f.push(e?ki(t[g],Vt(t[g])?0:e-1,o,u):Ln(t[g],u));return!e&&o&&f.length>0&&f.push(f[0].slice()),f}function Te(t,e){return t.feature?l({},t.feature,{geometry:e}):Mi(e)}function Mi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Pn={toGeoJSON:function(t){return Te(this,{type:"Point",coordinates:Ln(this.getLatLng(),t)})}};Li.include(Pn),xn.include(Pn),Pi.include(Pn),re.include({toGeoJSON:function(t){var e=!Vt(this._latlngs),o=ki(this._latlngs,e?1:0,!1,t);return Te(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),Pe.include({toGeoJSON:function(t){var e=!Vt(this._latlngs),o=e&&!Vt(this._latlngs[0]),u=ki(this._latlngs,o?2:e?1:0,!0,t);return e||(u=[u]),Te(this,{type:(o?"Multi":"")+"Polygon",coordinates:u})}}),we.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),Te(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",u=[];return this.eachLayer(function(f){if(f.toGeoJSON){var g=f.toGeoJSON(t);if(o)u.push(g.geometry);else{var b=Mi(g);b.type==="FeatureCollection"?u.push.apply(u,b.features):u.push(b)}}}),o?Te(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function no(t,e){return new oe(t,e)}var Ml=no,Si=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=F(e),x(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(J(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&be(this._image),this},bringToBack:function(){return this._map&&xe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:st("img");if(J(e,"leaflet-image-layer"),this._zoomAnimated&&J(e,"leaflet-zoom-animated"),this.options.className&&J(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onload=h(this.fire,this,"load"),e.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;de(this._image,o,e)},_reset:function(){var t=this._image,e=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();bt(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){Ut(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Sl=function(t,e,o){return new Si(t,e,o)},ro=Si.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:st("video");if(J(e,"leaflet-image-layer"),this._zoomAnimated&&J(e,"leaflet-zoom-animated"),this.options.className&&J(e,this.options.className),e.onselectstart=p,e.onmousemove=p,e.onloadeddata=h(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),u=[],f=0;f<o.length;f++)u.push(o[f].src);this._url=o.length>0?u:[e.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var b=st("source");b.src=this._url[g],e.appendChild(b)}}});function zl(t,e,o){return new ro(t,e,o)}var oo=Si.extend({_initImage:function(){var t=this._image=this._url;J(t,"leaflet-image-layer"),this._zoomAnimated&&J(t,"leaflet-zoom-animated"),this.options.className&&J(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function El(t,e,o){return new oo(t,e,o)}var ie=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof j||A(t))?(this._latlng=Z(t),x(this,e)):(x(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ut(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ut(this._container,1),this.bringToFront(),this.options.interactive&&(J(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ut(this._container,0),this._removeTimeout=setTimeout(h(_t,void 0,this._container),200)):_t(this._container),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&be(this._container),this},bringToBack:function(){return this._map&&xe(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof ne){e=null;var o=this._source._layers;for(var u in o)if(o[u]._map){e=o[u];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=k(this.options.offset),o=this._getAnchor();this._zoomAnimated?bt(this._container,t.add(o)):e=e.add(t).add(o);var u=this._containerBottom=-e.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=u+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(t,e,o,u){var f=e;return f instanceof t||(f=new t(u).setContent(e)),o&&f.setLatLng(o),f}}),Xt.include({_initOverlay:function(t,e,o,u){var f=o;return f instanceof t?(x(f,u),f._source=this):(f=e&&!u?e:new t(u,this),f.setContent(o)),f}});var zi=ie.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ie.prototype.openOn.call(this,t)},onAdd:function(t){ie.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ue||this._source.on("preclick",me))},onRemove:function(t){ie.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ue||this._source.off("preclick",me))},getEvents:function(){var t=ie.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=st("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=st("div",t+"-content-wrapper",e);if(this._contentNode=st("div",t+"-content",o),Ve(e),dn(this._contentNode),$(e,"contextmenu",me),this._tipContainer=st("div",t+"-tip-container",e),this._tip=st("div",t+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=st("a",t+"-close-button",e);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',$(u,"click",function(f){Ct(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var u=t.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&u>f?(e.height=f+"px",J(t,g)):vt(t,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();bt(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Fe(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,u=this._containerWidth,f=new N(this._containerLeft,-o-this._containerBottom);f._add(_e(this._container));var g=t.layerPointToContainerPoint(f),b=k(this.options.autoPanPadding),P=k(this.options.autoPanPaddingTopLeft||b),C=k(this.options.autoPanPaddingBottomRight||b),z=t.getSize(),D=0,Y=0;g.x+u+C.x>z.x&&(D=g.x+u-z.x+C.x),g.x-D-P.x<0&&(D=g.x-P.x),g.y+o+C.y>z.y&&(Y=g.y+o-z.y+C.y),g.y-Y-P.y<0&&(Y=g.y-P.y),(D||Y)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([D,Y]))}},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ol=function(t,e){return new zi(t,e)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(t,e,o){return this._initOverlay(zi,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Xt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(zi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ne||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){pe(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof ue)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ei=ie.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ie.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ie.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ie.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=st("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,u=this._map,f=this._container,g=u.latLngToContainerPoint(u.getCenter()),b=u.layerPointToContainerPoint(t),P=this.options.direction,C=f.offsetWidth,z=f.offsetHeight,D=k(this.options.offset),Y=this._getAnchor();P==="top"?(e=C/2,o=z):P==="bottom"?(e=C/2,o=0):P==="center"?(e=C/2,o=z/2):P==="right"?(e=0,o=z/2):P==="left"?(e=C,o=z/2):b.x<g.x?(P="right",e=0,o=z/2):(P="left",e=C+(D.x+Y.x)*2,o=z/2),t=t.subtract(k(e,o,!0)).add(D).add(Y),vt(f,"leaflet-tooltip-right"),vt(f,"leaflet-tooltip-left"),vt(f,"leaflet-tooltip-top"),vt(f,"leaflet-tooltip-bottom"),J(f,"leaflet-tooltip-"+P),bt(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ut(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Il=function(t,e){return new Ei(t,e)};nt.include({openTooltip:function(t,e,o){return this._initOverlay(Ei,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Xt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ei,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ne||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&($(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),$(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,u;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),u=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(e)}});var so=Le.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(gi(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var u=k(o.bgPos);e.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Bl(t){return new so(t)}Le.Default=Ye;var qe=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:V.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){x(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),_t(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(be(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),u=0,f=e.length,g;u<f;u++)g=e[u].style.zIndex,e[u]!==this._container&&g&&(o=t(o,+g));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!V.ielt9){Ut(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var u in this._tiles){var f=this._tiles[u];if(!(!f.current||!f.loaded)){var g=Math.min(1,(t-f.loaded)/200);Ut(f.el,g),g<1?e=!0:(f.active?o=!0:this._onOpaqueTile(f),f.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(Pt(this._fadeFrame),this._fadeFrame=mt(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=st("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(_t(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var u=this._levels[t],f=this._map;return u||(u=this._levels[t]={},u.el=st("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=e,u.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),u.zoom=t,this._setZoomTransform(u,f.getCenter(),f.getZoom()),p(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var u=e.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)_t(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,u){var f=Math.floor(t/2),g=Math.floor(e/2),b=o-1,P=new N(+f,+g);P.z=+b;var C=this._tileCoordsToKey(P),z=this._tiles[C];return z&&z.active?(z.retain=!0,!0):(z&&z.loaded&&(z.retain=!0),b>u?this._retainParent(f,g,b,u):!1)},_retainChildren:function(t,e,o,u){for(var f=2*t;f<2*t+2;f++)for(var g=2*e;g<2*e+2;g++){var b=new N(f,g);b.z=o+1;var P=this._tileCoordsToKey(b),C=this._tiles[P];if(C&&C.active){C.retain=!0;continue}else C&&C.loaded&&(C.retain=!0);o+1<u&&this._retainChildren(f,g,o+1,u)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,u){var f=Math.round(e);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var g=this.options.updateWhenZooming&&f!==this._tileZoom;(!u||g)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var u=this._map.getZoomScale(o,t.zoom),f=t.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(e,o)).round();V.any3d?de(t.el,f,u):bt(t.el,f)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),u=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],u).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],u).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],u).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],u).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),u=e.getZoomScale(o,this._tileZoom),f=e.project(t,this._tileZoom).floor(),g=e.getSize().divideBy(u*2);return new B(f.subtract(g),f.add(g))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(u),g=f.getCenter(),b=[],P=this.options.keepBuffer,C=new B(f.getBottomLeft().subtract([P,-P]),f.getTopRight().add([P,-P]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var z in this._tiles){var D=this._tiles[z].coords;(D.z!==this._tileZoom||!C.contains(new N(D.x,D.y)))&&(this._tiles[z].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var Y=f.min.y;Y<=f.max.y;Y++)for(var tt=f.min.x;tt<=f.max.x;tt++){var zt=new N(tt,Y);if(zt.z=this._tileZoom,!!this._isValidTile(zt)){var Tt=this._tiles[this._tileCoordsToKey(zt)];Tt?Tt.current=!0:b.push(zt)}}if(b.sort(function(Bt,ke){return Bt.distanceTo(g)-ke.distanceTo(g)}),b.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ht=document.createDocumentFragment();for(tt=0;tt<b.length;tt++)this._addTile(b[tt],Ht);this._level.el.appendChild(Ht)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(t);return F(this.options.bounds).overlaps(u)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),u=t.scaleBy(o),f=u.add(o),g=e.unproject(u,t.z),b=e.unproject(f,t.z);return[g,b]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new H(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new N(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(_t(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){J(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=p,t.onmousemove=p,V.ielt9&&this.options.opacity<1&&Ut(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),u=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&mt(h(this._tileReady,this,t,null,f)),bt(f,o),this._tiles[u]={el:f,coords:t,current:!0},e.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var u=this._tileCoordsToKey(t);o=this._tiles[u],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Ut(o.el,0),Pt(this._fadeFrame),this._fadeFrame=mt(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(J(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),V.ielt9||!this._map._fadeAnimated?mt(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new N(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new B(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Al(t){return new qe(t)}var Ce=qe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=x(this,e),e.detectRetina&&V.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return $(o,"load",h(this._tileOnLoad,this,e,o)),$(o,"error",h(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:V.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return I(this._url,l(e,this.options))},_tileOnLoad:function(t,e){V.ielt9?setTimeout(h(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var u=this.options.errorTileUrl;u&&e.getAttribute("src")!==u&&(e.src=u),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,u=this.options.zoomOffset;return o&&(t=e-t),t+u},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=p,e.onerror=p,!e.complete)){e.src=S;var o=this._tiles[t].coords;_t(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",S),qe.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===S))return qe.prototype._tileReady.call(this,t,e,o)}});function ao(t,e){return new Ce(t,e)}var lo=Ce.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=l({},this.defaultWmsParams);for(var u in e)u in this.options||(o[u]=e[u]);e=x(this,e);var f=e.detectRetina&&V.retina?2:1,g=this.getTileSize();o.width=g.x*f,o.height=g.y*f,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ce.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,u=U(o.project(e[0]),o.project(e[1])),f=u.min,g=u.max,b=(this._wmsVersion>=1.3&&this._crs===to?[f.y,f.x,g.y,g.x]:[f.x,f.y,g.x,g.y]).join(","),P=Ce.prototype.getTileUrl.call(this,t);return P+E(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});function Rl(t,e){return new lo(t,e)}Ce.WMS=lo,ao.wms=Rl;var se=Xt.extend({options:{padding:.1},initialize:function(t){x(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),J(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,e),g=u.multiplyBy(-o).add(f).subtract(this._map._getNewPixelOrigin(t,e));V.any3d?de(this._container,g,o):bt(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new B(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ho=se.extend({options:{tolerance:0},getEvents:function(){var t=se.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){se.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");$(t,"mousemove",this._onMouseMove,this),$(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Pt(this._redrawRequest),delete this._ctx,_t(this._container),ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){se.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),u=V.retina?2:1;bt(e,t.min),e.width=u*o.x,e.height=u*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",V.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){se.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,u=e.prev;o?o.prev=u:this._drawLast=u,u?u.next=o:this._drawFirst=o,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],u,f;for(f=0;f<e.length;f++){if(u=Number(e[f]),isNaN(u))return;o.push(u)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||mt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)t=u.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,u,f,g,b=t._parts,P=b.length,C=this._ctx;if(P){for(C.beginPath(),o=0;o<P;o++){for(u=0,f=b[o].length;u<f;u++)g=b[o][u],C[u?"lineTo":"moveTo"](g.x,g.y);e&&C.closePath()}this._fillStroke(C,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,u=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||u)/u;f!==1&&(o.save(),o.scale(1,f)),o.beginPath(),o.arc(e.x,e.y/f,u,0,Math.PI*2,!1),f!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,u,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(u=o);this._fireEvent(u?[u]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(vt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,u,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(e)&&(u=o);u!==this._hoveredLayer&&(this._handleMouseOut(t),u&&(J(this._container,"leaflet-interactive"),this._fireEvent([u],t,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,u=e.prev;if(o)o.prev=u;else return;u?u.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,u=e.prev;if(u)u.next=o;else return;o?o.prev=u:u&&(this._drawLast=u),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function uo(t){return V.canvas?new ho(t):null}var Ge=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zl={_initContainer:function(){this._container=st("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(se.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ge("shape");J(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ge("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;_t(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,u=t.options,f=t._container;f.stroked=!!u.stroke,f.filled=!!u.fill,u.stroke?(e||(e=t._stroke=Ge("stroke")),f.appendChild(e),e.weight=u.weight+"px",e.color=u.color,e.opacity=u.opacity,u.dashArray?e.dashStyle=A(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=u.lineCap.replace("butt","flat"),e.joinstyle=u.lineJoin):e&&(f.removeChild(e),t._stroke=null),u.fill?(o||(o=t._fill=Ge("fill")),f.appendChild(o),o.color=u.fillColor||u.color,o.opacity=u.fillOpacity):o&&(f.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),u=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+u+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){be(t._container)},_bringToBack:function(t){xe(t._container)}},Oi=V.vml?Ge:Re,Xe=se.extend({_initContainer:function(){this._container=Oi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_t(this._container),ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){se.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),bt(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Oi("path");t.options.className&&J(e,t.options.className),t.options.interactive&&J(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){_t(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,mr(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),u=Math.max(Math.round(t._radiusY),1)||o,f="a"+o+","+u+" 0 1,0 ",g=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+f+o*2+",0 "+f+-o*2+",0 ";this._setPath(t,g)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){be(t._path)},_bringToBack:function(t){xe(t._path)}});V.vml&&Xe.include(Zl);function co(t){return V.svg||V.vml?new Xe(t):null}nt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&uo(t)||co(t)}});var fo=Pe.extend({initialize:function(t,e){Pe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=F(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Dl(t,e){return new fo(t,e)}Xe.create=Oi,Xe.pointsToPath=mr,oe.geometryToLayer=Ti,oe.coordsToLatLng=wn,oe.coordsToLatLngs=Ci,oe.latLngToCoords=Ln,oe.latLngsToCoords=ki,oe.getFeature=Te,oe.asFeature=Mi,nt.mergeOptions({boxZoom:!0});var _o=ee.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){$(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),je(),on(),this._startPoint=this._map.mouseEventToContainerPoint(t),$(document,{contextmenu:pe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=st("div","leaflet-zoom-box",this._container),J(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new B(this._point,this._startPoint),o=e.getSize();bt(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(_t(this._box),vt(this._container,"leaflet-crosshair")),Ne(),sn(),ft(document,{contextmenu:pe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var e=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",_o),nt.mergeOptions({doubleClickZoom:!0});var mo=ee.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),u=e.options.zoomDelta,f=t.originalEvent.shiftKey?o-u:o+u;e.options.doubleClickZoom==="center"?e.setZoom(f):e.setZoomAround(t.containerPoint,f)}});nt.addInitHook("addHandler","doubleClickZoom",mo),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var po=ee.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new he(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}J(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vt(this._map._container,"leaflet-grab"),vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=F(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,u=this._draggable._newPos.x,f=(u-e+o)%t+e-o,g=(u+e+o)%t-e-o,b=Math.abs(f+o)<Math.abs(g+o)?f:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(t){var e=this._map,o=e.options,u=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),u)e.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,b=o.easeLinearity,P=f.multiplyBy(b/g),C=P.distanceTo([0,0]),z=Math.min(o.inertiaMaxSpeed,C),D=P.multiplyBy(z/C),Y=z/(o.inertiaDeceleration*b),tt=D.multiplyBy(-Y/2).round();!tt.x&&!tt.y?e.fire("moveend"):(tt=e._limitOffset(tt,e.options.maxBounds),mt(function(){e.panBy(tt,{duration:Y,easeLinearity:b,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",po),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var go=ee.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),$(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,u=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(u,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,u,f;for(u=0,f=o.left.length;u<f;u++)e[o.left[u]]=[-1*t,0];for(u=0,f=o.right.length;u<f;u++)e[o.right[u]]=[t,0];for(u=0,f=o.down.length;u<f;u++)e[o.down[u]]=[0,t];for(u=0,f=o.up.length;u<f;u++)e[o.up[u]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,u,f;for(u=0,f=o.zoomIn.length;u<f;u++)e[o.zoomIn[u]]=t;for(u=0,f=o.zoomOut.length;u<f;u++)e[o.zoomOut[u]]=-t},_addHooks:function(){$(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,u;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(u=this._panKeys[e],t.shiftKey&&(u=k(u).multiplyBy(3)),o.options.maxBounds&&(u=o._limitOffset(k(u),o.options.maxBounds)),o.options.worldCopyJump){var f=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(u)));o.panTo(f)}else o.panBy(u)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;pe(t)}}});nt.addInitHook("addHandler","keyboard",go),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vo=ee.extend({addHooks:function(){$(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Nr(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var u=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),u),pe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,g=o?Math.ceil(f/o)*o:f,b=t._limitZoom(e+(this._delta>0?g:-g))-e;this._delta=0,this._startTime=null,b&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+b):t.setZoomAround(this._lastMousePos,e+b))}});nt.addInitHook("addHandler","scrollWheelZoom",vo);var Fl=600;nt.mergeOptions({tapHold:V.touchNative&&V.safari&&V.mobile,tapTolerance:15});var yo=ee.extend({addHooks:function(){$(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new N(e.clientX,e.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&($(document,"touchend",Ct),$(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Fl),$(document,"touchend touchcancel contextmenu",this._cancel,this),$(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ft(document,"touchend",Ct),ft(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new N(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});nt.addInitHook("addHandler","tapHold",yo),nt.mergeOptions({touchZoom:V.touch,bounceAtZoomLimits:!0});var bo=ee.extend({addHooks:function(){J(this._map._container,"leaflet-touch-zoom"),$(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),u=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(u)._divideBy(2))),this._startDist=o.distanceTo(u),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),$(document,"touchmove",this._onTouchMove,this),$(document,"touchend touchcancel",this._onTouchEnd,this),Ct(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),u=e.mouseEventToContainerPoint(t.touches[1]),f=o.distanceTo(u)/this._startDist;if(this._zoom=e.getScaleZoom(f,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&f<1||this._zoom>e.getMaxZoom()&&f>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var g=o._add(u)._divideBy(2)._subtract(this._centerPoint);if(f===1&&g.x===0&&g.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),Pt(this._animRequest);var b=h(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=mt(b,this,!0),Ct(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Pt(this._animRequest),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",bo),nt.BoxZoom=_o,nt.DoubleClickZoom=mo,nt.Drag=po,nt.Keyboard=go,nt.ScrollWheelZoom=vo,nt.TapHold=yo,nt.TouchZoom=bo,n.Bounds=B,n.Browser=V,n.CRS=W,n.Canvas=ho,n.Circle=xn,n.CircleMarker=Pi,n.Class=wt,n.Control=Gt,n.DivIcon=so,n.DivOverlay=ie,n.DomEvent=nl,n.DomUtil=el,n.Draggable=he,n.Evented=Mt,n.FeatureGroup=ne,n.GeoJSON=oe,n.GridLayer=qe,n.Handler=ee,n.Icon=Le,n.ImageOverlay=Si,n.LatLng=j,n.LatLngBounds=H,n.Layer=Xt,n.LayerGroup=we,n.LineUtil=pl,n.Map=nt,n.Marker=Li,n.Mixin=ul,n.Path=ue,n.Point=N,n.PolyUtil=cl,n.Polygon=Pe,n.Polyline=re,n.Popup=zi,n.PosAnimation=Ur,n.Projection=gl,n.Rectangle=fo,n.Renderer=se,n.SVG=Xe,n.SVGOverlay=oo,n.TileLayer=Ce,n.Tooltip=Ei,n.Transformation=gt,n.Util=fe,n.VideoOverlay=ro,n.bind=h,n.bounds=U,n.canvas=uo,n.circle=Tl,n.circleMarker=Pl,n.control=He,n.divIcon=Bl,n.extend=l,n.featureGroup=xl,n.geoJSON=no,n.geoJson=Ml,n.gridLayer=Al,n.icon=wl,n.imageOverlay=Sl,n.latLng=Z,n.latLngBounds=F,n.layerGroup=bl,n.map=rl,n.marker=Ll,n.point=k,n.polygon=kl,n.polyline=Cl,n.popup=Ol,n.rectangle=Dl,n.setOptions=x,n.stamp=d,n.svg=co,n.svgOverlay=El,n.tileLayer=ao,n.tooltip=Il,n.transformation=R,n.version=a,n.videoOverlay=zl;var jl=window.L;n.noConflict=function(){return window.L=jl,this},window.L=n})})(jn,jn.exports);var Ae=jn.exports;const Wi=ss(Ae);function Yi(r,i,n){return Object.freeze({instance:r,context:i,container:n})}function fi(r,i){return i==null?function(a,l){const s=q.useRef();return s.current||(s.current=r(a,l)),s}:function(a,l){const s=q.useRef();s.current||(s.current=r(a,l));const h=q.useRef(a),{instance:c}=s.current;return q.useEffect(function(){h.current!==a&&(i(c,a,h.current),h.current=a)},[c,a,l]),s}}function as(r,i){q.useEffect(function(){return(i.layerContainer??i.map).addLayer(r.instance),function(){var s;(s=i.layerContainer)==null||s.removeLayer(r.instance),i.map.removeLayer(r.instance)}},[i,r])}function ls(r){return function(n){const a=ci(),l=r(Hi(n,a),a);return ts(a.map,n.attribution),er(l.current,n.eventHandlers),as(l.current,a),l}}function nh(r,i){const n=q.useRef();q.useEffect(function(){if(i.pathOptions!==n.current){const l=i.pathOptions??{};r.instance.setStyle(l),n.current=l}},[r,i])}function rh(r){return function(n){const a=ci(),l=r(Hi(n,a),a);return er(l.current,n.eventHandlers),as(l.current,a),nh(l.current,n),l}}function oh(r){function i(l,s){return Yi(r(l),s)}const n=fi(i),a=eh(n);return rs(a)}function sh(r,i){const n=fi(r,i),a=ls(n);return ns(a)}function ah(r,i){const n=fi(r),a=ih(n,i);return th(a)}function lh(r,i){const n=fi(r,i),a=rh(n);return ns(a)}function hs(r,i){const n=fi(r,i),a=ls(n);return rs(a)}function us(r,i,n){const{opacity:a,zIndex:l}=i;a!=null&&a!==n.opacity&&r.setOpacity(a),l!=null&&l!==n.zIndex&&r.setZIndex(l)}function qi(){return ci().map}function hh(r,i){const n=qi();return q.useEffect(function(){return n.on(r,i),function(){n.off(r,i)}},[n,r,i]),n}function uh(r){const i=qi();return q.useEffect(function(){return i.on(r),function(){i.off(r)}},[i,r]),i}const ch=oh(function(i){return new Ae.Control.Attribution(i)});function Nn(){return Nn=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Nn.apply(this,arguments)}function fh({bounds:r,boundsOptions:i,center:n,children:a,className:l,id:s,placeholder:h,style:c,whenReady:d,zoom:_,...m},p){const[v]=q.useState({className:l,id:s,style:c}),[y,w]=q.useState(null);q.useImperativeHandle(p,()=>(y==null?void 0:y.map)??null,[y]);const x=q.useCallback(M=>{if(M!==null&&y===null){const I=new Ae.Map(M,m);n!=null&&_!=null?I.setView(n,_):r!=null&&I.fitBounds(r,i),d!=null&&I.whenReady(d),w(Jl(I))}},[]);q.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const E=y?Ot.default.createElement(is,{value:y},a):h??null;return Ot.default.createElement("div",Nn({},v,{ref:x}),E)}const dh=q.forwardRef(fh),_h=sh(function({position:i,...n},a){const l=new Ae.Marker(i,n);return Yi(l,Ql(a,{overlayContainer:l}))},function(i,n,a){n.position!==a.position&&i.setLatLng(n.position),n.icon!=null&&n.icon!==a.icon&&i.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==a.zIndexOffset&&i.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==a.opacity&&i.setOpacity(n.opacity),i.dragging!=null&&n.draggable!==a.draggable&&(n.draggable===!0?i.dragging.enable():i.dragging.disable())}),mh=ah(function(i,n){const a=new Ae.Popup(i,n.overlayContainer);return Yi(a,n)},function(i,n,{position:a},l){q.useEffect(function(){const{instance:h}=i;function c(_){_.popup===h&&(h.update(),l(!0))}function d(_){_.popup===h&&l(!1)}return n.map.on({popupopen:c,popupclose:d}),n.overlayContainer==null?(a!=null&&h.setLatLng(a),h.openOn(n.map)):n.overlayContainer.bindPopup(h),function(){var m;n.map.off({popupopen:c,popupclose:d}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(h)}},[i,n,l,a])}),ph=hs(function({url:i,...n},a){const l=new Ae.TileLayer(i,Hi(n,a));return Yi(l,a)},function(i,n,a){us(i,n,a);const{url:l}=n;l!=null&&l!==a.url&&i.setUrl(l)});var Un={exports:{}},Bi={exports:{}},lt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po;function gh(){if(Po)return lt;Po=1;var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,_=r?Symbol.for("react.concurrent_mode"):60111,m=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,w=r?Symbol.for("react.lazy"):60116,x=r?Symbol.for("react.block"):60121,E=r?Symbol.for("react.fundamental"):60117,M=r?Symbol.for("react.responder"):60118,I=r?Symbol.for("react.scope"):60119;function A(S){if(typeof S=="object"&&S!==null){var ot=S.$$typeof;switch(ot){case i:switch(S=S.type,S){case d:case _:case a:case s:case l:case p:return S;default:switch(S=S&&S.$$typeof,S){case c:case m:case w:case y:case h:return S;default:return ot}}case n:return ot}}}function O(S){return A(S)===_}return lt.AsyncMode=d,lt.ConcurrentMode=_,lt.ContextConsumer=c,lt.ContextProvider=h,lt.Element=i,lt.ForwardRef=m,lt.Fragment=a,lt.Lazy=w,lt.Memo=y,lt.Portal=n,lt.Profiler=s,lt.StrictMode=l,lt.Suspense=p,lt.isAsyncMode=function(S){return O(S)||A(S)===d},lt.isConcurrentMode=O,lt.isContextConsumer=function(S){return A(S)===c},lt.isContextProvider=function(S){return A(S)===h},lt.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===i},lt.isForwardRef=function(S){return A(S)===m},lt.isFragment=function(S){return A(S)===a},lt.isLazy=function(S){return A(S)===w},lt.isMemo=function(S){return A(S)===y},lt.isPortal=function(S){return A(S)===n},lt.isProfiler=function(S){return A(S)===s},lt.isStrictMode=function(S){return A(S)===l},lt.isSuspense=function(S){return A(S)===p},lt.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===a||S===_||S===s||S===l||S===p||S===v||typeof S=="object"&&S!==null&&(S.$$typeof===w||S.$$typeof===y||S.$$typeof===h||S.$$typeof===c||S.$$typeof===m||S.$$typeof===E||S.$$typeof===M||S.$$typeof===I||S.$$typeof===x)},lt.typeOf=A,lt}var ht={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To;function vh(){return To||(To=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,_=r?Symbol.for("react.concurrent_mode"):60111,m=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,w=r?Symbol.for("react.lazy"):60116,x=r?Symbol.for("react.block"):60121,E=r?Symbol.for("react.fundamental"):60117,M=r?Symbol.for("react.responder"):60118,I=r?Symbol.for("react.scope"):60119;function A(R){return typeof R=="string"||typeof R=="function"||R===a||R===_||R===s||R===l||R===p||R===v||typeof R=="object"&&R!==null&&(R.$$typeof===w||R.$$typeof===y||R.$$typeof===h||R.$$typeof===c||R.$$typeof===m||R.$$typeof===E||R.$$typeof===M||R.$$typeof===I||R.$$typeof===x)}function O(R){if(typeof R=="object"&&R!==null){var It=R.$$typeof;switch(It){case i:var ve=R.type;switch(ve){case d:case _:case a:case s:case l:case p:return ve;default:var Re=ve&&ve.$$typeof;switch(Re){case c:case m:case w:case y:case h:return Re;default:return It}}case n:return It}}}var S=d,ot=_,G=c,et=h,yt=i,dt=m,mt=a,Pt=w,fe=y,wt=n,Nt=s,ct=l,Mt=p,N=!1;function le(R){return N||(N=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),k(R)||O(R)===d}function k(R){return O(R)===_}function B(R){return O(R)===c}function U(R){return O(R)===h}function H(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function F(R){return O(R)===m}function j(R){return O(R)===a}function Z(R){return O(R)===w}function W(R){return O(R)===y}function X(R){return O(R)===n}function it(R){return O(R)===s}function Q(R){return O(R)===l}function gt(R){return O(R)===p}ht.AsyncMode=S,ht.ConcurrentMode=ot,ht.ContextConsumer=G,ht.ContextProvider=et,ht.Element=yt,ht.ForwardRef=dt,ht.Fragment=mt,ht.Lazy=Pt,ht.Memo=fe,ht.Portal=wt,ht.Profiler=Nt,ht.StrictMode=ct,ht.Suspense=Mt,ht.isAsyncMode=le,ht.isConcurrentMode=k,ht.isContextConsumer=B,ht.isContextProvider=U,ht.isElement=H,ht.isForwardRef=F,ht.isFragment=j,ht.isLazy=Z,ht.isMemo=W,ht.isPortal=X,ht.isProfiler=it,ht.isStrictMode=Q,ht.isSuspense=gt,ht.isValidElementType=A,ht.typeOf=O}()),ht}var Co;function cs(){return Co||(Co=1,process.env.NODE_ENV==="production"?Bi.exports=gh():Bi.exports=vh()),Bi.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Cn,ko;function yh(){if(ko)return Cn;ko=1;var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function l(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var h={},c=0;c<10;c++)h["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(h).map(function(m){return h[m]});if(d.join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(m){_[m]=m}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Cn=l()?Object.assign:function(s,h){for(var c,d=a(s),_,m=1;m<arguments.length;m++){c=Object(arguments[m]);for(var p in c)i.call(c,p)&&(d[p]=c[p]);if(r){_=r(c);for(var v=0;v<_.length;v++)n.call(c,_[v])&&(d[_[v]]=c[_[v]])}}return d},Cn}var kn,Mo;function ir(){if(Mo)return kn;Mo=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return kn=r,kn}var Mn,So;function fs(){return So||(So=1,Mn=Function.call.bind(Object.prototype.hasOwnProperty)),Mn}var Sn,zo;function bh(){if(zo)return Sn;zo=1;var r=function(){};if(process.env.NODE_ENV!=="production"){var i=ir(),n={},a=fs();r=function(s){var h="Warning: "+s;typeof console<"u"&&console.error(h);try{throw new Error(h)}catch{}}}function l(s,h,c,d,_){if(process.env.NODE_ENV!=="production"){for(var m in s)if(a(s,m)){var p;try{if(typeof s[m]!="function"){var v=Error((d||"React class")+": "+c+" type `"+m+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[m]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw v.name="Invariant Violation",v}p=s[m](h,m,d,c,null,i)}catch(w){p=w}if(p&&!(p instanceof Error)&&r((d||"React class")+": type specification of "+c+" `"+m+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof p+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),p instanceof Error&&!(p.message in n)){n[p.message]=!0;var y=_?_():"";r("Failed "+c+" type: "+p.message+(y??""))}}}}return l.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(n={})},Sn=l,Sn}var zn,Eo;function xh(){if(Eo)return zn;Eo=1;var r=cs(),i=yh(),n=ir(),a=fs(),l=bh(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(c){var d="Warning: "+c;typeof console<"u"&&console.error(d);try{throw new Error(d)}catch{}});function h(){return null}return zn=function(c,d){var _=typeof Symbol=="function"&&Symbol.iterator,m="@@iterator";function p(k){var B=k&&(_&&k[_]||k[m]);if(typeof B=="function")return B}var v="<<anonymous>>",y={array:M("array"),bigint:M("bigint"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:I(),arrayOf:A,element:O(),elementType:S(),instanceOf:ot,node:dt(),objectOf:et,oneOf:G,oneOfType:yt,shape:Pt,exact:fe};function w(k,B){return k===B?k!==0||1/k===1/B:k!==k&&B!==B}function x(k,B){this.message=k,this.data=B&&typeof B=="object"?B:{},this.stack=""}x.prototype=Error.prototype;function E(k){if(process.env.NODE_ENV!=="production")var B={},U=0;function H(j,Z,W,X,it,Q,gt){if(X=X||v,Q=Q||W,gt!==n){if(d){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var It=X+":"+W;!B[It]&&U<3&&(s("You are manually calling a React.PropTypes validation function for the `"+Q+"` prop on `"+X+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),B[It]=!0,U++)}}return Z[W]==null?j?Z[W]===null?new x("The "+it+" `"+Q+"` is marked as required "+("in `"+X+"`, but its value is `null`.")):new x("The "+it+" `"+Q+"` is marked as required in "+("`"+X+"`, but its value is `undefined`.")):null:k(Z,W,X,it,Q)}var F=H.bind(null,!1);return F.isRequired=H.bind(null,!0),F}function M(k){function B(U,H,F,j,Z,W){var X=U[H],it=ct(X);if(it!==k){var Q=Mt(X);return new x("Invalid "+j+" `"+Z+"` of type "+("`"+Q+"` supplied to `"+F+"`, expected ")+("`"+k+"`."),{expectedType:k})}return null}return E(B)}function I(){return E(h)}function A(k){function B(U,H,F,j,Z){if(typeof k!="function")return new x("Property `"+Z+"` of component `"+F+"` has invalid PropType notation inside arrayOf.");var W=U[H];if(!Array.isArray(W)){var X=ct(W);return new x("Invalid "+j+" `"+Z+"` of type "+("`"+X+"` supplied to `"+F+"`, expected an array."))}for(var it=0;it<W.length;it++){var Q=k(W,it,F,j,Z+"["+it+"]",n);if(Q instanceof Error)return Q}return null}return E(B)}function O(){function k(B,U,H,F,j){var Z=B[U];if(!c(Z)){var W=ct(Z);return new x("Invalid "+F+" `"+j+"` of type "+("`"+W+"` supplied to `"+H+"`, expected a single ReactElement."))}return null}return E(k)}function S(){function k(B,U,H,F,j){var Z=B[U];if(!r.isValidElementType(Z)){var W=ct(Z);return new x("Invalid "+F+" `"+j+"` of type "+("`"+W+"` supplied to `"+H+"`, expected a single ReactElement type."))}return null}return E(k)}function ot(k){function B(U,H,F,j,Z){if(!(U[H]instanceof k)){var W=k.name||v,X=le(U[H]);return new x("Invalid "+j+" `"+Z+"` of type "+("`"+X+"` supplied to `"+F+"`, expected ")+("instance of `"+W+"`."))}return null}return E(B)}function G(k){if(!Array.isArray(k))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),h;function B(U,H,F,j,Z){for(var W=U[H],X=0;X<k.length;X++)if(w(W,k[X]))return null;var it=JSON.stringify(k,function(gt,R){var It=Mt(R);return It==="symbol"?String(R):R});return new x("Invalid "+j+" `"+Z+"` of value `"+String(W)+"` "+("supplied to `"+F+"`, expected one of "+it+"."))}return E(B)}function et(k){function B(U,H,F,j,Z){if(typeof k!="function")return new x("Property `"+Z+"` of component `"+F+"` has invalid PropType notation inside objectOf.");var W=U[H],X=ct(W);if(X!=="object")return new x("Invalid "+j+" `"+Z+"` of type "+("`"+X+"` supplied to `"+F+"`, expected an object."));for(var it in W)if(a(W,it)){var Q=k(W,it,F,j,Z+"."+it,n);if(Q instanceof Error)return Q}return null}return E(B)}function yt(k){if(!Array.isArray(k))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),h;for(var B=0;B<k.length;B++){var U=k[B];if(typeof U!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+N(U)+" at index "+B+"."),h}function H(F,j,Z,W,X){for(var it=[],Q=0;Q<k.length;Q++){var gt=k[Q],R=gt(F,j,Z,W,X,n);if(R==null)return null;R.data&&a(R.data,"expectedType")&&it.push(R.data.expectedType)}var It=it.length>0?", expected one of type ["+it.join(", ")+"]":"";return new x("Invalid "+W+" `"+X+"` supplied to "+("`"+Z+"`"+It+"."))}return E(H)}function dt(){function k(B,U,H,F,j){return wt(B[U])?null:new x("Invalid "+F+" `"+j+"` supplied to "+("`"+H+"`, expected a ReactNode."))}return E(k)}function mt(k,B,U,H,F){return new x((k||"React class")+": "+B+" type `"+U+"."+H+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+F+"`.")}function Pt(k){function B(U,H,F,j,Z){var W=U[H],X=ct(W);if(X!=="object")return new x("Invalid "+j+" `"+Z+"` of type `"+X+"` "+("supplied to `"+F+"`, expected `object`."));for(var it in k){var Q=k[it];if(typeof Q!="function")return mt(F,j,Z,it,Mt(Q));var gt=Q(W,it,F,j,Z+"."+it,n);if(gt)return gt}return null}return E(B)}function fe(k){function B(U,H,F,j,Z){var W=U[H],X=ct(W);if(X!=="object")return new x("Invalid "+j+" `"+Z+"` of type `"+X+"` "+("supplied to `"+F+"`, expected `object`."));var it=i({},U[H],k);for(var Q in it){var gt=k[Q];if(a(k,Q)&&typeof gt!="function")return mt(F,j,Z,Q,Mt(gt));if(!gt)return new x("Invalid "+j+" `"+Z+"` key `"+Q+"` supplied to `"+F+"`.\nBad object: "+JSON.stringify(U[H],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(k),null,"  "));var R=gt(W,Q,F,j,Z+"."+Q,n);if(R)return R}return null}return E(B)}function wt(k){switch(typeof k){case"number":case"string":case"undefined":return!0;case"boolean":return!k;case"object":if(Array.isArray(k))return k.every(wt);if(k===null||c(k))return!0;var B=p(k);if(B){var U=B.call(k),H;if(B!==k.entries){for(;!(H=U.next()).done;)if(!wt(H.value))return!1}else for(;!(H=U.next()).done;){var F=H.value;if(F&&!wt(F[1]))return!1}}else return!1;return!0;default:return!1}}function Nt(k,B){return k==="symbol"?!0:B?B["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&B instanceof Symbol:!1}function ct(k){var B=typeof k;return Array.isArray(k)?"array":k instanceof RegExp?"object":Nt(B,k)?"symbol":B}function Mt(k){if(typeof k>"u"||k===null)return""+k;var B=ct(k);if(B==="object"){if(k instanceof Date)return"date";if(k instanceof RegExp)return"regexp"}return B}function N(k){var B=Mt(k);switch(B){case"array":case"object":return"an "+B;case"boolean":case"date":case"regexp":return"a "+B;default:return B}}function le(k){return!k.constructor||!k.constructor.name?v:k.constructor.name}return y.checkPropTypes=l,y.resetWarningCache=l.resetWarningCache,y.PropTypes=y,y},zn}var En,Oo;function wh(){if(Oo)return En;Oo=1;var r=ir();function i(){}function n(){}return n.resetWarningCache=i,En=function(){function a(h,c,d,_,m,p){if(p!==r){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}a.isRequired=a;function l(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:i};return s.PropTypes=s,s},En}if(process.env.NODE_ENV!=="production"){var Lh=cs(),Ph=!0;Un.exports=xh()(Lh.isElement,Ph)}else Un.exports=wh()();var Th=Un.exports;const rt=ss(Th),Vn=r=>r&&typeof r=="object"&&!Array.isArray(r),Be=(r,...i)=>{if(!i.length)return r;const n={...r};return i.forEach(a=>{Vn(a)&&Object.keys(a).forEach(l=>{Vn(a[l])?n[l]?n[l]=Be(n[l],a[l]):n[l]={...a[l]}:n[l]=a[l]})}),n},nr=r=>{let i={};return r.forEach(n=>{i=Be(i,n)}),i},Ch=ui.default(Jt.Box)`
  // translate to re-align with leaflet div
  transform: translateX(-35%);
  &:hover {
    transform: translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,kh=ui.default(Jt.Text)`
  // multiplier of font-size, for tighter alignment
  line-height: 1rem;
`,rr=({cluster:r,kind:i="default",size:n="medium",...a})=>{var _,m,p,v,y,w,x,E,M,I,A,O,S;const l=Ot.default.useContext(St.ThemeContext),s=nr([(p=(m=(_=l==null?void 0:l.map)==null?void 0:_.cluster)==null?void 0:m.size)==null?void 0:p.medium,(w=(y=(v=l==null?void 0:l.map)==null?void 0:v.cluster)==null?void 0:y.size)==null?void 0:w[n],(E=(x=l==null?void 0:l.map)==null?void 0:x.cluster)==null?void 0:E.default,(I=(M=l==null?void 0:l.map)==null?void 0:M.cluster)==null?void 0:I[i]]),h=r.getChildCount(),c=(S=(O=(A=l==null?void 0:l.map)==null?void 0:A.cluster)==null?void 0:O[i])==null?void 0:S.icon,d=h;return ut.jsxs(Ch,{...s==null?void 0:s.container,...a,children:[c,ut.jsx(kh,{...s==null?void 0:s.label,children:d})]})};rr.propTypes={cluster:rt.object,kind:rt.string,size:rt.string};var ri=function(i){return i===void 0&&(i=""),parseFloat(i.match(/\d+(\.\d+)?/),10)};function Mh(r){var i,n=q.useContext(St.ThemeContext),a=r.size,l={};if(n!=null&&(i=n.icon)!=null&&i.disableScaleDown){var s=ri(n.icon.size[a]||a);s<24&&(l.vectorEffect="non-scaling-stroke")}return l}var Io=function(i,n){return(i-n)/2+"px"};function Sh(r){var i,n,a,l=r.height,s=r.size,h=s===void 0?"medium":s,c=r.width,d=q.useContext(St.ThemeContext),_=ri((d==null||(i=d.icon)==null||(i=i.size)==null?void 0:i[h])||h),m="";if(l&&d!=null&&(n=d.text)!=null&&(n=n[l])!=null&&n.height){var p=ri(d.text[l].height);if(p>_){var v=Io(p,_);m+="padding-top: "+v+"; padding-bottom: "+v+";"}}if(c&&d!=null&&(a=d.text)!=null&&(a=a[c])!=null&&a.height){var y=ri(d.text[c].height);if(y>_){var w=Io(y,_);m+="padding-left: "+w+"; padding-right: "+w+";"}}return m}var zh={global:{colors:{icon:"#666666"}},icon:{size:{small:"12px",medium:"24px",large:"48px",xlarge:"96px"}}},Eh={theme:zh},Oh=["a11yTitle","color","size","theme"];function Hn(){return Hn=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Hn.apply(this,arguments)}function Ih(r,i){if(r==null)return{};var n={},a=Object.keys(r),l,s;for(s=0;s<a.length;s++)l=a[s],!(i.indexOf(l)>=0)&&(n[l]=r[l]);return n}var Bh=function r(i,n,a){var l=n.global&&n.global.colors[i]!==void 0?n.global.colors[i]:i,s=l;return l&&(n.dark&&l.dark!==void 0?s=l.dark:!n.dark&&l.light!==void 0&&(s=l.light)),s&&n.global&&n.global.colors[s]!==void 0&&(s=r(s,n)),s},Bo=function(i,n,a,l){return St.css(["",":",";"],i,Bh(n,a))},Ah=St.css([""," "," g{fill:inherit;stroke:inherit;}*:not([stroke]){&[fill='none']{stroke-width:0;}}*[stroke*='#'],*[STROKE*='#']{stroke:inherit;fill:none;}*[fill-rule],*[FILL-RULE],*[fill*='#'],*[FILL*='#']{fill:inherit;stroke:none;}"],function(r){return Bo("fill",r.color||r.theme.global.colors.icon,r.theme)},function(r){return Bo("stroke",r.color||r.theme.global.colors.icon,r.theme)}),ds=q.forwardRef(function(r,i){var n=r.a11yTitle;r.color,r.size,r.theme;var a=Ih(r,Oh);return Ot.default.createElement("svg",Hn({ref:i,"aria-label":n},a))});ds.displayName="Icon";var di=ui.default(ds).withConfig({shouldForwardProp:function(i){return!["height","width"].includes(i)}}).withConfig({displayName:"StyledIcon",componentId:"sc-ofa7kd-0"})(["display:inline-block;flex:0 0 auto;"," "," "," ",""],function(r){var i,n=r.size,a=n===void 0?"medium":n,l=r.theme,s=r.viewBox,h=(s||"0 0 24 24").split(" "),c=h[2],d=h[3],_=c/d,m=l.icon.size[a]||a,p=ri(m),v=((i=m.match(/[a-z]+$/))==null?void 0:i[0])||"px";return c<d?`
      width: `+p+v+`;
      height: `+p/_+v+`;
    `:d<c?`
      width: `+p*_+v+`;
      height: `+p+v+`;
    `:`
      width: `+p+v+`;
      height: `+p+v+`;
    `},function(r){var i=r.color;return i!=="plain"&&Ah},function(r){return(r.height||r.width)&&Sh(r)},function(r){var i=r.theme;return i&&i.icon.extend});di.defaultProps={};Object.setPrototypeOf(di.defaultProps,Eh);function Ui(){return Ui=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Ui.apply(this,arguments)}var _s=q.forwardRef(function(r,i){var n=Mh(r);return Ot.default.createElement(di,Ui({ref:i,viewBox:"0 0 24 24",a11yTitle:"Add"},r),Ot.default.createElement("path",Ui({fill:"none",stroke:"#000",strokeWidth:"2",d:"M12 22V2M2 12h20"},n)))});_s.displayName="Add";function Wn(){return Wn=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Wn.apply(this,arguments)}var ms=q.forwardRef(function(r,i){return Ot.default.createElement(di,Wn({ref:i,viewBox:"0 0 24 24",a11yTitle:"Globe"},r),Ot.default.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M2 8s3.5 1 5 2 .564 2.42 1 3c.436.58 2-1 2 2s3 1 3 4 2.5 2.5 3 1 2.233-3.134 2-5c-.233-1.866-1-3-3-3s-3.5-.5-4-2 3-2 2-5 0-4 0-4m10 11c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11z"}))});ms.displayName="Globe";function Yn(){return Yn=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Yn.apply(this,arguments)}var ps=q.forwardRef(function(r,i){return Ot.default.createElement(di,Yn({ref:i,viewBox:"0 0 24 24",a11yTitle:"Subtract"},r),Ot.default.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M2 12h20"}))});ps.displayName="Subtract";const gs=({locations:r})=>{const i=Wi.latLngBounds();return r.features?r.features.forEach(n=>{var a,l;i.extend([(a=n.geometry)==null?void 0:a.coordinates[0],(l=n.geometry)==null?void 0:l.coordinates[1]])}):Array.isArray(r[0])?r.forEach(n=>{i.extend([n==null?void 0:n[0],n==null?void 0:n[1]])}):r.forEach(n=>{i.extend([n==null?void 0:n.lat,n==null?void 0:n.lng])}),i},Rh=1.5,vs=({locations:r})=>{const i=qi(),n=r&&gs({locations:r}),[a,l]=Ot.default.useState(!1);return q.useEffect(()=>{n&&!a&&(JSON.stringify(n._northEast)===JSON.stringify(n._southWest)||i.flyToBounds(n,{duration:Rh}))},[n,i,a]),q.useEffect(()=>{l(!0)},[]),ut.jsx(Jt.Box,{className:"leaflet-bottom leaflet-right",children:ut.jsx(Jt.Box,{className:"leaflet-control",children:ut.jsxs(Jt.Box,{elevation:"large",round:"medium",background:"background",children:[ut.jsx(Jt.Button,{a11yTitle:"Zoom in",icon:ut.jsx(_s,{}),onClick:s=>{s.preventDefault(),i.zoomIn()}}),ut.jsx(Jt.Button,{a11yTitle:"Zoom out",icon:ut.jsx(ps,{}),onClick:s=>{s.preventDefault(),i.zoomOut()}}),ut.jsx(Jt.Box,{border:{color:"border-weak",side:"top"},children:n&&ut.jsx(Jt.Button,{a11yTitle:"Zoom to data",icon:ut.jsx(ms,{}),onClick:s=>{s.preventDefault(),i.flyToBounds(n,{duration:1.5})}})})]})})})};vs.propTypes={locations:rt.oneOfType([rt.arrayOf(rt.oneOfType([rt.arrayOf(rt.number),rt.shape({lat:rt.number,lng:rt.number})])),rt.object])};const ys={default:{container:{align:"center",justify:"center",background:"background-front",border:{color:"border",size:"small"},elevation:"medium",flex:!1,round:"full"}}},Zh=Be(ys,{default:{container:{height:{min:"25px",max:"25px"},width:{min:"25px",max:"25px"}}}}),bs={pin:{...Zh},cluster:{...ys,size:{small:{container:{height:{min:"36px",max:"36px"},width:{min:"36px",max:"36px"}},label:{size:"small"}},medium:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"48px",max:"48px"},width:{min:"48px",max:"48px"}},label:{color:"text-strong",size:"medium",weight:500}},large:{container:{direction:"row-reverse",gap:"xxsmall",height:{min:"54px",max:"54px"},width:{min:"54px",max:"54px"}},label:{size:"medium"}}}},popup:{background:"background-front",border:{color:"border-weak",size:"xsmall"},gap:"xsmall",margin:"none",pad:"small",round:"xsmall"},tiles:{}};function K(r,i){this.x=r,this.y=i}K.prototype={clone(){return new K(this.x,this.y)},add(r){return this.clone()._add(r)},sub(r){return this.clone()._sub(r)},multByPoint(r){return this.clone()._multByPoint(r)},divByPoint(r){return this.clone()._divByPoint(r)},mult(r){return this.clone()._mult(r)},div(r){return this.clone()._div(r)},rotate(r){return this.clone()._rotate(r)},rotateAround(r,i){return this.clone()._rotateAround(r,i)},matMult(r){return this.clone()._matMult(r)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(r){return this.x===r.x&&this.y===r.y},dist(r){return Math.sqrt(this.distSqr(r))},distSqr(r){const i=r.x-this.x,n=r.y-this.y;return i*i+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith(r){return this.angleWithSep(r.x,r.y)},angleWithSep(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult(r){const i=r[0]*this.x+r[1]*this.y,n=r[2]*this.x+r[3]*this.y;return this.x=i,this.y=n,this},_add(r){return this.x+=r.x,this.y+=r.y,this},_sub(r){return this.x-=r.x,this.y-=r.y,this},_mult(r){return this.x*=r,this.y*=r,this},_div(r){return this.x/=r,this.y/=r,this},_multByPoint(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint(r){return this.x/=r.x,this.y/=r.y,this},_unit(){return this._div(this.mag()),this},_perp(){const r=this.y;return this.y=this.x,this.x=-r,this},_rotate(r){const i=Math.cos(r),n=Math.sin(r),a=i*this.x-n*this.y,l=n*this.x+i*this.y;return this.x=a,this.y=l,this},_rotateAround(r,i){const n=Math.cos(r),a=Math.sin(r),l=i.x+n*(this.x-i.x)-a*(this.y-i.y),s=i.y+a*(this.x-i.x)+n*(this.y-i.y);return this.x=l,this.y=s,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:K};K.convert=function(r){if(r instanceof K)return r;if(Array.isArray(r))return new K(+r[0],+r[1]);if(r.x!==void 0&&r.y!==void 0)return new K(+r.x,+r.y);throw new Error("Expected [x, y] or {x, y} point format")};function Oe(r,i,n){return Math.min(Math.max(r,n),i)}class Dh extends Error{constructor(i){super(`Failed to parse color: "${i}"`)}}var ei=Dh;function Ao(r){if(typeof r!="string")throw new ei(r);if(r.trim().toLowerCase()==="transparent")return[0,0,0,0];let i=r.trim();i=Yh.test(r)?Nh(r):r;const n=Uh.exec(i);if(n){const h=Array.from(n).slice(1);return[...h.slice(0,3).map(c=>parseInt(li(c,2),16)),parseInt(li(h[3]||"f",2),16)/255]}const a=Vh.exec(i);if(a){const h=Array.from(a).slice(1);return[...h.slice(0,3).map(c=>parseInt(c,16)),parseInt(h[3]||"ff",16)/255]}const l=Hh.exec(i);if(l){const h=Array.from(l).slice(1);return[...h.slice(0,3).map(c=>parseInt(c,10)),parseFloat(h[3]||"1")]}const s=Wh.exec(i);if(s){const[h,c,d,_]=Array.from(s).slice(1).map(parseFloat);if(Oe(0,100,c)!==c)throw new ei(r);if(Oe(0,100,d)!==d)throw new ei(r);return[...qh(h,c,d),Number.isNaN(_)?1:_]}throw new ei(r)}function Fh(r){let i=5381,n=r.length;for(;n;)i=i*33^r.charCodeAt(--n);return(i>>>0)%2341}const Ro=r=>parseInt(r.replace(/_/g,""),36),jh="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((r,i)=>{const n=Ro(i.substring(0,3)),a=Ro(i.substring(3)).toString(16);let l="";for(let s=0;s<6-a.length;s++)l+="0";return r[n]=`${l}${a}`,r},{});function Nh(r){const i=r.toLowerCase().trim(),n=jh[Fh(i)];if(!n)throw new ei(r);return`#${n}`}const li=(r,i)=>Array.from(Array(i)).map(()=>r).join(""),Uh=new RegExp(`^#${li("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Vh=new RegExp(`^#${li("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Hh=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${li(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Wh=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Yh=/^[a-z]+$/i,Zo=r=>Math.round(r*255),qh=(r,i,n)=>{let a=n/100;if(i===0)return[a,a,a].map(Zo);const l=(r%360+360)%360/60,s=(1-Math.abs(2*a-1))*(i/100),h=s*(1-Math.abs(l%2-1));let c=0,d=0,_=0;l>=0&&l<1?(c=s,d=h):l>=1&&l<2?(c=h,d=s):l>=2&&l<3?(d=s,_=h):l>=3&&l<4?(d=h,_=s):l>=4&&l<5?(c=h,_=s):l>=5&&l<6&&(c=s,_=h);const m=a-s/2,p=c+m,v=d+m,y=_+m;return[p,v,y].map(Zo)};function Gh(r,i,n,a){return`rgba(${Oe(0,255,r).toFixed()}, ${Oe(0,255,i).toFixed()}, ${Oe(0,255,n).toFixed()}, ${parseFloat(Oe(0,1,a).toFixed(3))})`}function On(r,i,n){const a=(S,ot)=>ot===3?S:S/255,[l,s,h,c]=Ao(r).map(a),[d,_,m,p]=Ao(i).map(a),v=p-c,y=n*2-1,x=((y*v===-1?y:y+v/(1+y*v))+1)/2,E=1-x,M=(l*E+d*x)*255,I=(s*E+_*x)*255,A=(h*E+m*x)*255,O=p*n+c*(1-n);return Gh(M,I,A,O)}class xs{constructor(i,n,a,l,s){this.properties={},this.extent=a,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=l,this._values=s,i.readFields(Xh,this,n)}loadGeometry(){const i=this._pbf;i.pos=this._geometry;const n=i.readVarint()+i.pos,a=[];let l,s=1,h=0,c=0,d=0;for(;i.pos<n;){if(h<=0){const _=i.readVarint();s=_&7,h=_>>3}if(h--,s===1||s===2)c+=i.readSVarint(),d+=i.readSVarint(),s===1&&(l&&a.push(l),l=[]),l&&l.push(new K(c,d));else if(s===7)l&&l.push(l[0].clone());else throw new Error(`unknown command ${s}`)}return l&&a.push(l),a}bbox(){const i=this._pbf;i.pos=this._geometry;const n=i.readVarint()+i.pos;let a=1,l=0,s=0,h=0,c=1/0,d=-1/0,_=1/0,m=-1/0;for(;i.pos<n;){if(l<=0){const p=i.readVarint();a=p&7,l=p>>3}if(l--,a===1||a===2)s+=i.readSVarint(),h+=i.readSVarint(),s<c&&(c=s),s>d&&(d=s),h<_&&(_=h),h>m&&(m=h);else if(a!==7)throw new Error(`unknown command ${a}`)}return[c,_,d,m]}toGeoJSON(i,n,a){const l=this.extent*Math.pow(2,a),s=this.extent*i,h=this.extent*n,c=this.loadGeometry();function d(v){return[(v.x+s)*360/l-180,360/Math.PI*Math.atan(Math.exp((1-(v.y+h)*2/l)*Math.PI))-90]}function _(v){return v.map(d)}let m;if(this.type===1){const v=[];for(const w of c)v.push(w[0]);const y=_(v);m=v.length===1?{type:"Point",coordinates:y[0]}:{type:"MultiPoint",coordinates:y}}else if(this.type===2){const v=c.map(_);m=v.length===1?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v}}else if(this.type===3){const v=Kh(c),y=[];for(const w of v)y.push(w.map(_));m=y.length===1?{type:"Polygon",coordinates:y[0]}:{type:"MultiPolygon",coordinates:y}}else throw new Error("unknown feature type");const p={type:"Feature",geometry:m,properties:this.properties};return this.id!=null&&(p.id=this.id),p}}xs.types=["Unknown","Point","LineString","Polygon"];function Xh(r,i,n){r===1?i.id=n.readVarint():r===2?$h(n,i):r===3?i.type=n.readVarint():r===4&&(i._geometry=n.pos)}function $h(r,i){const n=r.readVarint()+r.pos;for(;r.pos<n;){const a=i._keys[r.readVarint()],l=i._values[r.readVarint()];i.properties[a]=l}}function Kh(r){const i=r.length;if(i<=1)return[r];const n=[];let a,l;for(let s=0;s<i;s++){const h=Jh(r[s]);h!==0&&(l===void 0&&(l=h<0),l===h<0?(a&&n.push(a),a=[r[s]]):a&&a.push(r[s]))}return a&&n.push(a),n}function Jh(r){let i=0;for(let n=0,a=r.length,l=a-1,s,h;n<a;l=n++)s=r[n],h=r[l],i+=(h.x-s.x)*(s.y+h.y);return i}class Qh{constructor(i,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(tu,this,n),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];const n=this._pbf.readVarint()+this._pbf.pos;return new xs(this._pbf,n,this.extent,this._keys,this._values)}}function tu(r,i,n){r===15?i.version=n.readVarint():r===1?i.name=n.readString():r===5?i.extent=n.readVarint():r===2?i._features.push(n.pos):r===3?i._keys.push(n.readString()):r===4&&i._values.push(eu(n))}function eu(r){let i=null;const n=r.readVarint()+r.pos;for(;r.pos<n;){const a=r.readVarint()>>3;i=a===1?r.readString():a===2?r.readFloat():a===3?r.readDouble():a===4?r.readVarint64():a===5?r.readVarint():a===6?r.readSVarint():a===7?r.readBoolean():null}return i}class iu{constructor(i,n){this.layers=i.readFields(nu,{},n)}}function nu(r,i,n){if(r===3){const a=new Qh(n,n.readVarint()+n.pos);a.length&&(i[a.name]=a)}}const qn=65536*65536,Do=1/qn,ru=12,Fo=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),In=0,Ai=1,$e=2,Ri=5;class ou{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,n,a=this.length){for(;this.pos<a;){const l=this.readVarint(),s=l>>3,h=this.pos;this.type=l&7,i(s,n,this),this.pos===h&&this.skip(l)}return n}readMessage(i,n){return this.readFields(i,n,this.readVarint()+this.pos)}readFixed32(){const i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){const i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*qn;return this.pos+=8,i}readSFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*qn;return this.pos+=8,i}readFloat(){const i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){const i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){const n=this.buf;let a,l;return l=n[this.pos++],a=l&127,l<128||(l=n[this.pos++],a|=(l&127)<<7,l<128)||(l=n[this.pos++],a|=(l&127)<<14,l<128)||(l=n[this.pos++],a|=(l&127)<<21,l<128)?a:(l=n[this.pos],a|=(l&15)<<28,su(a,i,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const i=this.readVarint();return i%2===1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){const i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=ru&&Fo?Fo.decode(this.buf.subarray(n,i)):yu(this.buf,n,i)}readBytes(){const i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n}readPackedVarint(i=[],n){const a=this.readPackedEnd();for(;this.pos<a;)i.push(this.readVarint(n));return i}readPackedSVarint(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readFloat());return i}readPackedDouble(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){const n=this.readPackedEnd();for(;this.pos<n;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===$e?this.readVarint()+this.pos:this.pos+1}skip(i){const n=i&7;if(n===In)for(;this.buf[this.pos++]>127;);else if(n===$e)this.pos=this.readVarint()+this.pos;else if(n===Ri)this.pos+=4;else if(n===Ai)this.pos+=8;else throw new Error(`Unimplemented type: ${n}`)}writeTag(i,n){this.writeVarint(i<<3|n)}realloc(i){let n=this.length||16;for(;n<this.pos+i;)n*=2;if(n!==this.length){const a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.dataView=new DataView(a.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*Do),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,i&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*Do),!0),this.pos+=8}writeVarint(i){if(i=+i||0,i>268435455||i<0){au(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))}writeSVarint(i){this.writeVarint(i<0?-i*2-1:i*2)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(i.length*4),this.pos++;const n=this.pos;this.pos=bu(this.buf,i,this.pos);const a=this.pos-n;a>=128&&jo(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){const n=i.length;this.writeVarint(n),this.realloc(n);for(let a=0;a<n;a++)this.buf[this.pos++]=i[a]}writeRawMessage(i,n){this.pos++;const a=this.pos;i(n,this);const l=this.pos-a;l>=128&&jo(a,l,this),this.pos=a-1,this.writeVarint(l),this.pos+=l}writeMessage(i,n,a){this.writeTag(i,$e),this.writeRawMessage(n,a)}writePackedVarint(i,n){n.length&&this.writeMessage(i,uu,n)}writePackedSVarint(i,n){n.length&&this.writeMessage(i,cu,n)}writePackedBoolean(i,n){n.length&&this.writeMessage(i,_u,n)}writePackedFloat(i,n){n.length&&this.writeMessage(i,fu,n)}writePackedDouble(i,n){n.length&&this.writeMessage(i,du,n)}writePackedFixed32(i,n){n.length&&this.writeMessage(i,mu,n)}writePackedSFixed32(i,n){n.length&&this.writeMessage(i,pu,n)}writePackedFixed64(i,n){n.length&&this.writeMessage(i,gu,n)}writePackedSFixed64(i,n){n.length&&this.writeMessage(i,vu,n)}writeBytesField(i,n){this.writeTag(i,$e),this.writeBytes(n)}writeFixed32Field(i,n){this.writeTag(i,Ri),this.writeFixed32(n)}writeSFixed32Field(i,n){this.writeTag(i,Ri),this.writeSFixed32(n)}writeFixed64Field(i,n){this.writeTag(i,Ai),this.writeFixed64(n)}writeSFixed64Field(i,n){this.writeTag(i,Ai),this.writeSFixed64(n)}writeVarintField(i,n){this.writeTag(i,In),this.writeVarint(n)}writeSVarintField(i,n){this.writeTag(i,In),this.writeSVarint(n)}writeStringField(i,n){this.writeTag(i,$e),this.writeString(n)}writeFloatField(i,n){this.writeTag(i,Ri),this.writeFloat(n)}writeDoubleField(i,n){this.writeTag(i,Ai),this.writeDouble(n)}writeBooleanField(i,n){this.writeVarintField(i,+n)}}function su(r,i,n){const a=n.buf;let l,s;if(s=a[n.pos++],l=(s&112)>>4,s<128||(s=a[n.pos++],l|=(s&127)<<3,s<128)||(s=a[n.pos++],l|=(s&127)<<10,s<128)||(s=a[n.pos++],l|=(s&127)<<17,s<128)||(s=a[n.pos++],l|=(s&127)<<24,s<128)||(s=a[n.pos++],l|=(s&1)<<31,s<128))return Me(r,l,i);throw new Error("Expected varint not more than 10 bytes")}function Me(r,i,n){return n?i*4294967296+(r>>>0):(i>>>0)*4294967296+(r>>>0)}function au(r,i){let n,a;if(r>=0?(n=r%4294967296|0,a=r/4294967296|0):(n=~(-r%4294967296),a=~(-r/4294967296),n^4294967295?n=n+1|0:(n=0,a=a+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),lu(n,a,i),hu(a,i)}function lu(r,i,n){n.buf[n.pos++]=r&127|128,r>>>=7,n.buf[n.pos++]=r&127|128,r>>>=7,n.buf[n.pos++]=r&127|128,r>>>=7,n.buf[n.pos++]=r&127|128,r>>>=7,n.buf[n.pos]=r&127}function hu(r,i){const n=(r&7)<<4;i.buf[i.pos++]|=n|((r>>>=3)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127|((r>>>=7)?128:0),r&&(i.buf[i.pos++]=r&127)))))}function jo(r,i,n){const a=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(Math.LN2*7));n.realloc(a);for(let l=n.pos-1;l>=r;l--)n.buf[l+a]=n.buf[l]}function uu(r,i){for(let n=0;n<r.length;n++)i.writeVarint(r[n])}function cu(r,i){for(let n=0;n<r.length;n++)i.writeSVarint(r[n])}function fu(r,i){for(let n=0;n<r.length;n++)i.writeFloat(r[n])}function du(r,i){for(let n=0;n<r.length;n++)i.writeDouble(r[n])}function _u(r,i){for(let n=0;n<r.length;n++)i.writeBoolean(r[n])}function mu(r,i){for(let n=0;n<r.length;n++)i.writeFixed32(r[n])}function pu(r,i){for(let n=0;n<r.length;n++)i.writeSFixed32(r[n])}function gu(r,i){for(let n=0;n<r.length;n++)i.writeFixed64(r[n])}function vu(r,i){for(let n=0;n<r.length;n++)i.writeSFixed64(r[n])}function yu(r,i,n){let a="",l=i;for(;l<n;){const s=r[l];let h=null,c=s>239?4:s>223?3:s>191?2:1;if(l+c>n)break;let d,_,m;c===1?s<128&&(h=s):c===2?(d=r[l+1],(d&192)===128&&(h=(s&31)<<6|d&63,h<=127&&(h=null))):c===3?(d=r[l+1],_=r[l+2],(d&192)===128&&(_&192)===128&&(h=(s&15)<<12|(d&63)<<6|_&63,(h<=2047||h>=55296&&h<=57343)&&(h=null))):c===4&&(d=r[l+1],_=r[l+2],m=r[l+3],(d&192)===128&&(_&192)===128&&(m&192)===128&&(h=(s&15)<<18|(d&63)<<12|(_&63)<<6|m&63,(h<=65535||h>=1114112)&&(h=null))),h===null?(h=65533,c=1):h>65535&&(h-=65536,a+=String.fromCharCode(h>>>10&1023|55296),h=56320|h&1023),a+=String.fromCharCode(h),l+=c}return a}function bu(r,i,n){for(let a=0,l,s;a<i.length;a++){if(l=i.charCodeAt(a),l>55295&&l<57344)if(s)if(l<56320){r[n++]=239,r[n++]=191,r[n++]=189,s=l;continue}else l=s-55296<<10|l-56320|65536,s=null;else{l>56319||a+1===i.length?(r[n++]=239,r[n++]=191,r[n++]=189):s=l;continue}else s&&(r[n++]=239,r[n++]=191,r[n++]=189,s=null);l<128?r[n++]=l:(l<2048?r[n++]=l>>6|192:(l<65536?r[n++]=l>>12|224:(r[n++]=l>>18|240,r[n++]=l>>12&63|128),r[n++]=l>>6&63|128),r[n++]=l&63|128)}return n}var Ie=Math.pow,Et=(r,i,n)=>new Promise((a,l)=>{var s=d=>{try{c(n.next(d))}catch(_){l(_)}},h=d=>{try{c(n.throw(d))}catch(_){l(_)}},c=d=>d.done?a(d.value):Promise.resolve(d.value).then(s,h);c((n=n.apply(r,i)).next())}),Ft=Uint8Array,oi=Uint16Array,xu=Int32Array,ws=new Ft([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ls=new Ft([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wu=new Ft([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ps=function(r,i){for(var n=new oi(31),a=0;a<31;++a)n[a]=i+=1<<r[a-1];for(var l=new xu(n[30]),a=1;a<30;++a)for(var s=n[a];s<n[a+1];++s)l[s]=s-n[a]<<5|a;return{b:n,r:l}},Ts=Ps(ws,2),Cs=Ts.b,Lu=Ts.r;Cs[28]=258,Lu[258]=28;var Pu=Ps(Ls,0),Tu=Pu.b,ks=new oi(32768);for(at=0;at<32768;++at)ae=(at&43690)>>1|(at&21845)<<1,ae=(ae&52428)>>2|(ae&13107)<<2,ae=(ae&61680)>>4|(ae&3855)<<4,ks[at]=((ae&65280)>>8|(ae&255)<<8)>>1;var ae,at,si=function(r,i,n){for(var a=r.length,l=0,s=new oi(i);l<a;++l)r[l]&&++s[r[l]-1];var h=new oi(i);for(l=1;l<i;++l)h[l]=h[l-1]+s[l-1]<<1;var c;{c=new oi(1<<i);var d=15-i;for(l=0;l<a;++l)if(r[l])for(var _=l<<4|r[l],m=i-r[l],p=h[r[l]-1]++<<m,v=p|(1<<m)-1;p<=v;++p)c[ks[p]>>d]=_}return c},_i=new Ft(288);for(at=0;at<144;++at)_i[at]=8;var at;for(at=144;at<256;++at)_i[at]=9;var at;for(at=256;at<280;++at)_i[at]=7;var at;for(at=280;at<288;++at)_i[at]=8;var at,Ms=new Ft(32);for(at=0;at<32;++at)Ms[at]=5;var at,Cu=si(_i,9),ku=si(Ms,5),Bn=function(r){for(var i=r[0],n=1;n<r.length;++n)r[n]>i&&(i=r[n]);return i},$t=function(r,i,n){var a=i/8|0;return(r[a]|r[a+1]<<8)>>(i&7)&n},An=function(r,i){var n=i/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(i&7)},Mu=function(r){return(r+7)/8|0},Su=function(r,i,n){(n==null||n>r.length)&&(n=r.length);var a=new Ft(n-i);return a.set(r.subarray(i,n)),a},zu=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zt=function(r,i,n){var a=new Error(i||zu[r]);if(a.code=r,Error.captureStackTrace&&Error.captureStackTrace(a,Zt),!n)throw a;return a},or=function(r,i,n,a){var l=r.length,s=0;if(!l||i.f&&!i.l)return n||new Ft(0);var h=!n||i.i!=2,c=i.i;n||(n=new Ft(l*3));var d=function(Q){var gt=n.length;if(Q>gt){var R=new Ft(Math.max(gt*2,Q));R.set(n),n=R}},_=i.f||0,m=i.p||0,p=i.b||0,v=i.l,y=i.d,w=i.m,x=i.n,E=l*8;do{if(!v){_=$t(r,m,1);var M=$t(r,m+1,3);if(m+=3,M)if(M==1)v=Cu,y=ku,w=9,x=5;else if(M==2){var S=$t(r,m,31)+257,ot=$t(r,m+10,15)+4,G=S+$t(r,m+5,31)+1;m+=14;for(var et=new Ft(G),yt=new Ft(19),dt=0;dt<ot;++dt)yt[wu[dt]]=$t(r,m+dt*3,7);m+=ot*3;for(var mt=Bn(yt),Pt=(1<<mt)-1,fe=si(yt,mt),dt=0;dt<G;){var wt=fe[$t(r,m,Pt)];m+=wt&15;var I=wt>>4;if(I<16)et[dt++]=I;else{var Nt=0,ct=0;for(I==16?(ct=3+$t(r,m,3),m+=2,Nt=et[dt-1]):I==17?(ct=3+$t(r,m,7),m+=3):I==18&&(ct=11+$t(r,m,127),m+=7);ct--;)et[dt++]=Nt}}var Mt=et.subarray(0,S),N=et.subarray(S);w=Bn(Mt),x=Bn(N),v=si(Mt,w),y=si(N,x)}else Zt(1);else{var I=Mu(m)+4,A=r[I-4]|r[I-3]<<8,O=I+A;if(O>l){c&&Zt(0);break}h&&d(p+A),n.set(r.subarray(I,O),p),i.b=p+=A,i.p=m=O*8,i.f=_;continue}if(m>E){c&&Zt(0);break}}h&&d(p+131072);for(var le=(1<<w)-1,k=(1<<x)-1,B=m;;B=m){var Nt=v[An(r,m)&le],U=Nt>>4;if(m+=Nt&15,m>E){c&&Zt(0);break}if(Nt||Zt(2),U<256)n[p++]=U;else if(U==256){B=m,v=null;break}else{var H=U-254;if(U>264){var dt=U-257,F=ws[dt];H=$t(r,m,(1<<F)-1)+Cs[dt],m+=F}var j=y[An(r,m)&k],Z=j>>4;j||Zt(3),m+=j&15;var N=Tu[Z];if(Z>3){var F=Ls[Z];N+=An(r,m)&(1<<F)-1,m+=F}if(m>E){c&&Zt(0);break}h&&d(p+131072);var W=p+H;if(p<N){var X=s-N,it=Math.min(N,W);for(X+p<0&&Zt(3);p<it;++p)n[p]=a[X+p]}for(;p<W;p+=4)n[p]=n[p-N],n[p+1]=n[p+1-N],n[p+2]=n[p+2-N],n[p+3]=n[p+3-N];p=W}}i.l=v,i.p=B,i.b=p,i.f=_,v&&(_=1,i.m=w,i.d=y,i.n=x)}while(!_);return p==n.length?n:Su(n,0,p)},Eu=new Ft(0),Ou=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&Zt(6,"invalid gzip data");var i=r[3],n=10;i&4&&(n+=(r[10]|r[11]<<8)+2);for(var a=(i>>3&1)+(i>>4&1);a>0;a-=!r[n++]);return n+(i&2)},Iu=function(r){var i=r.length;return(r[i-4]|r[i-3]<<8|r[i-2]<<16|r[i-1]<<24)>>>0},Bu=function(r,i){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Zt(6,"invalid zlib data"),(r[1]>>5&1)==+!i&&Zt(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function Au(r,i){return or(r,{i:2},i,i)}function Ru(r,i){var n=Ou(r);return n+8>r.length&&Zt(6,"invalid gzip data"),or(r.subarray(n,-8),{i:2},new Ft(Iu(r)),i)}function Zu(r,i){return or(r.subarray(Bu(r,i),-4),{i:2},i,i)}function Gn(r,i){return r[0]==31&&r[1]==139&&r[2]==8?Ru(r,i):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?Au(r,i):Zu(r,i)}var Du=typeof TextDecoder<"u"&&new TextDecoder,Fu=0;try{Du.decode(Eu,{stream:!0}),Fu=1}catch{}var Ss=(r,i)=>r*Ie(2,i),Ke=(r,i)=>Math.floor(r/Ie(2,i)),Vi=(r,i)=>Ss(r.getUint16(i+1,!0),8)+r.getUint8(i),zs=(r,i)=>Ss(r.getUint32(i+2,!0),16)+r.getUint16(i,!0),ju=(r,i,n,a,l)=>{if(r!==a.getUint8(l))return r-a.getUint8(l);const s=Vi(a,l+1);if(i!==s)return i-s;const h=Vi(a,l+4);return n!==h?n-h:0},Nu=(r,i,n,a)=>{const l=Es(r,i|128,n,a);return l?{z:i,x:n,y:a,offset:l[0],length:l[1],isDir:!0}:null},No=(r,i,n,a)=>{const l=Es(r,i,n,a);return l?{z:i,x:n,y:a,offset:l[0],length:l[1],isDir:!1}:null},Es=(r,i,n,a)=>{let l=0,s=r.byteLength/17-1;for(;l<=s;){const h=s+l>>1,c=ju(i,n,a,r,h*17);if(c>0)l=h+1;else if(c<0)s=h-1;else return[zs(r,h*17+7),r.getUint32(h*17+13,!0)]}return null},Uu=(r,i)=>r.isDir&&!i.isDir?1:!r.isDir&&i.isDir?-1:r.z!==i.z?r.z-i.z:r.x!==i.x?r.x-i.x:r.y-i.y,Os=(r,i)=>{const n=r.getUint8(i*17);return{z:n&127,x:Vi(r,i*17+1),y:Vi(r,i*17+4),offset:zs(r,i*17+7),length:r.getUint32(i*17+13,!0),isDir:n>>7===1}},Uo=r=>{const i=[],n=new DataView(r);for(let a=0;a<n.byteLength/17;a++)i.push(Os(n,a));return Vu(i)},Vu=r=>{r.sort(Uu);const i=new ArrayBuffer(17*r.length),n=new Uint8Array(i);for(let a=0;a<r.length;a++){const l=r[a];let s=l.z;l.isDir&&(s=s|128),n[a*17]=s,n[a*17+1]=l.x&255,n[a*17+2]=l.x>>8&255,n[a*17+3]=l.x>>16&255,n[a*17+4]=l.y&255,n[a*17+5]=l.y>>8&255,n[a*17+6]=l.y>>16&255,n[a*17+7]=l.offset&255,n[a*17+8]=Ke(l.offset,8)&255,n[a*17+9]=Ke(l.offset,16)&255,n[a*17+10]=Ke(l.offset,24)&255,n[a*17+11]=Ke(l.offset,32)&255,n[a*17+12]=Ke(l.offset,48)&255,n[a*17+13]=l.length&255,n[a*17+14]=l.length>>8&255,n[a*17+15]=l.length>>16&255,n[a*17+16]=l.length>>24&255}return i},Hu=(r,i)=>{if(r.byteLength<17)return null;const n=r.byteLength/17,a=Os(r,n-1);if(a.isDir){const l=a.z,s=i.z-l,h=Math.trunc(i.x/(1<<s)),c=Math.trunc(i.y/(1<<s));return{z:l,x:h,y:c}}return null};function Wu(r){return Et(this,null,function*(){const i=yield r.getBytes(0,512e3),n=new DataView(i.data),a=n.getUint32(4,!0),l=n.getUint16(8,!0),s=new TextDecoder("utf-8"),h=JSON.parse(s.decode(new DataView(i.data,10,a)));let c=0;h.compression==="gzip"&&(c=2);let d=0;"minzoom"in h&&(d=+h.minzoom);let _=0;"maxzoom"in h&&(_=+h.maxzoom);let m=0,p=0,v=0,y=-180,w=-85,x=180,E=85;if(h.bounds){const I=h.bounds.split(",");y=+I[0],w=+I[1],x=+I[2],E=+I[3]}if(h.center){const I=h.center.split(",");m=+I[0],p=+I[1],v=+I[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+a,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:a,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:d,maxZoom:_,minLon:y,minLat:w,maxLon:x,maxLat:E,centerZoom:v,centerLon:m,centerLat:p,etag:i.etag}})}function Yu(r,i,n,a,l,s,h){return Et(this,null,function*(){let c=yield n.getArrayBuffer(i,r.rootDirectoryOffset,r.rootDirectoryLength,r);r.specVersion===1&&(c=Uo(c));const d=No(new DataView(c),a,l,s);if(d){let p=(yield i.getBytes(d.offset,d.length,h)).data;const v=new DataView(p);return v.getUint8(0)===31&&v.getUint8(1)===139&&(p=Gn(new Uint8Array(p))),{data:p}}const _=Hu(new DataView(c),{z:a,x:l,y:s});if(_){const m=Nu(new DataView(c),_.z,_.x,_.y);if(m){let p=yield n.getArrayBuffer(i,m.offset,m.length,r);r.specVersion===1&&(p=Uo(p));const v=No(new DataView(p),a,l,s);if(v){let w=(yield i.getBytes(v.offset,v.length,h)).data;const x=new DataView(w);return x.getUint8(0)===31&&x.getUint8(1)===139&&(w=Gn(new Uint8Array(w))),{data:w}}}}})}var Is={getHeader:Wu,getZxy:Yu};function Se(r,i){return(i>>>0)*4294967296+(r>>>0)}function qu(r,i){const n=i.buf;let a=n[i.pos++],l=(a&112)>>4;if(a<128||(a=n[i.pos++],l|=(a&127)<<3,a<128)||(a=n[i.pos++],l|=(a&127)<<10,a<128)||(a=n[i.pos++],l|=(a&127)<<17,a<128)||(a=n[i.pos++],l|=(a&127)<<24,a<128)||(a=n[i.pos++],l|=(a&1)<<31,a<128))return Se(r,l);throw new Error("Expected varint not more than 10 bytes")}function Je(r){const i=r.buf;let n=i[r.pos++],a=n&127;return n<128||(n=i[r.pos++],a|=(n&127)<<7,n<128)||(n=i[r.pos++],a|=(n&127)<<14,n<128)||(n=i[r.pos++],a|=(n&127)<<21,n<128)?a:(n=i[r.pos],a|=(n&15)<<28,qu(a,r))}function Gu(r,i,n,a){if(a===0){n===1&&(i[0]=r-1-i[0],i[1]=r-1-i[1]);const l=i[0];i[0]=i[1],i[1]=l}}var Xu=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function $u(r,i,n){if(r>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(i>Ie(2,r)-1||n>Ie(2,r)-1)throw Error("tile x/y outside zoom level bounds");const a=Xu[r],l=Ie(2,r);let s=0,h=0,c=0;const d=[i,n];let _=l/2;for(;_>0;)s=(d[0]&_)>0?1:0,h=(d[1]&_)>0?1:0,c+=_*_*(3*s^h),Gu(_,d,s,h),_=_/2;return a+c}function Bs(r,i){return Et(this,null,function*(){if(i===1||i===0)return r;if(i===2){if(typeof globalThis.DecompressionStream>"u")return Gn(new Uint8Array(r));const n=new Response(r).body;if(!n)throw Error("Failed to read response stream");const a=n.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw Error("Compression method not supported")})}var Ku=127;function Ju(r,i){let n=0,a=r.length-1;for(;n<=a;){const l=a+n>>1,s=i-r[l].tileId;if(s>0)n=l+1;else if(s<0)a=l-1;else return r[l]}return a>=0&&(r[a].runLength===0||i-r[a].tileId<r[a].runLength)?r[a]:null}var Qu=class{constructor(r,i=new Headers){this.url=r,this.customHeaders=i,this.mustReload=!1}getKey(){return this.url}setHeaders(r){this.customHeaders=r}getBytes(r,i,n,a){return Et(this,null,function*(){let l,s;n?s=n:(l=new AbortController,s=l.signal);const h=new Headers(this.customHeaders);h.set("range",`bytes=${r}-${r+i-1}`);let c;this.mustReload&&(c="reload");let d=yield fetch(this.url,{signal:s,cache:c,headers:h});if(r===0&&d.status===416){const v=d.headers.get("Content-Range");if(!v||!v.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const y=+v.substr(8);d=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${y-1}`}})}let _=d.headers.get("Etag");if(_!=null&&_.startsWith("W/")&&(_=null),d.status===416||a&&_&&_!==a)throw this.mustReload=!0,new Xn(`Server returned non-matching ETag ${a} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(d.status>=300)throw Error(`Bad response code: ${d.status}`);const m=d.headers.get("Content-Length");if(d.status===200&&(!m||+m>i))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield d.arrayBuffer(),etag:_||void 0,cacheControl:d.headers.get("Cache-Control")||void 0,expires:d.headers.get("Expires")||void 0}})}};function Kt(r,i){const n=r.getUint32(i+4,!0),a=r.getUint32(i+0,!0);return n*Ie(2,32)+a}function tc(r,i){const n=new DataView(r),a=n.getUint8(7);if(a>3)throw Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:Kt(n,8),rootDirectoryLength:Kt(n,16),jsonMetadataOffset:Kt(n,24),jsonMetadataLength:Kt(n,32),leafDirectoryOffset:Kt(n,40),leafDirectoryLength:Kt(n,48),tileDataOffset:Kt(n,56),tileDataLength:Kt(n,64),numAddressedTiles:Kt(n,72),numTileEntries:Kt(n,80),numTileContents:Kt(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:i}}function As(r){const i={buf:new Uint8Array(r),pos:0},n=Je(i),a=[];let l=0;for(let s=0;s<n;s++){const h=Je(i);a.push({tileId:l+h,offset:0,length:0,runLength:1}),l+=h}for(let s=0;s<n;s++)a[s].runLength=Je(i);for(let s=0;s<n;s++)a[s].length=Je(i);for(let s=0;s<n;s++){const h=Je(i);h===0&&s>0?a[s].offset=a[s-1].offset+a[s-1].length:a[s].offset=h-1}return a}function ec(r){const i=new DataView(r);return i.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):i.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Xn=class extends Error{};function ic(r,i){return Et(this,null,function*(){const n=yield r.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(ec(n.data)<3)return[yield Is.getHeader(r)];const l=n.data.slice(0,Ku),s=tc(l,n.etag),h=n.data.slice(s.rootDirectoryOffset,s.rootDirectoryOffset+s.rootDirectoryLength),c=`${r.getKey()}|${s.etag||""}|${s.rootDirectoryOffset}|${s.rootDirectoryLength}`,d=As(yield i(h,s.internalCompression));return[s,[c,d.length,d]]})}function nc(r,i,n,a,l){return Et(this,null,function*(){const s=yield r.getBytes(n,a,void 0,l.etag),h=yield i(s.data,l.internalCompression),c=As(h);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var rc=class{constructor(r=100,i=!0,n=Bs){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=r,this.counter=1,this.decompress=n}getHeader(r){return Et(this,null,function*(){const i=r.getKey(),n=this.cache.get(i);if(n)return n.lastUsed=this.counter++,yield n.data;const a=new Promise((l,s)=>{ic(r,this.decompress).then(h=>{h[1]&&this.cache.set(h[1][0],{lastUsed:this.counter++,data:Promise.resolve(h[1][2])}),l(h[0]),this.prune()}).catch(h=>{s(h)})});return this.cache.set(i,{lastUsed:this.counter++,data:a}),a})}getDirectory(r,i,n,a){return Et(this,null,function*(){const l=`${r.getKey()}|${a.etag||""}|${i}|${n}`,s=this.cache.get(l);if(s)return s.lastUsed=this.counter++,yield s.data;const h=new Promise((c,d)=>{nc(r,this.decompress,i,n,a).then(_=>{c(_),this.prune()}).catch(_=>{d(_)})});return this.cache.set(l,{lastUsed:this.counter++,data:h}),h})}getArrayBuffer(r,i,n,a){return Et(this,null,function*(){const l=`${r.getKey()}|${a.etag||""}|${i}|${n}`,s=this.cache.get(l);if(s)return s.lastUsed=this.counter++,yield s.data;const h=new Promise((c,d)=>{r.getBytes(i,n,void 0,a.etag).then(_=>{c(_.data),this.cache.has(l),this.prune()}).catch(_=>{d(_)})});return this.cache.set(l,{lastUsed:this.counter++,data:h}),h})}prune(){if(this.cache.size>=this.maxCacheEntries){let r=1/0,i;this.cache.forEach((n,a)=>{n.lastUsed<r&&(r=n.lastUsed,i=a)}),i&&this.cache.delete(i)}}invalidate(r){return Et(this,null,function*(){const i=r.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(r.getKey());const n=new Promise((a,l)=>{this.getHeader(r).then(s=>{a(),this.invalidations.delete(i)}).catch(s=>{l(s)})});this.invalidations.set(i,n)})}},oc=class{constructor(r,i,n){typeof r=="string"?this.source=new Qu(r):this.source=r,n?this.decompress=n:this.decompress=Bs,i?this.cache=i:this.cache=new rc}getHeader(){return Et(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(r,i,n,a){return Et(this,null,function*(){const l=$u(r,i,n),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return Is.getZxy(s,this.source,this.cache,r,i,n,a);if(r<s.minZoom||r>s.maxZoom)return;let h=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let d=0;d<=3;d++){const _=yield this.cache.getDirectory(this.source,h,c,s),m=Ju(_,l);if(m){if(m.runLength>0){const p=yield this.source.getBytes(s.tileDataOffset+m.offset,m.length,a,s.etag);return{data:yield this.decompress(p.data,s.tileCompression),cacheControl:p.cacheControl,expires:p.expires}}h=s.leafDirectoryOffset+m.offset,c=m.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(r,i,n,a){return Et(this,null,function*(){try{return yield this.getZxyAttempt(r,i,n,a)}catch(l){if(l instanceof Xn)return this.cache.invalidate(this.source),yield this.getZxyAttempt(r,i,n,a);throw l}})}getMetadataAttempt(){return Et(this,null,function*(){const r=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(r.jsonMetadataOffset,r.jsonMetadataLength,void 0,r.etag),n=yield this.decompress(i.data,r.internalCompression),a=new TextDecoder("utf-8");return JSON.parse(a.decode(n))})}getMetadata(){return Et(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(r){if(r instanceof Xn)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw r}})}};function sc(r,i,n,a,l){Rs(r,i,n||0,a||r.length-1,l||ac)}function Rs(r,i,n,a,l){for(;a>n;){if(a-n>600){var s=a-n+1,h=i-n+1,c=Math.log(s),d=.5*Math.exp(2*c/3),_=.5*Math.sqrt(c*d*(s-d)/s)*(h-s/2<0?-1:1),m=Math.max(n,Math.floor(i-h*d/s+_)),p=Math.min(a,Math.floor(i+(s-h)*d/s+_));Rs(r,i,m,p,l)}var v=r[i],y=n,w=a;for(Qe(r,n,i),l(r[a],v)>0&&Qe(r,n,a);y<w;){for(Qe(r,y,w),y++,w--;l(r[y],v)<0;)y++;for(;l(r[w],v)>0;)w--}l(r[n],v)===0?Qe(r,n,w):(w++,Qe(r,w,a)),w<=i&&(n=w+1),i<=w&&(a=w-1)}}function Qe(r,i,n){var a=r[i];r[i]=r[n],r[n]=a}function ac(r,i){return r<i?-1:r>i?1:0}class lc{constructor(i=9){this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(i){let n=this.data;const a=[];if(!Di(i,n))return a;const l=this.toBBox,s=[];for(;n;){for(let h=0;h<n.children.length;h++){const c=n.children[h],d=n.leaf?l(c):c;Di(i,d)&&(n.leaf?a.push(c):Zn(i,d)?this._all(c,a):s.push(c))}n=s.pop()}return a}collides(i){let n=this.data;if(!Di(i,n))return!1;const a=[];for(;n;){for(let l=0;l<n.children.length;l++){const s=n.children[l],h=n.leaf?this.toBBox(s):s;if(Di(i,h)){if(n.leaf||Zn(i,h))return!0;a.push(s)}}n=a.pop()}return!1}load(i){if(!(i&&i.length))return this;if(i.length<this._minEntries){for(let a=0;a<i.length;a++)this.insert(i[a]);return this}let n=this._build(i.slice(),0,i.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const a=this.data;this.data=n,n=a}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(i){return i&&this._insert(i,this.data.height-1),this}clear(){return this.data=Ee([]),this}remove(i,n){if(!i)return this;let a=this.data;const l=this.toBBox(i),s=[],h=[];let c,d,_;for(;a||s.length;){if(a||(a=s.pop(),d=s[s.length-1],c=h.pop(),_=!0),a.leaf){const m=hc(i,a.children,n);if(m!==-1)return a.children.splice(m,1),s.push(a),this._condense(s),this}!_&&!a.leaf&&Zn(a,l)?(s.push(a),h.push(c),c=0,d=a,a=a.children[0]):d?(c++,a=d.children[c],_=!1):a=null}return this}toBBox(i){return i}compareMinX(i,n){return i.minX-n.minX}compareMinY(i,n){return i.minY-n.minY}toJSON(){return this.data}fromJSON(i){return this.data=i,this}_all(i,n){const a=[];for(;i;)i.leaf?n.push(...i.children):a.push(...i.children),i=a.pop();return n}_build(i,n,a,l){const s=a-n+1;let h=this._maxEntries,c;if(s<=h)return c=Ee(i.slice(n,a+1)),ze(c,this.toBBox),c;l||(l=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/Math.pow(h,l-1))),c=Ee([]),c.leaf=!1,c.height=l;const d=Math.ceil(s/h),_=d*Math.ceil(Math.sqrt(h));Vo(i,n,a,_,this.compareMinX);for(let m=n;m<=a;m+=_){const p=Math.min(m+_-1,a);Vo(i,m,p,d,this.compareMinY);for(let v=m;v<=p;v+=d){const y=Math.min(v+d-1,p);c.children.push(this._build(i,v,y,l-1))}}return ze(c,this.toBBox),c}_chooseSubtree(i,n,a,l){for(;l.push(n),!(n.leaf||l.length-1===a);){let s=1/0,h=1/0,c;for(let d=0;d<n.children.length;d++){const _=n.children[d],m=Rn(_),p=fc(i,_)-m;p<h?(h=p,s=m<s?m:s,c=_):p===h&&m<s&&(s=m,c=_)}n=c||n.children[0]}return n}_insert(i,n,a){const l=a?i:this.toBBox(i),s=[],h=this._chooseSubtree(l,this.data,n,s);for(h.children.push(i),ni(h,l);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(l,s,n)}_split(i,n){const a=i[n],l=a.children.length,s=this._minEntries;this._chooseSplitAxis(a,s,l);const h=this._chooseSplitIndex(a,s,l),c=Ee(a.children.splice(h,a.children.length-h));c.height=a.height,c.leaf=a.leaf,ze(a,this.toBBox),ze(c,this.toBBox),n?i[n-1].children.push(c):this._splitRoot(a,c)}_splitRoot(i,n){this.data=Ee([i,n]),this.data.height=i.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)}_chooseSplitIndex(i,n,a){let l,s=1/0,h=1/0;for(let c=n;c<=a-n;c++){const d=ii(i,0,c,this.toBBox),_=ii(i,c,a,this.toBBox),m=dc(d,_),p=Rn(d)+Rn(_);m<s?(s=m,l=c,h=p<h?p:h):m===s&&p<h&&(h=p,l=c)}return l||a-n}_chooseSplitAxis(i,n,a){const l=i.leaf?this.compareMinX:uc,s=i.leaf?this.compareMinY:cc,h=this._allDistMargin(i,n,a,l),c=this._allDistMargin(i,n,a,s);h<c&&i.children.sort(l)}_allDistMargin(i,n,a,l){i.children.sort(l);const s=this.toBBox,h=ii(i,0,n,s),c=ii(i,a-n,a,s);let d=Zi(h)+Zi(c);for(let _=n;_<a-n;_++){const m=i.children[_];ni(h,i.leaf?s(m):m),d+=Zi(h)}for(let _=a-n-1;_>=n;_--){const m=i.children[_];ni(c,i.leaf?s(m):m),d+=Zi(c)}return d}_adjustParentBBoxes(i,n,a){for(let l=a;l>=0;l--)ni(n[l],i)}_condense(i){for(let n=i.length-1,a;n>=0;n--)i[n].children.length===0?n>0?(a=i[n-1].children,a.splice(a.indexOf(i[n]),1)):this.clear():ze(i[n],this.toBBox)}}function hc(r,i,n){if(!n)return i.indexOf(r);for(let a=0;a<i.length;a++)if(n(r,i[a]))return a;return-1}function ze(r,i){ii(r,0,r.children.length,i,r)}function ii(r,i,n,a,l){l||(l=Ee(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(let s=i;s<n;s++){const h=r.children[s];ni(l,r.leaf?a(h):h)}return l}function ni(r,i){return r.minX=Math.min(r.minX,i.minX),r.minY=Math.min(r.minY,i.minY),r.maxX=Math.max(r.maxX,i.maxX),r.maxY=Math.max(r.maxY,i.maxY),r}function uc(r,i){return r.minX-i.minX}function cc(r,i){return r.minY-i.minY}function Rn(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Zi(r){return r.maxX-r.minX+(r.maxY-r.minY)}function fc(r,i){return(Math.max(i.maxX,r.maxX)-Math.min(i.minX,r.minX))*(Math.max(i.maxY,r.maxY)-Math.min(i.minY,r.minY))}function dc(r,i){const n=Math.max(r.minX,i.minX),a=Math.max(r.minY,i.minY),l=Math.min(r.maxX,i.maxX),s=Math.min(r.maxY,i.maxY);return Math.max(0,l-n)*Math.max(0,s-a)}function Zn(r,i){return r.minX<=i.minX&&r.minY<=i.minY&&i.maxX<=r.maxX&&i.maxY<=r.maxY}function Di(r,i){return i.minX<=r.maxX&&i.minY<=r.maxY&&i.maxX>=r.minX&&i.maxY>=r.minY}function Ee(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Vo(r,i,n,a,l){const s=[i,n];for(;s.length;){if(n=s.pop(),i=s.pop(),n-i<=a)continue;const h=i+Math.ceil((n-i)/a/2)*a;sc(r,h,i,n,l),s.push(i,h,h,n)}}function _c(r){let i=0,n=0;for(const c of r)i+=c.w*c.h,n=Math.max(n,c.w);r.sort((c,d)=>d.h-c.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),n),h:1/0}];let s=0,h=0;for(const c of r)for(let d=l.length-1;d>=0;d--){const _=l[d];if(!(c.w>_.w||c.h>_.h)){if(c.x=_.x,c.y=_.y,h=Math.max(h,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===_.w&&c.h===_.h){const m=l.pop();d<l.length&&(l[d]=m)}else c.h===_.h?(_.x+=c.w,_.w-=c.w):c.w===_.w?(_.y+=c.h,_.h-=c.h):(l.push({x:_.x+c.w,y:_.y,w:_.w-c.w,h:c.h}),_.y+=c.h,_.h-=c.h);break}}return{w:s,h,fill:i/(s*h)||0}}var mc=Object.defineProperty,jt=Math.pow,T=(r,i)=>mc(r,"name",{value:i,configurable:!0}),Yt=(r,i,n)=>new Promise((a,l)=>{var s=d=>{try{c(n.next(d))}catch(_){l(_)}},h=d=>{try{c(n.throw(d))}catch(_){l(_)}},c=d=>d.done?a(d.value):Promise.resolve(d.value).then(s,h);c((n=n.apply(r,i)).next())}),Zs=class{constructor(i,n){this.str=i??n,this.perFeature=typeof this.str=="function"&&this.str.length===2}get(i,n){return typeof this.str=="function"?this.str(i,n):this.str}};T(Zs,"StringAttr");var At=Zs,Ds=class{constructor(i,n=1){this.value=i??n,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,n){return typeof this.value=="function"?this.value(i,n):this.value}};T(Ds,"NumberAttr");var pt=Ds,Fs=class{constructor(i){var n;this.labelProps=(n=i==null?void 0:i.labelProps)!=null?n:["name"],this.textTransform=i==null?void 0:i.textTransform}get(i,n){let a,l;typeof this.labelProps=="function"?l=this.labelProps(i,n):l=this.labelProps;for(let h of l)if(Object.prototype.hasOwnProperty.call(n.props,h)&&typeof n.props[h]=="string"){a=n.props[h];break}let s;return typeof this.textTransform=="function"?s=this.textTransform(i,n):s=this.textTransform,a&&s==="uppercase"?a=a.toUpperCase():a&&s==="lowercase"?a=a.toLowerCase():a&&s==="capitalize"&&(a=a.toLowerCase().split(" ").map(h=>h[0].toUpperCase()+h.slice(1)).join(" ")),a}};T(Fs,"TextAttr");var sr=Fs,js=class{constructor(i){var n,a;i!=null&&i.font?this.font=i.font:(this.family=(n=i==null?void 0:i.fontFamily)!=null?n:"sans-serif",this.size=(a=i==null?void 0:i.fontSize)!=null?a:12,this.weight=i==null?void 0:i.fontWeight,this.style=i==null?void 0:i.fontStyle)}get(i,n){if(this.font)return typeof this.font=="function"?this.font(i,n):this.font;let a="";this.style&&(typeof this.style=="function"?a=`${this.style(i,n)} `:a=`${this.style} `);let l="";this.weight&&(typeof this.weight=="function"?l=`${this.weight(i,n)} `:l=`${this.weight} `);let s;typeof this.size=="function"?s=this.size(i,n):s=this.size;let h;return typeof this.family=="function"?h=this.family(i,n):h=this.family,`${a}${l}${s}px ${h}`}};T(js,"FontAttr");var ar=js,Ns=class{constructor(i,n=[]){this.value=i??n,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(i,n){return typeof this.value=="function"?this.value(i,n):this.value}};T(Ns,"ArrayAttr");var pc=Ns,gc=T((r,i,n)=>{let a=[],l,s,h,c=0,d=0,_=0,m=0,p=0,v=0,y=0,w=0,x=0,E=0,M=0,I=0;if(r.length<2)return[];if(r.length===2)return _=Math.sqrt(jt(r[1].x-r[0].x,2)+jt(r[1].y-r[0].y,2)),[{length:_,beginIndex:0,beginDistance:0,endIndex:2,endDistance:_}];for(m=Math.sqrt(jt(r[1].x-r[0].x,2)+jt(r[1].y-r[0].y,2)),c=1,d=r.length-1;c<d;c++)l=r[c-1],s=r[c],h=r[c+1],v=s.x-l.x,y=s.y-l.y,w=h.x-s.x,x=h.y-s.y,p=Math.sqrt(w*w+x*x),_+=m,E=Math.acos((v*w+y*x)/(m*p)),(E>i||_-I>n)&&(a.push({length:_-I,beginDistance:I,beginIndex:M,endIndex:c+1,endDistance:_}),M=c,I=_),m=p;return c-M>0&&a.push({length:_-I+p,beginIndex:M,beginDistance:I,endIndex:c+1,endDistance:_+p}),a},"linelabel");function Us(r,i,n,a){let l=[];for(let s of r){let h=gc(s,Math.PI/45,i);for(let c of h)if(c.length>=i+a){let d=new K(s[c.beginIndex].x,s[c.beginIndex].y),_=s[c.endIndex-1],m=new K((_.x-d.x)/c.length,(_.y-d.y)/c.length);for(let p=a;p<c.length-i;p+=n)l.push({start:d.add(m.mult(p)),end:d.add(m.mult(p+i))})}}return l}T(Us,"simpleLabel");function Vs(r,i,n,a){let l=i.x-r.x,s=i.y-r.y,h=Math.sqrt(jt(i.x-r.x,2)+jt(i.y-r.y,2)),c=[];for(let d=0;d<n+a;d+=2*a){let _=d*1/h;c.push({x:r.x+_*l,y:r.y+_*s})}return c}T(Vs,"lineCells");function lr(r,i){if(r.length<=i)return[r];let n=i-1,a=r.lastIndexOf(" ",n),l=r.indexOf(" ",n);if(a===-1&&l===-1)return[r];let s,h;return l===-1||a>=0&&n-a<l-n?(s=r.substring(0,a),h=r.substring(a+1,r.length)):(s=r.substring(0,l),h=r.substring(l+1,r.length)),[s,...lr(h,i)]}T(lr,"linebreak");var vc=(r=>(r[r.Point=1]="Point",r[r.Line=2]="Line",r[r.Polygon=3]="Polygon",r))(vc||{});function ce(r){return`${r.x}:${r.y}:${r.z}`}T(ce,"toIndex");var yc=T((r,i,n)=>{r.pos=i;let a=r.readVarint()+r.pos,l=1,s=0,h=0,c=0,d=1/0,_=-1/0,m=1/0,p=-1/0,v=[],y=[];for(;r.pos<a;){if(s<=0){let w=r.readVarint();l=w&7,s=w>>3}if(s--,l===1||l===2)h+=r.readSVarint()*n,c+=r.readSVarint()*n,h<d&&(d=h),h>_&&(_=h),c<m&&(m=c),c>p&&(p=c),l===1&&(y.length>0&&v.push(y),y=[]),y.push(new K(h,c));else if(l===7)y&&y.push(y[0].clone());else throw new Error(`unknown command ${l}`)}return y&&v.push(y),{geom:v,bbox:{minX:d,minY:m,maxX:_,maxY:p}}},"loadGeomAndBbox");function hr(r,i){let n=new iu(new ou(r)),a=new Map;for(let[l,s]of Object.entries(n.layers)){let h=[],c=s;for(let d=0;d<c.length;d++){let _=yc(c.feature(d)._pbf,c.feature(d)._geometry,i/c.extent),m=0;for(let p of _.geom)m+=p.length;h.push({id:c.feature(d).id,geomType:c.feature(d).type,geom:_.geom,numVertices:m,bbox:_.bbox,props:c.feature(d).properties})}a.set(l,h)}return a}T(hr,"parseTile");var Hs=class{constructor(i,n){typeof i=="string"?this.p=new oc(i):this.p=i,this.zoomaborts=[],this.shouldCancelZooms=n}get(i,n){return Yt(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(h=>h.z!==i.z?(h.controller.abort(),!1):!0));let a=new AbortController;this.zoomaborts.push({z:i.z,controller:a});let l=a.signal,s=yield this.p.getZxy(i.z,i.x,i.y,l);return s?hr(s.data,n):new Map})}};T(Hs,"PmtilesSource");var Ho=Hs,Ws=class{constructor(i,n){this.url=i,this.zoomaborts=[],this.shouldCancelZooms=n}get(i,n){return Yt(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(h=>h.z!==i.z?(h.controller.abort(),!1):!0));let a=this.url.replace("{z}",i.z.toString()).replace("{x}",i.x.toString()).replace("{y}",i.y.toString()),l=new AbortController;this.zoomaborts.push({z:i.z,controller:l});let s=l.signal;return new Promise((h,c)=>{fetch(a,{signal:s}).then(d=>d.arrayBuffer()).then(d=>{let _=hr(d,n);h(_)}).catch(d=>{c(d)})})})}};T(Ws,"ZxySource");var bc=Ws,$n=6378137,Wo=85.0511287798,Fi=$n*Math.PI,xc=T(r=>{let i=Math.PI/180,n=Math.max(Math.min(Wo,r[0]),-Wo),a=Math.sin(n*i);return new K($n*r[1]*i,$n*Math.log((1+a)/(1-a))/2)},"project");function Kn(r){return r*r}T(Kn,"sqr");function ai(r,i){return Kn(r.x-i.x)+Kn(r.y-i.y)}T(ai,"dist2");function Ys(r,i,n){let a=ai(i,n);if(a===0)return ai(r,i);let l=((r.x-i.x)*(n.x-i.x)+(r.y-i.y)*(n.y-i.y))/a;return l=Math.max(0,Math.min(1,l)),ai(r,new K(i.x+l*(n.x-i.x),i.y+l*(n.y-i.y)))}T(Ys,"distToSegmentSquared");function Jn(r,i){let n=!1;for(let a=0,l=i.length-1;a<i.length;l=a++){let s=i[a].x,h=i[a].y,c=i[l].x,d=i[l].y;h>r.y!=d>r.y&&r.x<(c-s)*(r.y-h)/(d-h)+s&&(n=!n)}return n}T(Jn,"isInRing");function qs(r){let i=0;for(let n=0;n<r.length;n++){let a=(n+1)%r.length;i+=r[n].x*r[a].y,i-=r[a].x*r[n].y}return i<0}T(qs,"isCcw");function Gs(r,i){let n=!1;for(let a of i)if(qs(a))Jn(r,a)&&(n=!1);else{if(n)return!0;Jn(r,a)&&(n=!0)}return n}T(Gs,"pointInPolygon");function Xs(r,i){let n=1/0;for(let a of i){let l=Math.sqrt(ai(r,a[0]));l<n&&(n=l)}return n}T(Xs,"pointMinDistToPoints");function $s(r,i){let n=1/0;for(let a of i)for(let l=0;l<a.length-1;l++){let s=Math.sqrt(Ys(r,a[l],a[l+1]));s<n&&(n=s)}return n}T($s,"pointMinDistToLines");var Ks=class{constructor(i,n){this.source=i,this.cache=new Map,this.inflight=new Map,this.tileSize=n}get(i){return Yt(this,null,function*(){let n=ce(i);return new Promise((a,l)=>{let s=this.cache.get(n);if(s)s.used=performance.now(),a(s.data);else{let h=this.inflight.get(n);h?h.push({resolve:a,reject:l}):(this.inflight.set(n,[]),this.source.get(i,this.tileSize).then(c=>{this.cache.set(n,{used:performance.now(),data:c});let d=this.inflight.get(n);if(d)for(let _ of d)_.resolve(c);if(this.inflight.delete(n),a(c),this.cache.size>=64){let _=1/0,m;this.cache.forEach((p,v)=>{p.used<_&&(_=p.used,m=v)}),m&&this.cache.delete(m)}}).catch(c=>{let d=this.inflight.get(n);if(d)for(let _ of d)_.reject(c);this.inflight.delete(n),l(c)}))}})})}queryFeatures(i,n,a,l){let s=xc([n,i]),h=new K((s.x+Fi)/(Fi*2),1-(s.y+Fi)/(Fi*2));h.x>1&&(h.x=h.x-Math.floor(h.x));let c=h.mult(1<<a),d=Math.floor(c.x),_=Math.floor(c.y),m=ce({z:a,x:d,y:_}),p=[],v=this.cache.get(m);if(v){let y=new K((c.x-d)*this.tileSize,(c.y-_)*this.tileSize);for(let[w,x]of v.data.entries())for(let E of x)E.geomType===1?Xs(y,E.geom)<l&&p.push({feature:E,layerName:w}):E.geomType===2?$s(y,E.geom)<l&&p.push({feature:E,layerName:w}):Gs(y,E.geom)&&p.push({feature:E,layerName:w})}return p}};T(Ks,"TileCache");var wc=Ks,Lc=(r=>(r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=3]="Right",r))(Lc||{}),Pc=(r=>(r[r.N=1]="N",r[r.Ne=2]="Ne",r[r.E=3]="E",r[r.Se=4]="Se",r[r.S=5]="S",r[r.Sw=6]="Sw",r[r.W=7]="W",r[r.Nw=8]="Nw",r))(Pc||{});T((r,i,n)=>{let a=document.createElement("canvas"),l=a.getContext("2d");return a.width=r,a.height=i,l!==null&&n(a,l),a},"createPattern");var Js=class{constructor(i){var n;this.pattern=i.pattern,this.fill=new At(i.fill,"black"),this.opacity=new pt(i.opacity,1),this.stroke=new At(i.stroke,"black"),this.width=new pt(i.width,0),this.perFeature=(n=this.fill.perFeature||this.opacity.perFeature||this.stroke.perFeature||this.width.perFeature||i.perFeature)!=null?n:!1,this.doStroke=!1}before(i,n){if(!this.perFeature){i.globalAlpha=this.opacity.get(n),i.fillStyle=this.fill.get(n),i.strokeStyle=this.stroke.get(n);let a=this.width.get(n);a>0&&(this.doStroke=!0),i.lineWidth=a}if(this.pattern){let a=i.createPattern(this.pattern,"repeat");a&&(i.fillStyle=a)}}draw(i,n,a,l){let s=!1;if(this.perFeature){i.globalAlpha=this.opacity.get(a,l),i.fillStyle=this.fill.get(a,l);let c=this.width.get(a,l);c&&(s=!0,i.strokeStyle=this.stroke.get(a,l),i.lineWidth=c)}let h=T(()=>{i.fill(),(s||this.doStroke)&&i.stroke()},"drawPath");i.beginPath();for(let c of n)for(let d=0;d<c.length;d++){let _=c[d];d===0?i.moveTo(_.x,_.y):i.lineTo(_.x,_.y)}h()}};T(Js,"PolygonSymbolizer");var Lt=Js;function Tc(r,i){return n=>{let a=n-r;return a>=0&&a<i.length?i[a]:0}}T(Tc,"arr");function Qs(r,i){let n=0;for(;i[n+1][0]<r;)n++;return n}T(Qs,"getStopIndex");function ta(r,i,n){return r*(n-i)+i}T(ta,"interpolate");function ea(r,i,n,a){let l=a[i+1][0]-a[i][0],s=r-a[i][0];return l===0?0:n===1?s/l:(jt(n,s)-1)/(jt(n,l)-1)}T(ea,"computeInterpolationFactor");function Wt(r,i){return n=>{if(i.length<1)return 0;if(n<=i[0][0])return i[0][1];if(n>=i[i.length-1][0])return i[i.length-1][1];let a=Qs(n,i),l=ea(n,a,r,i);return ta(l,i[a][1],i[a+1][1])}}T(Wt,"exp");function Cc(r,i){return n=>{if(i.length<1)return 0;let a=r;for(let l=0;l<i.length;l++)n>=i[l][0]&&(a=i[l][1]);return a}}T(Cc,"step");function Qn(r){return Wt(1,r)}T(Qn,"linear");var ia=class{constructor(i){var n;this.color=new At(i.color,"black"),this.width=new pt(i.width),this.opacity=new pt(i.opacity),this.dash=i.dash?new pc(i.dash):null,this.dashColor=new At(i.dashColor,"black"),this.dashWidth=new pt(i.dashWidth,1),this.lineCap=new At(i.lineCap,"butt"),this.lineJoin=new At(i.lineJoin,"miter"),this.skip=!1,this.perFeature=!!((n=this.dash)!=null&&n.perFeature||this.color.perFeature||this.opacity.perFeature||this.width.perFeature||this.lineCap.perFeature||this.lineJoin.perFeature||i.perFeature)}before(i,n){this.perFeature||(i.strokeStyle=this.color.get(n),i.lineWidth=this.width.get(n),i.globalAlpha=this.opacity.get(n),i.lineCap=this.lineCap.get(n),i.lineJoin=this.lineJoin.get(n))}draw(i,n,a,l){if(this.skip)return;let s=T(()=>{this.perFeature&&(i.globalAlpha=this.opacity.get(a,l),i.lineCap=this.lineCap.get(a,l),i.lineJoin=this.lineJoin.get(a,l)),this.dash?(i.save(),this.perFeature?(i.lineWidth=this.dashWidth.get(a,l),i.strokeStyle=this.dashColor.get(a,l),i.setLineDash(this.dash.get(a,l))):i.setLineDash(this.dash.get(a)),i.stroke(),i.restore()):(i.save(),this.perFeature&&(i.lineWidth=this.width.get(a,l),i.strokeStyle=this.color.get(a,l)),i.stroke(),i.restore())},"strokePath");i.beginPath();for(let h of n)for(let c=0;c<h.length;c++){let d=h[c];c===0?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y)}s()}};T(ia,"LineSymbolizer");var Rt=ia,kc=class{constructor(i){this.name=i.name,this.sheet=i.sheet,this.dpr=window.devicePixelRatio}place(i,n,a){n[0];let l=new K(n[0][0].x,n[0][0].y),s=this.sheet.get(this.name),h=s.w/this.dpr,c=s.h/this.dpr,d={minX:l.x-h/2,minY:l.y-c/2,maxX:l.x+h/2,maxY:l.y+c/2};return[{anchor:l,bboxes:[d],draw:T(_=>{_.globalAlpha=1,_.drawImage(this.sheet.canvas,s.x,s.y,s.w,s.h,-s.w/2/this.dpr,-s.h/2/this.dpr,s.w/2,s.h/2)},"draw")}]}};T(kc,"IconSymbolizer");var na=class{constructor(i){this.radius=new pt(i.radius,3),this.fill=new At(i.fill,"black"),this.stroke=new At(i.stroke,"white"),this.width=new pt(i.width,0),this.opacity=new pt(i.opacity)}draw(i,n,a,l){i.globalAlpha=this.opacity.get(a,l);let s=this.radius.get(a,l),h=this.width.get(a,l);h>0&&(i.strokeStyle=this.stroke.get(a,l),i.lineWidth=h,i.beginPath(),i.arc(n[0][0].x,n[0][0].y,s+h/2,0,2*Math.PI),i.stroke()),i.fillStyle=this.fill.get(a,l),i.beginPath(),i.arc(n[0][0].x,n[0][0].y,s,0,2*Math.PI),i.fill()}place(i,n,a){n[0];let l=new K(n[0][0].x,n[0][0].y),s=this.radius.get(i.zoom,a),h={minX:l.x-s,minY:l.y-s,maxX:l.x+s,maxY:l.y+s};return[{anchor:l,bboxes:[h],draw:T(c=>{this.draw(c,[[new K(0,0)]],i.zoom,a)},"draw")}]}};T(na,"CircleSymbolizer");var Mc=na,Sc=class{constructor(i){this.font=new ar(i),this.text=new sr(i),this.fill=new At(i.fill,"black"),this.background=new At(i.background,"white"),this.padding=new pt(i.padding,0)}place(i,n,a){let l=this.text.get(i.zoom,a);if(!l)return;let s=this.font.get(i.zoom,a);i.scratch.font=s;let h=i.scratch.measureText(l),c=h.width,d=h.actualBoundingBoxAscent,_=h.actualBoundingBoxDescent;n[0];let m=new K(n[0][0].x,n[0][0].y),p=this.padding.get(i.zoom,a),v={minX:m.x-c/2-p,minY:m.y-d-p,maxX:m.x+c/2+p,maxY:m.y+_+p};return[{anchor:m,bboxes:[v],draw:T(y=>{y.globalAlpha=1,y.fillStyle=this.background.get(i.zoom,a),y.fillRect(-c/2-p,-d-p,c+2*p,d+_+2*p),y.fillStyle=this.fill.get(i.zoom,a),y.font=s,y.fillText(l,-c/2,0)},"draw")}]}};T(Sc,"ShieldSymbolizer");var zc=class{constructor(i){this.list=i}place(i,n,a){let l=this.list[0].place(i,n,a);if(!l)return;let s=l[0],h=s.anchor,c=s.bboxes[0],d=c.maxY-c.minY,_=[{draw:s.draw,translate:{x:0,y:0}}],m=[[new K(n[0][0].x,n[0][0].y+d)]];for(let p=1;p<this.list.length;p++)l=this.list[p].place(i,m,a),l&&(s=l[0],c=ra(c,s.bboxes[0]),_.push({draw:s.draw,translate:{x:0,y:d}}));return[{anchor:h,bboxes:[c],draw:T(p=>{for(let v of _)p.save(),p.translate(v.translate.x,v.translate.y),v.draw(p),p.restore()},"draw")}]}};T(zc,"FlexSymbolizer");var ra=T((r,i)=>({minX:Math.min(r.minX,i.minX),minY:Math.min(r.minY,i.minY),maxX:Math.max(r.maxX,i.maxX),maxY:Math.max(r.maxY,i.maxY)}),"mergeBbox"),oa=class{constructor(i){this.list=i}place(i,n,a){let l=this.list[0];if(!l)return;let s=l.place(i,n,a);if(!s)return;let h=s[0],c=h.anchor,d=h.bboxes[0],_=[h.draw];for(let m=1;m<this.list.length;m++){if(s=this.list[m].place(i,n,a),!s)return;h=s[0],d=ra(d,h.bboxes[0]),_.push(h.draw)}return[{anchor:c,bboxes:[d],draw:T(m=>{for(let p of _)p(m)},"draw")}]}};T(oa,"GroupSymbolizer");var Ec=oa,sa=class{constructor(i){this.symbolizer=i}place(i,n,a){let l=n[0][0],s=this.symbolizer.place(i,[[new K(0,0)]],a);if(!s||s.length===0)return;let h=s[0],c=h.bboxes[0],d=c.maxX-c.minX,_=c.maxY-c.minY,m={minX:l.x-d/2,maxX:l.x+d/2,minY:l.y-_/2,maxY:l.y+_/2};return[{anchor:l,bboxes:[m],draw:T(p=>{p.translate(-d/2,_/2-c.maxY),h.draw(p,{justify:2})},"draw")}]}};T(sa,"CenteredSymbolizer");var Oc=sa,Ic=class{constructor(i,n){this.padding=new pt(i,0),this.symbolizer=n}place(i,n,a){let l=this.symbolizer.place(i,n,a);if(!l||l.length===0)return;let s=this.padding.get(i.zoom,a);for(let h of l)for(let c of h.bboxes)c.minX-=s,c.minY-=s,c.maxX+=s,c.maxY+=s;return l}};T(Ic,"Padding");var aa=class{constructor(i){this.font=new ar(i),this.text=new sr(i),this.fill=new At(i.fill,"black"),this.stroke=new At(i.stroke,"black"),this.width=new pt(i.width,0),this.lineHeight=new pt(i.lineHeight,1),this.letterSpacing=new pt(i.letterSpacing,0),this.maxLineCodeUnits=new pt(i.maxLineChars,15),this.justify=i.justify}place(i,n,a){let l=this.text.get(i.zoom,a);if(!l)return;let s=this.font.get(i.zoom,a);i.scratch.font=s;let h=this.letterSpacing.get(i.zoom,a),c=lr(l,this.maxLineCodeUnits.get(i.zoom,a)),d="",_=0;for(let M of c)M.length>_&&(_=M.length,d=M);let m=i.scratch.measureText(d),p=m.width+h*(_-1),v=m.actualBoundingBoxAscent,y=m.actualBoundingBoxDescent,w=(v+y)*this.lineHeight.get(i.zoom,a),x=new K(n[0][0].x,n[0][0].y),E={minX:x.x,minY:x.y-v,maxX:x.x+p,maxY:x.y+y+(c.length-1)*w};return[{anchor:x,bboxes:[E],draw:T((M,I)=>{M.globalAlpha=1,M.font=s,M.fillStyle=this.fill.get(i.zoom,a);let A=this.width.get(i.zoom,a),O=0;for(let S of c){let ot=0;if(this.justify===2||I&&I.justify===2?ot=(p-M.measureText(S).width)/2:(this.justify===3||I&&I.justify===3)&&(ot=p-M.measureText(S).width),A)if(M.lineWidth=A*2,M.strokeStyle=this.stroke.get(i.zoom,a),h>0){let G=ot;for(let et of S)M.strokeText(et,G,O),G+=M.measureText(et).width+h}else M.strokeText(S,ot,O);if(h>0){let G=ot;for(let et of S)M.fillText(et,G,O),G+=M.measureText(et).width+h}else M.fillText(S,ot,O);O+=w}},"draw")}]}};T(aa,"TextSymbolizer");var la=aa,ha=class{constructor(i){this.centered=new Oc(new la(i))}place(i,n,a){return this.centered.place(i,n,a)}};T(ha,"CenteredTextSymbolizer");var ti=ha,ua=class{constructor(i,n){var a,l,s;this.symbolizer=i,this.offsetX=new pt(n.offsetX,0),this.offsetY=new pt(n.offsetY,0),this.justify=(a=n.justify)!=null?a:void 0,this.placements=(l=n.placements)!=null?l:[2,6,8,4,1,3,5,7],this.ddValues=(s=n.ddValues)!=null?s:()=>({})}place(i,n,a){if(a.geomType!==1)return;let l=n[0][0],s=this.symbolizer.place(i,[[new K(0,0)]],a);if(!s||s.length===0)return;let h=s[0],c=h.bboxes[0],d=this.offsetX,_=this.offsetY,m=this.justify,p=this.placements,{offsetX:v,offsetY:y,justify:w,placements:x}=this.ddValues(i.zoom,a)||{};v&&(d=new pt(v,0)),y&&(_=new pt(y,0)),w&&(m=w),x&&(p=x);let E=d.get(i.zoom,a),M=_.get(i.zoom,a),I=T((G,et)=>({minX:G.x+et.x+c.minX,minY:G.y+et.y+c.minY,maxX:G.x+et.x+c.maxX,maxY:G.y+et.y+c.maxY}),"getBbox"),A=new K(E,M),O,S=T(G=>{G.translate(A.x,A.y),h.draw(G,{justify:O})},"draw"),ot=T((G,et)=>{let yt=I(G,et);if(!i.index.bboxCollides(yt,i.order))return[{anchor:l,bboxes:[yt],draw:S}]},"placeLabelInPoint");for(let G of p){let et=this.computeXaxisOffset(E,c,G),yt=this.computeYaxisOffset(M,c,G);return O=this.computeJustify(m,G),A=new K(et,yt),ot(l,A)}}computeXaxisOffset(i,n,a){let l=n.maxX,s=l/2;return[1,5].includes(a)?i-s:[8,7,6].includes(a)?i-l:i}computeYaxisOffset(i,n,a){let l=Math.abs(n.minY),s=n.maxY,h=(n.minY+n.maxY)/2;return[3,7].includes(a)?i-h:[8,2,1].includes(a)?i-s:[6,4,5].includes(a)?i+l:i}computeJustify(i,n){return i||([1,5].includes(n)?2:[2,3,4].includes(n)?1:3)}};T(ua,"OffsetSymbolizer");var Bc=ua,ca=class{constructor(i){this.symbolizer=new Bc(new la(i),i)}place(i,n,a){return this.symbolizer.place(i,n,a)}};T(ca,"OffsetTextSymbolizer");var Ac=ca,Rc=(r=>(r[r.Above=1]="Above",r[r.Center=2]="Center",r[r.Below=3]="Below",r))(Rc||{}),fa=class{constructor(i){var n;this.font=new ar(i),this.text=new sr(i),this.fill=new At(i.fill,"black"),this.stroke=new At(i.stroke,"black"),this.width=new pt(i.width,0),this.offset=new pt(i.offset,0),this.position=(n=i.position)!=null?n:1,this.maxLabelCodeUnits=new pt(i.maxLabelChars,40),this.repeatDistance=new pt(i.repeatDistance,250)}place(i,n,a){let l=this.text.get(i.zoom,a);if(!l||l.length>this.maxLabelCodeUnits.get(i.zoom,a))return;let s=20,h=a.bbox;if(h.maxY-h.minY<s&&h.maxX-h.minX<s)return;let c=this.font.get(i.zoom,a);i.scratch.font=c;let d=i.scratch.measureText(l),_=d.width,m=d.actualBoundingBoxAscent+d.actualBoundingBoxDescent,p=this.repeatDistance.get(i.zoom,a);i.overzoom>4&&(p*=1<<i.overzoom-4);let v=m*2,y=Us(n,_,p,v);if(y.length===0)return;let w=[];for(let x of y){let E=x.end.x-x.start.x,M=x.end.y-x.start.y,I=Vs(x.start,x.end,_,v/2).map(O=>({minX:O.x-v/2,minY:O.y-v/2,maxX:O.x+v/2,maxY:O.y+v/2})),A=T(O=>{O.globalAlpha=1,O.rotate(Math.atan2(M,E)),E<0&&(O.scale(-1,-1),O.translate(-_,0));let S=0;this.position===3?S+=m:this.position===2&&(S+=m/2),O.translate(0,S-this.offset.get(i.zoom,a)),O.font=c;let ot=this.width.get(i.zoom,a);ot&&(O.lineWidth=ot,O.strokeStyle=this.stroke.get(i.zoom,a),O.strokeText(l,0,0)),O.fillStyle=this.fill.get(i.zoom,a),O.fillText(l,0,0)},"draw");w.push({anchor:x.start,bboxes:I,draw:A,deduplicationKey:l,deduplicationDistance:p})}return w}};T(fa,"LineLabelSymbolizer");var Dn=fa,Dt=T((r,i)=>{let n=r[i];return typeof n=="string"?n:""},"getString"),Yo=T((r,i)=>{let n=r[i];return typeof n=="number"?n:0},"getNumber"),ur=T(r=>[{dataLayer:"earth",symbolizer:new Lt({fill:r.earth})},{dataLayer:"landuse",symbolizer:new Lt({fill:T((i,n)=>On(r.park_a,r.park_b,Math.min(Math.max(i/12,12),0)),"fill")}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["allotments","village_green","playground"].includes(a)},"filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.park_b,opacity:.7}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"].includes(a)},"filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.hospital}),filter:T((i,n)=>n.props["pmap:kind"]==="hospital","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.industrial}),filter:T((i,n)=>n.props["pmap:kind"]==="industrial","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.school}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["school","university","college"].includes(a)},"filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.beach}),filter:T((i,n)=>n.props["pmap:kind"]==="beach","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.zoo}),filter:T((i,n)=>n.props["pmap:kind"]==="zoo","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.zoo}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["military","naval_base","airfield"].includes(a)},"filter")},{dataLayer:"natural",symbolizer:new Lt({fill:T((i,n)=>On(r.wood_a,r.wood_b,Math.min(Math.max(i/12,12),0)),"fill")}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["wood","nature_reserve","forest"].includes(a)},"filter")},{dataLayer:"natural",symbolizer:new Lt({fill:T((i,n)=>On(r.scrub_a,r.scrub_b,Math.min(Math.max(i/12,12),0)),"fill")}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)},"filter")},{dataLayer:"natural",symbolizer:new Lt({fill:r.scrub_b}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["scrub","grassland","grass"].includes(a)},"filter")},{dataLayer:"natural",symbolizer:new Lt({fill:r.glacier}),filter:T((i,n)=>n.props["pmap:kind"]==="glacier","filter")},{dataLayer:"natural",symbolizer:new Lt({fill:r.sand}),filter:T((i,n)=>n.props["pmap:kind"]==="sand","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.aerodrome}),filter:T((i,n)=>n.props["pmap:kind"]==="aerodrome","filter")},{dataLayer:"water",symbolizer:new Lt({fill:r.water})},{dataLayer:"transit",symbolizer:new Rt({color:r.runway,width:T((i,n)=>Wt(1.6,[[11,0],[13,4],[19,30]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind_detail"]==="runway","filter")},{dataLayer:"transit",symbolizer:new Rt({color:r.runway,width:T((i,n)=>Wt(1.6,[[14,0],[14.5,1],[16,6]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind_detail"]==="taxiway","filter")},{dataLayer:"transit",symbolizer:new Rt({color:r.pier,width:T((i,n)=>Wt(1.6,[[13,0],[13.5,0,5],[21,16]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="pier","filter")},{dataLayer:"physical_line",minzoom:14,symbolizer:new Rt({color:r.water,width:T((i,n)=>Wt(1.6,[[9,0],[9.5,1],[18,12]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="river","filter")},{dataLayer:"physical_line",minzoom:14,symbolizer:new Rt({color:r.water,width:.5}),filter:T((i,n)=>n.props["pmap:kind"]==="stream","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.pedestrian}),filter:T((i,n)=>n.props["pmap:kind"]==="pedestrian","filter")},{dataLayer:"landuse",symbolizer:new Lt({fill:r.pier}),filter:T((i,n)=>n.props["pmap:kind"]==="pier","filter")},{dataLayer:"buildings",symbolizer:new Lt({fill:r.buildings,opacity:.5})},{dataLayer:"roads",symbolizer:new Rt({color:r.major,width:T((i,n)=>Wt(1.6,[[14,0],[20,7]])(i),"width")}),filter:T((i,n)=>{let a=Dt(n.props,"pmap:kind");return["other","path"].includes(a)},"filter")},{dataLayer:"roads",symbolizer:new Rt({color:r.major,width:T((i,n)=>Wt(1.6,[[13,0],[18,8]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="minor_road","filter")},{dataLayer:"roads",symbolizer:new Rt({color:r.major,width:T((i,n)=>Wt(1.6,[[7,0],[12,1.2],[15,3],[18,13]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="medium_road","filter")},{dataLayer:"roads",symbolizer:new Rt({color:r.major,width:T((i,n)=>Wt(1.6,[[6,0],[12,1.6],[15,3],[18,13]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="major_road","filter")},{dataLayer:"roads",symbolizer:new Rt({color:r.major,width:T((i,n)=>Wt(1.6,[[3,0],[6,1.1],[12,1.6],[15,5],[18,15]])(i),"width")}),filter:T((i,n)=>n.props["pmap:kind"]==="highway","filter")},{dataLayer:"boundaries",symbolizer:new Rt({dash:[3,2],color:r.boundaries,width:1}),filter:T((i,n)=>{let a=n.props["pmap:min_admin_level"];return typeof a=="number"&&a<=2},"filter")},{dataLayer:"transit",symbolizer:new Rt({dash:[.3,.75],color:r.railway,dashWidth:T((i,n)=>Wt(1.6,[[4,0],[7,.15],[19,9]])(i),"dashWidth"),opacity:.5}),filter:T((i,n)=>n.props["pmap:kind"]==="rail","filter")},{dataLayer:"boundaries",symbolizer:new Rt({dash:[3,2],color:r.boundaries,width:.5}),filter:T((i,n)=>{let a=n.props["pmap:min_admin_level"];return typeof a=="number"&&a>2},"filter")}],"paintRules"),cr=T(r=>{let i=["name"];return[{dataLayer:"roads",symbolizer:new Dn({labelProps:i,fill:r.roads_label_minor,font:"400 12px sans-serif",width:2,stroke:r.roads_label_minor_halo}),minzoom:16,filter:T((n,a)=>{let l=Dt(a.props,"pmap:kind");return["minor_road","other","path"].includes(l)},"filter")},{dataLayer:"roads",symbolizer:new Dn({labelProps:i,fill:r.roads_label_major,font:"400 12px sans-serif",width:2,stroke:r.roads_label_major_halo}),minzoom:12,filter:T((n,a)=>{let l=Dt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(l)},"filter")},{dataLayer:"roads",symbolizer:new Dn({labelProps:i,fill:r.roads_label_major,font:"400 12px sans-serif",width:2,stroke:r.roads_label_major_halo}),minzoom:12,filter:T((n,a)=>{let l=Dt(a.props,"pmap:kind");return["highway","major_road","medium_road"].includes(l)},"filter")},{dataLayer:"physical_point",symbolizer:new ti({labelProps:i,fill:r.ocean_label,lineHeight:1.5,letterSpacing:1,font:T((n,a)=>`400 ${Qn([[3,10],[10,12]])(n)}px sans-serif`,"font"),textTransform:"uppercase"}),filter:T((n,a)=>{let l=Dt(a.props,"pmap:kind");return["ocean","bay","strait","fjord"].includes(l)},"filter")},{dataLayer:"physical_point",symbolizer:new ti({labelProps:i,fill:r.ocean_label,lineHeight:1.5,letterSpacing:1,font:T((n,a)=>`400 ${Qn([[3,0],[6,12],[10,12]])(n)}px sans-serif`,"font")}),filter:T((n,a)=>{let l=Dt(a.props,"pmap:kind");return["sea","lake","water"].includes(l)},"filter")},{dataLayer:"places",symbolizer:new ti({labelProps:T((n,a)=>n<6?["name:short"]:i,"labelProps"),fill:r.state_label,stroke:r.state_label_halo,width:1,lineHeight:1.5,font:T((n,a)=>n<6?"400 16px sans-serif":"400 12px sans-serif","font"),textTransform:"uppercase"}),filter:T((n,a)=>a.props["pmap:kind"]==="region","filter")},{dataLayer:"places",symbolizer:new ti({labelProps:i,fill:r.country_label,lineHeight:1.5,font:T((n,a)=>"600 12px sans-serif","font"),textTransform:"uppercase"}),filter:T((n,a)=>a.props["pmap:kind"]==="country","filter")},{dataLayer:"places",minzoom:9,symbolizer:new ti({labelProps:i,fill:r.city_label,lineHeight:1.5,font:T((n,a)=>{if(!a)return"400 12px sans-serif";let l=a.props["pmap:min_zoom"],s=400;l&&l<=5&&(s=600);let h=12,c=a.props["pmap:population_rank"];return c&&c>9&&(h=16),`${s} ${h}px sans-serif`},"font")}),sort:T((n,a)=>{let l=Yo(n,"pmap:population_rank"),s=Yo(a,"pmap:population_rank");return l-s},"sort"),filter:T((n,a)=>a.props["pmap:kind"]==="locality","filter")},{dataLayer:"places",maxzoom:8,symbolizer:new Ec([new Mc({radius:2,fill:r.city_circle,stroke:r.city_circle_stroke,width:1.5}),new Ac({labelProps:i,fill:r.city_label,stroke:r.city_label_halo,width:1,offsetX:6,offsetY:4.5,font:T((n,a)=>"400 12px sans-serif","font")})]),filter:T((n,a)=>a.props["pmap:kind"]==="locality","filter")}]},"labelRules"),Zc={background:"#cccccc",earth:"#e0e0e0",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",pier:"#e0e0e0",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_medium_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_medium:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",transit_pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",medium_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",medium:"#f5f5f5",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",waterway_label:"#ffffff",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_medium_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_medium:"#f0eded",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#7e9aa0",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_circle:"#ffffff",city_circle_stroke:"#a3a3a3",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3"},Dc={background:"#34373d",earth:"#1f1f1f",park_a:"#232325",park_b:"#232325",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#34373d",pier:"#222222",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_medium_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",medium_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",medium:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",waterway_label:"#717784",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_medium_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_medium:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",peak_label:"#898080",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_circle:"#000000",city_circle_stroke:"#7a7a7a",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c"},Fc={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",pier:"#f5f5f5",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_medium_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",medium_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",waterway_label:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_medium_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",peak_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_circle:"#ffffff",city_circle_stroke:"#adadad",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8"},jc={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",pier:"#b8b8b8",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_medium_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",medium_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",waterway_label:"#7a7a7a",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_medium_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",peak_label:"#5c5c5c",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_circle:"#c2c2c2",city_circle_stroke:"#7a7a7a",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585"},Nc={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",pier:"#0a0a0a",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_medium_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",medium_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",medium:"#292929",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",waterway_label:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_medium_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_medium:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",peak_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_circle:"#000000",city_circle_stroke:"#666666",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070"},da={light:Zc,dark:Dc,white:Fc,grayscale:jc,black:Nc},_a=T((r,i,n)=>{let a=[];for(let l of r){let s=[];for(let h of l)s.push(h.clone().mult(i).add(n));a.push(s)}return a},"transformGeom"),ji=T((r,i)=>{let n=1<<i;return r<0?n+r:r>=n?r%n:r},"wrap"),ma=class{constructor(i,n,a){this.tileCache=i,this.maxDataLevel=n,this.levelDiff=a}dataTilesForBounds(i,n){let a=jt(2,i)/jt(2,Math.ceil(i)),l=[],s=1,h=this.tileCache.tileSize;if(i<this.levelDiff)s=1/(1<<this.levelDiff-i)*a,l.push({dataTile:{z:0,x:0,y:0},origin:new K(0,0),scale:s,dim:h*s});else if(i<=this.levelDiff+this.maxDataLevel){let c=1<<this.levelDiff,d=256*a,_=Math.ceil(i)-this.levelDiff,m=Math.floor(n.minX/c/d),p=Math.floor(n.minY/c/d),v=Math.floor(n.maxX/c/d),y=Math.floor(n.maxY/c/d);for(let w=m;w<=v;w++)for(let x=p;x<=y;x++){let E=new K(w*c*d,x*c*d);l.push({dataTile:{z:_,x:ji(w,_),y:ji(x,_)},origin:E,scale:a,dim:h*a})}}else{let c=1<<this.levelDiff;s=(1<<Math.ceil(i)-this.maxDataLevel-this.levelDiff)*a;let d=Math.floor(n.minX/c/256/s),_=Math.floor(n.minY/c/256/s),m=Math.floor(n.maxX/c/256/s),p=Math.floor(n.maxY/c/256/s);for(let v=d;v<=m;v++)for(let y=_;y<=p;y++){let w=new K(v*c*256*s,y*c*256*s);l.push({dataTile:{z:this.maxDataLevel,x:ji(v,this.maxDataLevel),y:ji(y,this.maxDataLevel)},origin:w,scale:s,dim:h*s})}}return l}dataTileForDisplayTile(i){let n,a=1,l=this.tileCache.tileSize,s;if(i.z<this.levelDiff)n={z:0,x:0,y:0},a=1/(1<<this.levelDiff-i.z),s=new K(0,0),l=l*a;else if(i.z<=this.levelDiff+this.maxDataLevel){let h=1<<this.levelDiff;n={z:i.z-this.levelDiff,x:Math.floor(i.x/h),y:Math.floor(i.y/h)},s=new K(n.x*h*256,n.y*h*256)}else{a=1<<i.z-this.maxDataLevel-this.levelDiff;let h=1<<this.levelDiff;n={z:this.maxDataLevel,x:Math.floor(i.x/h/a),y:Math.floor(i.y/h/a)},s=new K(n.x*h*a*256,n.y*h*a*256),l=l*a}return{dataTile:n,scale:a,origin:s,dim:l}}getBbox(i,n){return Yt(this,null,function*(){let a=this.dataTilesForBounds(i,n);return(yield Promise.all(a.map(l=>this.tileCache.get(l.dataTile)))).map((l,s)=>{let h=a[s];return{data:l,z:i,dataTile:h.dataTile,scale:h.scale,dim:h.dim,origin:h.origin}})})}getDisplayTile(i){return Yt(this,null,function*(){let n=this.dataTileForDisplayTile(i);return{data:yield this.tileCache.get(n.dataTile),z:i.z,dataTile:n.dataTile,scale:n.scale,origin:n.origin,dim:n.dim}})}queryFeatures(i,n,a,l){let s=Math.round(a),h=Math.min(s-this.levelDiff,this.maxDataLevel),c=l/(1<<s-h);return this.tileCache.queryFeatures(i,n,h,c)}};T(ma,"View");var Uc=ma,pa=T(r=>{let i=T(a=>{let l=a.levelDiff===void 0?1:a.levelDiff,s=a.maxDataZoom||15,h;if(typeof a.url=="string")new URL(a.url,"http://example.com").pathname.endsWith(".pmtiles")?h=new Ho(a.url,!0):h=new bc(a.url,!0);else if(a.url)h=new Ho(a.url,!0);else throw new Error(`Invalid source ${a.url}`);let c=new wc(h,256*1<<l);return new Uc(c,s,l)},"sourceToViews"),n=new Map;if(r.sources)for(let a in r.sources)n.set(a,i(r.sources[a]));else n.set("",i(r));return n},"sourcesToViews"),Vc=T((r,i,n)=>{let a=i/256,l=Math.floor(n.minX/256),s=Math.floor(n.minY/256),h=Math.floor(n.maxX/256),c=Math.floor(n.maxY/256),d=Math.log2(a),_=[];for(let m=l;m<=h;m++){let p=m%(1<<r);for(let v=s;v<=c;v++)_.push({display:ce({z:r,x:p,y:v}),key:ce({z:r-d,x:Math.floor(p/a),y:Math.floor(v/a)})})}return _},"covering"),ga=class{constructor(i,n){this.tree=new lc,this.current=new Map,this.dim=i,this.maxLabeledTiles=n}hasPrefix(i){for(let n of this.current.keys())if(n.startsWith(i))return!0;return!1}has(i){return this.current.has(i)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(i,n){let a=new Set;for(let l of this.tree.search(i))l.indexedLabel.order<=n&&a.add(l.indexedLabel);return a}searchLabel(i,n){let a=new Set;for(let l of i.bboxes)for(let s of this.tree.search(l))s.indexedLabel.order<=n&&a.add(s.indexedLabel);return a}bboxCollides(i,n){for(let a of this.tree.search(i))if(a.indexedLabel.order<=n)return!0;return!1}labelCollides(i,n){for(let a of i.bboxes)for(let l of this.tree.search(a))if(l.indexedLabel.order<=n)return!0;return!1}deduplicationCollides(i){if(!i.deduplicationKey||!i.deduplicationDistance)return!1;let n=i.deduplicationDistance,a={minX:i.anchor.x-n,minY:i.anchor.y-n,maxX:i.anchor.x+n,maxY:i.anchor.y+n};for(let l of this.tree.search(a))if(l.indexedLabel.deduplicationKey===i.deduplicationKey&&l.indexedLabel.anchor.dist(i.anchor)<n)return!0;return!1}makeEntry(i){this.current.get(i)&&console.log("consistency error 1");let n=new Set;this.current.set(i,n)}insert(i,n,a){let l={anchor:i.anchor,bboxes:i.bboxes,draw:i.draw,order:n,tileKey:a,deduplicationKey:i.deduplicationKey,deduplicationDistance:i.deduplicationDistance},s=this.current.get(a);if(!s){let d=new Set;this.current.set(a,d),s=d}s.add(l);let h=!1,c=!1;for(let d of i.bboxes)this.tree.insert({minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,indexedLabel:l}),d.minX<0&&(h=!0),d.maxX>this.dim&&(c=!0);if(h||c){let d=h?this.dim:-this.dim,_=[];for(let v of i.bboxes)_.push({minX:v.minX+d,minY:v.minY,maxX:v.maxX+d,maxY:v.maxY});let m={anchor:new K(i.anchor.x+d,i.anchor.y),bboxes:_,draw:i.draw,order:n,tileKey:a},p=this.current.get(a);p&&p.add(m);for(let v of _)this.tree.insert({minX:v.minX,minY:v.minY,maxX:v.maxX,maxY:v.maxY,indexedLabel:m})}}pruneOrNoop(i){let n=i.split(":"),a,l=0,s=0;for(let h of this.current.keys()){let c=h.split(":");if(c[3]===n[3]){s++;let d=Math.sqrt(jt(+c[0]-+n[0],2)+jt(+c[1]-+n[1],2));d>l&&(l=d,a=h)}a&&s>this.maxLabeledTiles&&this.pruneKey(a)}}pruneKey(i){let n=this.current.get(i);if(!n)return;let a=[];for(let l of this.tree.all())n.has(l.indexedLabel)&&a.push(l);for(let l of a)this.tree.remove(l);this.current.delete(i)}removeLabel(i){let n=[];for(let l of this.tree.all())i===l.indexedLabel&&n.push(l);for(let l of n)this.tree.remove(l);let a=this.current.get(i.tileKey);a&&a.delete(i)}};T(ga,"Index");var Hc=ga,va=class{constructor(i,n,a,l,s){this.index=new Hc(256*1<<i,l),this.z=i,this.scratch=n,this.labelRules=a,this.callback=s}layout(i){let n=performance.now(),a=new Set;for(let[s,h]of i)for(let c of h){let d=`${ce(c.dataTile)}:${s}`;this.index.has(d)||(this.index.makeEntry(d),a.add(d))}let l=new Set;for(let[s,h]of this.labelRules.entries()){if(h.visible===!1||h.minzoom&&this.z<h.minzoom||h.maxzoom&&this.z>h.maxzoom)continue;let c=h.dataSource||"",d=i.get(c);if(d)for(let _ of d){let m=`${ce(_.dataTile)}:${c}`;if(!a.has(m))continue;let p=_.data.get(h.dataLayer);if(p===void 0)continue;let v=p;h.sort&&v.sort((w,x)=>h.sort?h.sort(w.props,x.props):0);let y={index:this.index,zoom:this.z,scratch:this.scratch,order:s,overzoom:this.z-_.dataTile.z};for(let w of v){if(h.filter&&!h.filter(this.z,w))continue;let x=_a(w.geom,_.scale,_.origin),E=h.symbolizer.place(y,x,w);if(E)for(let M of E){let I=!1;if(!(M.deduplicationKey&&this.index.deduplicationCollides(M))){if(this.index.labelCollides(M,1/0)){if(!this.index.labelCollides(M,s)){let A=this.index.searchLabel(M,1/0);for(let O of A){this.index.removeLabel(O);for(let S of O.bboxes)this.findInvalidatedTiles(l,_.dim,S,m)}this.index.insert(M,s,m),I=!0}}else this.index.insert(M,s,m),I=!0;if(I)for(let A of M.bboxes)(A.maxX>_.origin.x+_.dim||A.minX<_.origin.x||A.minY<_.origin.y||A.maxY>_.origin.y+_.dim)&&this.findInvalidatedTiles(l,_.dim,A,m)}}}}}for(let s of a)this.index.pruneOrNoop(s);return l.size>0&&this.callback&&this.callback(l),performance.now()-n}findInvalidatedTiles(i,n,a,l){let s=Vc(this.z,n,a);for(let h of s)h.key!==l&&this.index.hasPrefix(h.key)&&i.add(h.display)}add(i){let n=!0;for(let[a,l]of i)for(let s of l)this.index.has(`${ce(s.dataTile)}:${a}`)||(n=!1);return n?0:this.layout(i)}};T(va,"Labeler");var ya=va,ba=class{constructor(i,n,a,l){this.labelers=new Map,this.scratch=i,this.labelRules=n,this.maxLabeledTiles=a,this.callback=l}add(i,n){let a=this.labelers.get(i);return a||(a=new ya(i,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(i,a)),a.add(n)}getIndex(i){let n=this.labelers.get(i);if(n)return n.index}};T(ba,"Labelers");var qo=ba;function fr(r,i,n,a,l,s,h,c,d){let _=performance.now();r.save(),r.miterLimit=2;for(let m of l){if(m.minzoom&&i<m.minzoom||m.maxzoom&&i>m.maxzoom)continue;let p=n.get(m.dataSource||"");if(p)for(let v of p){let y=v.data.get(m.dataLayer);if(y===void 0)continue;m.symbolizer.before&&m.symbolizer.before(r,v.z);let w=v.origin,x=v.dim,E=v.scale;if(r.save(),c){r.beginPath();let M=Math.max(w.x-h.x,s.minX-h.x),I=Math.max(w.y-h.y,s.minY-h.y),A=Math.min(w.x-h.x+x,s.maxX-h.x),O=Math.min(w.y-h.y+x,s.maxY-h.y);r.rect(M,I,A-M,O-I),r.clip()}r.translate(w.x-h.x,w.y-h.y);for(let M of y){let I=M.geom,A=M.bbox;A.maxX*E+w.x<s.minX||A.minX*E+w.x>s.maxX||A.minY*E+w.y>s.maxY||A.maxY*E+w.y<s.minY||m.filter&&!m.filter(v.z,M)||(E!==1&&(I=_a(I,E,new K(0,0))),m.symbolizer.draw(r,I,v.z,M))}r.restore()}}if(c&&(r.beginPath(),r.rect(s.minX-h.x,s.minY-h.y,s.maxX-s.minX,s.maxY-s.minY),r.clip()),a){let m=a.searchBbox(s,1/0);for(let p of m)if(r.save(),r.translate(p.anchor.x-h.x,p.anchor.y-h.y),p.draw(r),r.restore(),d){r.lineWidth=.5,r.strokeStyle=d,r.fillStyle=d,r.globalAlpha=1,r.fillRect(p.anchor.x-h.x-2,p.anchor.y-h.y-2,4,4);for(let v of p.bboxes)r.strokeRect(v.minX-h.x,v.minY-h.y,v.maxX-v.minX,v.maxY-v.minY)}}return r.restore(),performance.now()-_}T(fr,"paint");var hi=6378137,Go=85.0511287798,qt=hi*Math.PI,xa=T(r=>{let i=Math.PI/180,n=Math.max(Math.min(Go,r.y),-Go),a=Math.sin(n*i);return new K(hi*r.x*i,hi*Math.log((1+a)/(1-a))/2)},"project"),Wc=T(r=>{let i=180/Math.PI;return{lat:(2*Math.atan(Math.exp(r.y/hi))-Math.PI/2)*i,lng:r.x*i/hi}},"unproject"),Yc=T((r,i)=>n=>{let a=xa(n);return new K((a.x+qt)/(qt*2),1-(a.y+qt)/(qt*2)).mult((1<<i)*256).sub(r)},"instancedProject"),qc=T((r,i)=>n=>{let a=new K(n.x,n.y).add(r).div((1<<i)*256),l=new K(a.x*(qt*2)-qt,(1-a.y)*(qt*2)-qt);return Wc(l)},"instancedUnproject"),Xo=T((r,i)=>{let n=i*(360/r);return Math.log2(n/256)},"getZoom"),Gc=class{constructor(i){if(i.theme){let n=da[i.theme];this.paintRules=ur(n),this.labelRules=cr(n),this.backgroundColor=n.background}else this.paintRules=i.paintRules||[],this.labelRules=i.labelRules||[],this.backgroundColor=i.backgroundColor;this.views=pa(i),this.debug=i.debug||""}drawContext(i,n,a,l,s){return Yt(this,null,function*(){let h=xa(l),c=new K((h.x+qt)/(qt*2),1-(h.y+qt)/(qt*2)).clone().mult(jt(2,s)*256).sub(new K(n/2,a/2)),d={minX:c.x,minY:c.y,maxX:c.x+n,maxY:c.y+a},_=[];for(let[x,E]of this.views){let M=E.getBbox(s,d);_.push({key:x,promise:M})}let m=yield Promise.all(_.map(x=>x.promise.then(E=>({status:"fulfilled",value:E,key:x.key}),E=>({status:"rejected",value:[],reason:E,key:x.key})))),p=new Map;for(let x of m)x.status==="fulfilled"&&p.set(x.key,x.value);let v=performance.now(),y=new ya(s,i,this.labelRules,16,void 0);y.add(p),this.backgroundColor&&(i.save(),i.fillStyle=this.backgroundColor,i.fillRect(0,0,n,a),i.restore());let w=this.paintRules;if(fr(i,s,p,y.index,w,d,c,!0,this.debug),this.debug){i.save(),i.translate(-c.x,-c.y),i.strokeStyle=this.debug,i.fillStyle=this.debug,i.font="12px sans-serif";let x=0;for(let[E,M]of p){for(let I of M){i.strokeRect(I.origin.x,I.origin.y,I.dim,I.dim);let A=I.dataTile;i.fillText(`${E+(E?" ":"")+A.z} ${A.x} ${A.y}`,I.origin.x+4,I.origin.y+14*(1+x))}x++}i.restore()}return{elapsed:performance.now()-v,project:Yc(c,s),unproject:qc(c,s)}})}drawCanvas(i,n,a){return Yt(this,arguments,function*(l,s,h,c={}){let d=window.devicePixelRatio,_=l.clientWidth,m=l.clientHeight;l.width===_*d&&l.height===m*d||(l.width=_*d,l.height=m*d),c.lang&&(l.lang=c.lang);let p=l.getContext("2d");if(!p){console.error("Failed to initialize canvas2d context.");return}return p.setTransform(d,0,0,d,0,0),this.drawContext(p,_,m,s,h)})}drawContextBounds(i,n,a,l,s){return Yt(this,null,function*(){let h=a.x-n.x,c=new K((n.x+a.x)/2,(n.y+a.y)/2);return this.drawContext(i,l,s,c,Xo(h,l))})}drawCanvasBounds(i,n,a,l){return Yt(this,arguments,function*(s,h,c,d,_={}){let m=c.x-h.x,p=new K((h.x+c.x)/2,(h.y+c.y)/2);return this.drawCanvas(s,p,Xo(m,d),_)})}};T(Gc,"Static");var Xc=T(r=>new Promise(i=>{setTimeout(()=>{i()},r)}),"timer"),$c=T(r=>r.then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i})),"reflect"),Kc=T((r={})=>{let i=class extends L.GridLayer{constructor(l={}){if(l.noWrap&&!l.bounds&&(l.bounds=[[-90,-180],[90,180]]),l.attribution==null&&(l.attribution='<a href="https://protomaps.com">Protomaps</a>  <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(l),l.theme){let h=da[l.theme];this.paintRules=ur(h),this.labelRules=cr(h),this.backgroundColor=h.background}else this.paintRules=l.paintRules||[],this.labelRules=l.labelRules||[],this.backgroundColor=l.backgroundColor;this.lastRequestedZ=void 0,this.tasks=l.tasks||[],this.views=pa(l),this.debug=l.debug;let s=document.createElement("canvas").getContext("2d");this.scratch=s,this.onTilesInvalidated=h=>{for(let c of h)this.rerenderTile(c)},this.labelers=new qo(this.scratch,this.labelRules,16,this.onTilesInvalidated),this.tileSize=256*window.devicePixelRatio,this.tileDelay=l.tileDelay||3,this.lang=l.lang}renderTile(l,s,h,c=()=>{}){return Yt(this,null,function*(){this.lastRequestedZ=l.z;let d=[];for(let[G,et]of this.views){let yt=et.getDisplayTile(l);d.push({key:G,promise:yt})}let _=yield Promise.all(d.map(G=>G.promise.then(et=>({status:"fulfilled",value:et,key:G.key}),et=>({status:"rejected",reason:et,key:G.key})))),m=new Map;for(let G of _)G.status==="fulfilled"?m.set(G.key,[G.value]):G.reason.name==="AbortError"||console.error(G.reason);if(s.key!==h||this.lastRequestedZ!==l.z||(yield Promise.all(this.tasks.map($c)),s.key!==h)||this.lastRequestedZ!==l.z)return;let p=this.labelers.add(l.z,m);if(s.key!==h||this.lastRequestedZ!==l.z)return;let v=this.labelers.getIndex(l.z);if(!this._map)return;let y=this._map.getCenter().wrap(),w=this._getTiledPixelBounds(y),x=this._pxBoundsToTileRange(w).getCenter(),E=l.distanceTo(x)*this.tileDelay;if(yield Xc(E),s.key!==h||this.lastRequestedZ!==l.z)return;let M=16,I={minX:256*l.x-M,minY:256*l.y-M,maxX:256*(l.x+1)+M,maxY:256*(l.y+1)+M},A=new K(256*l.x,256*l.y);s.width=this.tileSize,s.height=this.tileSize;let O=s.getContext("2d");if(!O){console.error("Failed to get Canvas context");return}O.setTransform(this.tileSize/256,0,0,this.tileSize/256,0,0),O.clearRect(0,0,256,256),this.backgroundColor&&(O.save(),O.fillStyle=this.backgroundColor,O.fillRect(0,0,256,256),O.restore());let S=0,ot=this.paintRules;if(S=fr(O,l.z,m,this.xray?null:v,ot,I,A,!1,this.debug),this.debug){O.save(),O.fillStyle=this.debug,O.font="600 12px sans-serif",O.fillText(`${l.z} ${l.x} ${l.y}`,4,14),O.font="12px sans-serif";let G=28;for(let[et,yt]of m){let dt=yt[0].dataTile;O.fillText(`${et+(et?" ":"")+dt.z} ${dt.x} ${dt.y}`,4,G),G+=14}O.font="600 10px sans-serif",S>8&&(O.fillText(`${S.toFixed()} ms paint`,4,G),G+=14),p>8&&O.fillText(`${p.toFixed()} ms layout`,4,G),O.strokeStyle=this.debug,O.lineWidth=.5,O.beginPath(),O.moveTo(0,0),O.lineTo(0,256),O.stroke(),O.lineWidth=.5,O.beginPath(),O.moveTo(0,0),O.lineTo(256,0),O.stroke(),O.restore()}c()})}rerenderTile(l){for(let s in this._tiles){let h=this._wrapCoords(this._keyToTileCoords(s));l===this._tileCoordsToKey(h)&&this.renderTile(h,this._tiles[s].el,l)}}queryTileFeaturesDebug(l,s,h=16){let c=new Map;for(let[d,_]of this.views)c.set(d,_.queryFeatures(l,s,this._map.getZoom(),h));return c}clearLayout(){this.labelers=new qo(this.scratch,this.labelRules,16,this.onTilesInvalidated)}rerenderTiles(){for(let l in this._tiles){let s=this._wrapCoords(this._keyToTileCoords(l)),h=this._tileCoordsToKey(s);this.renderTile(s,this._tiles[l].el,h)}}createTile(l,s){let h=L.DomUtil.create("canvas","leaflet-tile");h.lang=this.lang;let c=this._tileCoordsToKey(l);return h.key=c,this.renderTile(l,h,c,()=>{s(void 0,h)}),h}_removeTile(l){let s=this._tiles[l];s&&(s.el.removed=!0,s.el.key=void 0,L.DomUtil.removeClass(s.el,"leaflet-tile-loaded"),s.el.width=s.el.height=0,L.DomUtil.remove(s.el),delete this._tiles[l],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(l)}))}};T(i,"LeafletLayer");let n=i;return new n(r)},"leafletLayer");T((r,i,n)=>{let a=new FontFace(r,`url(${i})`,{weight:n});return document.fonts.add(a),a.load()},"Font");var $o=T(r=>Yt(void 0,null,function*(){return new Promise((i,n)=>{let a=new Image;a.onload=()=>i(a),a.onerror=()=>n("Invalid SVG"),a.src=r})}),"mkimg"),Jc=`
<svg width="20px" height="20px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <rect width="50" height="50" fill="#cccccc"/>
    <g transform="translate(5,5)">
        <path fill="none" stroke="#666666" stroke-width="7" d="m11,12a8.5,8 0 1,1 17,0q0,4-4,6t-4.5,4.5-.4,4v.2m0,3v7"/>
    </g>
</svg>
`,Qc=class{constructor(i){this.src=i,this.canvas=document.createElement("canvas"),this.mapping=new Map,this.missingBox={x:0,y:0,w:0,h:0}}load(){return Yt(this,null,function*(){let i=this.src,n=window.devicePixelRatio;i.endsWith(".html")&&(i=yield(yield fetch(i)).text());let a=new window.DOMParser().parseFromString(i,"text/html"),l=Array.from(a.body.children),s=yield $o(`data:image/svg+xml;base64,${btoa(Jc)}`),h=[{w:s.width*n,h:s.height*n,img:s,id:""}],c=new XMLSerializer;for(let m of l){let p=`data:image/svg+xml;base64,${btoa(c.serializeToString(m))}`,v=yield $o(p);h.push({w:v.width*n,h:v.height*n,img:v,id:m.id})}let d=_c(h);this.canvas.width=d.w,this.canvas.height=d.h;let _=this.canvas.getContext("2d");if(_)for(let m of h)m.x!==void 0&&m.y!==void 0&&(_.drawImage(m.img,m.x,m.y,m.w,m.h),m.id?this.mapping.set(m.id,{x:m.x,y:m.y,w:m.w,h:m.h}):this.missingBox={x:m.x,y:m.y,w:m.w,h:m.h});return this})}get(i){let n=this.mapping.get(i);return n||(n=this.missingBox),n}};T(Qc,"Sheet");const tf={background:"#cccccc",earth:"#e0e0e0",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",pier:"#e0e0e0",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_medium_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_medium:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",transit_pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",medium_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",medium:"#f5f5f5",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",waterway_label:"#ffffff",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_medium_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_medium:"#f0eded",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#7e9aa0",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_circle:"#ffffff",city_circle_stroke:"#a3a3a3",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3"},ef={background:"#34373d",earth:"#1f1f1f",park_a:"#232325",park_b:"#232325",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#34373d",pier:"#222222",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_medium_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",medium_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",medium:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",waterway_label:"#717784",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_medium_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_medium:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",peak_label:"#898080",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_circle:"#000000",city_circle_stroke:"#7a7a7a",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c"},nf={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",pier:"#f5f5f5",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_medium_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",medium_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",waterway_label:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_medium_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",peak_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_circle:"#ffffff",city_circle_stroke:"#adadad",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8"},rf={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",pier:"#b8b8b8",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_medium_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",medium_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",waterway_label:"#7a7a7a",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_medium_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",peak_label:"#5c5c5c",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_circle:"#c2c2c2",city_circle_stroke:"#7a7a7a",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585"},of={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",pier:"#0a0a0a",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_medium_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",medium_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",medium:"#292929",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",waterway_label:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_medium_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_medium:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",peak_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_circle:"#000000",city_circle_stroke:"#666666",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070"},sf={light:tf,dark:ef,white:nf,grayscale:rf,black:of},Ko={...sf.light},af=(r,i,n)=>Object.freeze({instance:r,context:i,container:n}),lf=({...r},i)=>{const n=Kc({paint_rules:r.paintRules,label_rules:r.labelRules,...r});return af(n,i)},hf=hs(lf,us),wa=({attribution:r,url:i,format:n,...a})=>{var h,c;const l=q.useContext(St.ThemeContext);let s=ut.jsx(ph,{attribution:r,url:i,...a});return n==="pmtiles"&&(s=ut.jsx(hf,{attribution:r,url:i,paintRules:((h=l.map)==null?void 0:h.tiles)&&ur({...Ko,...l.map.tiles}),labelRules:((c=l.map)==null?void 0:c.tiles)&&cr({...Ko,...l.map.tiles}),...a})),s};wa.propTypes={attribution:rt.string,url:rt.string.isRequired,format:rt.oneOf(["pmtiles"])};const uf=ui.default(dh)`
  ${({theme:r})=>{var i,n;return`
      ${(n=(i=r==null?void 0:r.global)==null?void 0:i.font)!=null&&n.family?`font-family: ${r.global.font.family};`:""}
      height: 100%;
    `}}
`,La=q.forwardRef(({center:r=[0,0],children:i,maxZoom:n=20,minZoom:a=3,scrollWheelZoom:l=!0,tileLayer:s,theme:h,zoom:c=1,zoomControl:d=!1,..._},m)=>{const p=q.useContext(St.ThemeContext),v=Be(p,{map:Be(bs,h)});return ut.jsx(St.ThemeContext.Provider,{value:v,children:ut.jsxs(uf,{attributionControl:!1,center:r,ref:m,scrollWheelZoom:l,maxZoom:n,minZoom:a,zoom:c,zoomControl:d,..._,children:[ut.jsx(ch,{position:"bottomright",prefix:!1}),ut.jsx(wa,{attribution:s.attribution,url:s.url,format:s.format,...s}),i]})})});La.propTypes={center:rt.array,children:rt.any,scrollWheelZoom:rt.string||rt.bool,maxZoom:rt.number,minZoom:rt.number,tileLayer:rt.shape({attribution:rt.string,url:rt.string.isRequired,format:rt.oneOf(["pmtiles"])}).isRequired,theme:rt.object,zoom:rt.number,zoomControl:rt.bool};let Ni;const cf=new Uint8Array(16);function ff(){if(!Ni&&(Ni=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ni))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ni(cf)}const kt=[];for(let r=0;r<256;++r)kt.push((r+256).toString(16).slice(1));function df(r,i=0){return kt[r[i+0]]+kt[r[i+1]]+kt[r[i+2]]+kt[r[i+3]]+"-"+kt[r[i+4]]+kt[r[i+5]]+"-"+kt[r[i+6]]+kt[r[i+7]]+"-"+kt[r[i+8]]+kt[r[i+9]]+"-"+kt[r[i+10]]+kt[r[i+11]]+kt[r[i+12]]+kt[r[i+13]]+kt[r[i+14]]+kt[r[i+15]]}const _f=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jo={randomUUID:_f};function mf(r,i,n){if(Jo.randomUUID&&!i&&!r)return Jo.randomUUID();r=r||{};const a=r.random||(r.rng||ff)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,df(a)}const Pa=({icon:r,popup:i,...n})=>{var h;const a=q.useContext(St.ThemeContext),l=(h=r==null?void 0:r.props)==null?void 0:h.kind,s=i?ut.jsx(mh,{children:ut.jsx(_r,{children:i})}):void 0;return ut.jsx(_h,{icon:Wi.divIcon({className:"grommet-marker",html:Fn.default.renderToString(ut.jsx(St.ThemeContext.Provider,{value:a,children:r||ut.jsx(dr,{})}))}),kind:l,...n,children:s},mf())};Pa.propTypes={icon:rt.node,popup:rt.node};var Qo={exports:{}};(function(r,i){(function(n,a){a(i)})(os,function(n){var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(s){L.Util.setOptions(this,s),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var h=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,h?this._withAnimation:this._noAnimation),this._markerCluster=h?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(s){if(s instanceof L.LayerGroup)return this.addLayers([s]);if(!s.getLatLng)return this._nonPointGroup.addLayer(s),this.fire("layeradd",{layer:s}),this;if(!this._map)return this._needsClustering.push(s),this.fire("layeradd",{layer:s}),this;if(this.hasLayer(s))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(s,this._maxZoom),this.fire("layeradd",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var h=s,c=this._zoom;if(s.__parent)for(;h.__parent._zoom>=c;)h=h.__parent;return this._currentShownBounds.contains(h.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(s,h):this._animationAddLayerNonAnimated(s,h)),this},removeLayer:function(s){return s instanceof L.LayerGroup?this.removeLayers([s]):s.getLatLng?this._map?s.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(s)),this._removeLayer(s,!0),this.fire("layerremove",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),s.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(s)&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,s)&&this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s}),this):(this._nonPointGroup.removeLayer(s),this.fire("layerremove",{layer:s}),this)},addLayers:function(s,h){if(!L.Util.isArray(s))return this.addLayer(s);var c=this._featureGroup,d=this._nonPointGroup,_=this.options.chunkedLoading,m=this.options.chunkInterval,p=this.options.chunkProgress,v=s.length,y=0,w=!0,x;if(this._map){var E=new Date().getTime(),M=L.bind(function(){var A=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();y<v;y++){if(_&&y%200===0){var O=new Date().getTime()-A;if(O>m)break}if(x=s[y],x instanceof L.LayerGroup){w&&(s=s.slice(),w=!1),this._extractNonGroupLayers(x,s),v=s.length;continue}if(!x.getLatLng){d.addLayer(x),h||this.fire("layeradd",{layer:x});continue}if(!this.hasLayer(x)&&(this._addLayer(x,this._maxZoom),h||this.fire("layeradd",{layer:x}),x.__parent&&x.__parent.getChildCount()===2)){var S=x.__parent.getAllChildMarkers(),ot=S[0]===x?S[1]:S[0];c.removeLayer(ot)}}p&&p(y,v,new Date().getTime()-E),y===v?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(M,this.options.chunkDelay)},this);M()}else for(var I=this._needsClustering;y<v;y++){if(x=s[y],x instanceof L.LayerGroup){w&&(s=s.slice(),w=!1),this._extractNonGroupLayers(x,s),v=s.length;continue}if(!x.getLatLng){d.addLayer(x);continue}this.hasLayer(x)||I.push(x)}return this},removeLayers:function(s){var h,c,d=s.length,_=this._featureGroup,m=this._nonPointGroup,p=!0;if(!this._map){for(h=0;h<d;h++){if(c=s[h],c instanceof L.LayerGroup){p&&(s=s.slice(),p=!1),this._extractNonGroupLayers(c,s),d=s.length;continue}this._arraySplice(this._needsClustering,c),m.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c})}return this}if(this._unspiderfy){this._unspiderfy();var v=s.slice(),y=d;for(h=0;h<y;h++){if(c=v[h],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,v),y=v.length;continue}this._unspiderfyLayer(c)}}for(h=0;h<d;h++){if(c=s[h],c instanceof L.LayerGroup){p&&(s=s.slice(),p=!1),this._extractNonGroupLayers(c,s),d=s.length;continue}if(!c.__parent){m.removeLayer(c),this.fire("layerremove",{layer:c});continue}this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),_.hasLayer(c)&&(_.removeLayer(c),c.clusterShow&&c.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(s){s.off(this._childMarkerEventHandlers,this),delete s.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var s=new L.LatLngBounds;this._topClusterLevel&&s.extend(this._topClusterLevel._bounds);for(var h=this._needsClustering.length-1;h>=0;h--)s.extend(this._needsClustering[h].getLatLng());return s.extend(this._nonPointGroup.getBounds()),s},eachLayer:function(s,h){var c=this._needsClustering.slice(),d=this._needsRemoving,_,m,p;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),m=c.length-1;m>=0;m--){for(_=!0,p=d.length-1;p>=0;p--)if(d[p].layer===c[m]){_=!1;break}_&&s.call(h,c[m])}this._nonPointGroup.eachLayer(s,h)},getLayers:function(){var s=[];return this.eachLayer(function(h){s.push(h)}),s},getLayer:function(s){var h=null;return s=parseInt(s,10),this.eachLayer(function(c){L.stamp(c)===s&&(h=c)}),h},hasLayer:function(s){if(!s)return!1;var h,c=this._needsClustering;for(h=c.length-1;h>=0;h--)if(c[h]===s)return!0;for(c=this._needsRemoving,h=c.length-1;h>=0;h--)if(c[h].layer===s)return!1;return!!(s.__parent&&s.__parent._group===this)||this._nonPointGroup.hasLayer(s)},zoomToShowLayer:function(s,h){var c=this._map;typeof h!="function"&&(h=function(){});var d=function(){(c.hasLayer(s)||c.hasLayer(s.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),c.hasLayer(s)?h():s.__parent._icon&&(this.once("spiderfied",h,this),s.__parent.spiderfy()))};s._icon&&this._map.getBounds().contains(s.getLatLng())?h():s.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(s.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),s.__parent.zoomToBounds())},onAdd:function(s){this._map=s;var h,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(s),this._nonPointGroup.addTo(s),this._gridClusters||this._generateInitialClusters(),this._maxLat=s.options.crs.projection.MAX_LATITUDE,h=0,c=this._needsRemoving.length;h<c;h++)d=this._needsRemoving[h],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(h=0,c=this._needsRemoving.length;h<c;h++)d=this._needsRemoving[h],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(s){s.off("zoomend",this._zoomEnd,this),s.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(s){for(var h=s;h&&!h._icon;)h=h.__parent;return h||null},_arraySplice:function(s,h){for(var c=s.length-1;c>=0;c--)if(s[c]===h)return s.splice(c,1),!0},_removeFromGridUnclustered:function(s,h){for(var c=this._map,d=this._gridUnclustered,_=Math.floor(this._map.getMinZoom());h>=_&&d[h].removeObject(s,c.project(s.getLatLng(),h));h--);},_childMarkerDragStart:function(s){s.target.__dragStart=s.target._latlng},_childMarkerMoved:function(s){if(!this._ignoreMove&&!s.target.__dragStart){var h=s.target._popup&&s.target._popup.isOpen();this._moveChild(s.target,s.oldLatLng,s.latlng),h&&s.target.openPopup()}},_moveChild:function(s,h,c){s._latlng=h,this.removeLayer(s),s._latlng=c,this.addLayer(s)},_childMarkerDragEnd:function(s){var h=s.target.__dragStart;delete s.target.__dragStart,h&&this._moveChild(s.target,h,s.target._latlng)},_removeLayer:function(s,h,c){var d=this._gridClusters,_=this._gridUnclustered,m=this._featureGroup,p=this._map,v=Math.floor(this._map.getMinZoom());h&&this._removeFromGridUnclustered(s,this._maxZoom);var y=s.__parent,w=y._markers,x;for(this._arraySplice(w,s);y&&(y._childCount--,y._boundsNeedUpdate=!0,!(y._zoom<v));)h&&y._childCount<=1?(x=y._markers[0]===s?y._markers[1]:y._markers[0],d[y._zoom].removeObject(y,p.project(y._cLatLng,y._zoom)),_[y._zoom].addObject(x,p.project(x.getLatLng(),y._zoom)),this._arraySplice(y.__parent._childClusters,y),y.__parent._markers.push(x),x.__parent=y.__parent,y._icon&&(m.removeLayer(y),c||m.addLayer(x))):y._iconNeedsUpdate=!0,y=y.__parent;delete s.__parent},_isOrIsParent:function(s,h){for(;h;){if(s===h)return!0;h=h.parentNode}return!1},fire:function(s,h,c){if(h&&h.layer instanceof L.MarkerCluster){if(h.originalEvent&&this._isOrIsParent(h.layer._icon,h.originalEvent.relatedTarget))return;s="cluster"+s}L.FeatureGroup.prototype.fire.call(this,s,h,c)},listens:function(s,h){return L.FeatureGroup.prototype.listens.call(this,s,h)||L.FeatureGroup.prototype.listens.call(this,"cluster"+s,h)},_defaultIconCreateFunction:function(s){var h=s.getChildCount(),c=" marker-cluster-";return h<10?c+="small":h<100?c+="medium":c+="large",new L.DivIcon({html:"<div><span>"+h+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var s=this._map,h=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,_=this.options.spiderfyOnEveryZoom;(h||d||_)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),s.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(s){var h=s.layer,c=h;if(!(s.type==="clusterkeypress"&&s.originalEvent&&s.originalEvent.keyCode!==13)){for(;c._childClusters.length===1;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===h._childCount&&this.options.spiderfyOnMaxZoom?h.spiderfy():this.options.zoomToBoundsOnClick&&h.zoomToBounds(),this.options.spiderfyOnEveryZoom&&h.spiderfy(),s.originalEvent&&s.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(s){var h=this._map;this._inZoomAnimation||(this._shownPolygon&&h.removeLayer(this._shownPolygon),s.layer.getChildCount()>2&&s.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(s.layer.getConvexHull(),this.options.polygonOptions),h.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var s=this.options.spiderfyOnMaxZoom,h=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,_=this._map;(s||c||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),h&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),_.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var s=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,s),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),s),this._currentShownBounds=s}},_generateInitialClusters:function(){var s=Math.ceil(this._map.getMaxZoom()),h=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,d=c;typeof c!="function"&&(d=function(){return c}),this.options.disableClusteringAtZoom!==null&&(s=this.options.disableClusteringAtZoom-1),this._maxZoom=s,this._gridClusters={},this._gridUnclustered={};for(var _=s;_>=h;_--)this._gridClusters[_]=new L.DistanceGrid(d(_)),this._gridUnclustered[_]=new L.DistanceGrid(d(_));this._topClusterLevel=new this._markerCluster(this,h-1)},_addLayer:function(s,h){var c=this._gridClusters,d=this._gridUnclustered,_=Math.floor(this._map.getMinZoom()),m,p;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(s),s.on(this._childMarkerEventHandlers,this);h>=_;h--){m=this._map.project(s.getLatLng(),h);var v=c[h].getNearObject(m);if(v){v._addChild(s),s.__parent=v;return}if(v=d[h].getNearObject(m),v){var y=v.__parent;y&&this._removeLayer(v,!1);var w=new this._markerCluster(this,h,v,s);c[h].addObject(w,this._map.project(w._cLatLng,h)),v.__parent=w,s.__parent=w;var x=w;for(p=h-1;p>y._zoom;p--)x=new this._markerCluster(this,p,x),c[p].addObject(x,this._map.project(v.getLatLng(),p));y._addChild(x),this._removeFromGridUnclustered(v,h);return}d[h].addObject(s,m)}this._topClusterLevel._addChild(s),s.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(s){s instanceof L.MarkerCluster&&s._iconNeedsUpdate&&s._updateIcon()})},_enqueue:function(s){this._queue.push(s),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var s=0;s<this._queue.length;s++)this._queue[s].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var s=Math.round(this._map._zoom);this._processQueue(),this._zoom<s&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,s)):this._zoom>s?(this._animationStart(),this._animationZoomOut(this._zoom,s)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(s){var h=this._maxLat;return h!==void 0&&(s.getNorth()>=h&&(s._northEast.lat=1/0),s.getSouth()<=-h&&(s._southWest.lat=-1/0)),s},_animationAddLayerNonAnimated:function(s,h){if(h===s)this._featureGroup.addLayer(s);else if(h._childCount===2){h._addToMap();var c=h.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else h._updateIcon()},_extractNonGroupLayers:function(s,h){var c=s.getLayers(),d=0,_;for(h=h||[];d<c.length;d++){if(_=c[d],_ instanceof L.LayerGroup){this._extractNonGroupLayers(_,h);continue}h.push(_)}return h},_overrideMarkerIcon:function(s){var h=s.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[s]}});return h}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(s,h){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(s,h){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(s,h){this._animationAddLayerNonAnimated(s,h)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(s,h){var c=this._getExpandedVisibleBounds(),d=this._featureGroup,_=Math.floor(this._map.getMinZoom()),m;this._ignoreMove=!0,this._topClusterLevel._recursively(c,s,_,function(p){var v=p._latlng,y=p._markers,w;for(c.contains(v)||(v=null),p._isSingleParent()&&s+1===h?(d.removeLayer(p),p._recursivelyAddChildrenToMap(null,h,c)):(p.clusterHide(),p._recursivelyAddChildrenToMap(v,h,c)),m=y.length-1;m>=0;m--)w=y[m],c.contains(w._latlng)||d.removeLayer(w)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(c,h),d.eachLayer(function(p){!(p instanceof L.MarkerCluster)&&p._icon&&p.clusterShow()}),this._topClusterLevel._recursively(c,s,h,function(p){p._recursivelyRestoreChildPositions(h)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(c,s,_,function(p){d.removeLayer(p),p.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(s,h){this._animationZoomOutSingle(this._topClusterLevel,s-1,h),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s,this._getExpandedVisibleBounds())},_animationAddLayer:function(s,h){var c=this,d=this._featureGroup;d.addLayer(s),h!==s&&(h._childCount>2?(h._updateIcon(),this._forceLayout(),this._animationStart(),s._setPos(this._map.latLngToLayerPoint(h.getLatLng())),s.clusterHide(),this._enqueue(function(){d.removeLayer(s),s.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(h,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(s,h,c){var d=this._getExpandedVisibleBounds(),_=Math.floor(this._map.getMinZoom());s._recursivelyAnimateChildrenInAndAddSelfToMap(d,_,h+1,c);var m=this;this._forceLayout(),s._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(s._childCount===1){var p=s._markers[0];this._ignoreMove=!0,p.setLatLng(p.getLatLng()),this._ignoreMove=!1,p.clusterShow&&p.clusterShow()}else s._recursively(d,c,_,function(v){v._recursivelyRemoveChildrenFromMap(d,_,h+1)});m._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(s){return new L.MarkerClusterGroup(s)};var l=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(s,h,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this,pane:s.options.clusterPane}),this._group=s,this._zoom=h,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(s,h){s=s||[];for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c].getAllChildMarkers(s,h);for(var d=this._markers.length-1;d>=0;d--)h&&this._markers[d].__dragStart||s.push(this._markers[d]);return s},getChildCount:function(){return this._childCount},zoomToBounds:function(s){for(var h=this._childClusters.slice(),c=this._group._map,d=c.getBoundsZoom(this._bounds),_=this._zoom+1,m=c.getZoom(),p;h.length>0&&d>_;){_++;var v=[];for(p=0;p<h.length;p++)v=v.concat(h[p]._childClusters);h=v}d>_?this._group._map.setView(this._latlng,_):d<=m?this._group._map.setView(this._latlng,m+1):this._group._map.fitBounds(this._bounds,s)},getBounds:function(){var s=new L.LatLngBounds;return s.extend(this._bounds),s},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(s,h){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(s),s instanceof L.MarkerCluster?(h||(this._childClusters.push(s),s.__parent=this),this._childCount+=s._childCount):(h||this._markers.push(s),this._childCount++),this.__parent&&this.__parent._addChild(s,!0)},_setClusterCenter:function(s){this._cLatLng||(this._cLatLng=s._cLatLng||s._latlng)},_resetBounds:function(){var s=this._bounds;s._southWest&&(s._southWest.lat=1/0,s._southWest.lng=1/0),s._northEast&&(s._northEast.lat=-1/0,s._northEast.lng=-1/0)},_recalculateBounds:function(){var s=this._markers,h=this._childClusters,c=0,d=0,_=this._childCount,m,p,v,y;if(_!==0){for(this._resetBounds(),m=0;m<s.length;m++)v=s[m]._latlng,this._bounds.extend(v),c+=v.lat,d+=v.lng;for(m=0;m<h.length;m++)p=h[m],p._boundsNeedUpdate&&p._recalculateBounds(),this._bounds.extend(p._bounds),v=p._wLatLng,y=p._childCount,c+=v.lat*y,d+=v.lng*y;this._latlng=this._wLatLng=new L.LatLng(c/_,d/_),this._boundsNeedUpdate=!1}},_addToMap:function(s){s&&(this._backupLatlng=this._latlng,this.setLatLng(s)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(s,h,c){this._recursively(s,this._group._map.getMinZoom(),c-1,function(d){var _=d._markers,m,p;for(m=_.length-1;m>=0;m--)p=_[m],p._icon&&(p._setPos(h),p.clusterHide())},function(d){var _=d._childClusters,m,p;for(m=_.length-1;m>=0;m--)p=_[m],p._icon&&(p._setPos(h),p.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(s,h,c,d){this._recursively(s,d,h,function(_){_._recursivelyAnimateChildrenIn(s,_._group._map.latLngToLayerPoint(_.getLatLng()).round(),c),_._isSingleParent()&&c-1===d?(_.clusterShow(),_._recursivelyRemoveChildrenFromMap(s,h,c)):_.clusterHide(),_._addToMap()})},_recursivelyBecomeVisible:function(s,h){this._recursively(s,this._group._map.getMinZoom(),h,null,function(c){c.clusterShow()})},_recursivelyAddChildrenToMap:function(s,h,c){this._recursively(c,this._group._map.getMinZoom()-1,h,function(d){if(h!==d._zoom)for(var _=d._markers.length-1;_>=0;_--){var m=d._markers[_];c.contains(m._latlng)&&(s&&(m._backupLatlng=m.getLatLng(),m.setLatLng(s),m.clusterHide&&m.clusterHide()),d._group._featureGroup.addLayer(m))}},function(d){d._addToMap(s)})},_recursivelyRestoreChildPositions:function(s){for(var h=this._markers.length-1;h>=0;h--){var c=this._markers[h];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(s-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var _=this._childClusters.length-1;_>=0;_--)this._childClusters[_]._recursivelyRestoreChildPositions(s)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(s,h,c,d){var _,m;this._recursively(s,h-1,c-1,function(p){for(m=p._markers.length-1;m>=0;m--)_=p._markers[m],(!d||!d.contains(_._latlng))&&(p._group._featureGroup.removeLayer(_),_.clusterShow&&_.clusterShow())},function(p){for(m=p._childClusters.length-1;m>=0;m--)_=p._childClusters[m],(!d||!d.contains(_._latlng))&&(p._group._featureGroup.removeLayer(_),_.clusterShow&&_.clusterShow())})},_recursively:function(s,h,c,d,_){var m=this._childClusters,p=this._zoom,v,y;if(h<=p&&(d&&d(this),_&&p===c&&_(this)),p<h||p<c)for(v=m.length-1;v>=0;v--)y=m[v],y._boundsNeedUpdate&&y._recalculateBounds(),s.intersects(y._bounds)&&y._recursively(s,h,c,d,_)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var s=this.options.opacity;return this.setOpacity(0),this.options.opacity=s,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(s){this._cellSize=s,this._sqCellSize=s*s,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(s,h){var c=this._getCoord(h.x),d=this._getCoord(h.y),_=this._grid,m=_[d]=_[d]||{},p=m[c]=m[c]||[],v=L.Util.stamp(s);this._objectPoint[v]=h,p.push(s)},updateObject:function(s,h){this.removeObject(s),this.addObject(s,h)},removeObject:function(s,h){var c=this._getCoord(h.x),d=this._getCoord(h.y),_=this._grid,m=_[d]=_[d]||{},p=m[c]=m[c]||[],v,y;for(delete this._objectPoint[L.Util.stamp(s)],v=0,y=p.length;v<y;v++)if(p[v]===s)return p.splice(v,1),y===1&&delete m[c],!0},eachObject:function(s,h){var c,d,_,m,p,v,y,w=this._grid;for(c in w){p=w[c];for(d in p)for(v=p[d],_=0,m=v.length;_<m;_++)y=s.call(h,v[_]),y&&(_--,m--)}},getNearObject:function(s){var h=this._getCoord(s.x),c=this._getCoord(s.y),d,_,m,p,v,y,w,x,E=this._objectPoint,M=this._sqCellSize,I=null;for(d=c-1;d<=c+1;d++)if(p=this._grid[d],p){for(_=h-1;_<=h+1;_++)if(v=p[_],v)for(m=0,y=v.length;m<y;m++)w=v[m],x=this._sqDist(E[L.Util.stamp(w)],s),(x<M||x<=M&&I===null)&&(M=x,I=w)}return I},_getCoord:function(s){var h=Math.floor(s/this._cellSize);return isFinite(h)?h:s},_sqDist:function(s,h){var c=h.x-s.x,d=h.y-s.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(s,h){var c=h[1].lat-h[0].lat,d=h[0].lng-h[1].lng;return d*(s.lat-h[0].lat)+c*(s.lng-h[0].lng)},findMostDistantPointFromBaseLine:function(s,h){var c=0,d=null,_=[],m,p,v;for(m=h.length-1;m>=0;m--){if(p=h[m],v=this.getDistant(p,s),v>0)_.push(p);else continue;v>c&&(c=v,d=p)}return{maxPoint:d,newPoints:_}},buildConvexHull:function(s,h){var c=[],d=this.findMostDistantPointFromBaseLine(s,h);return d.maxPoint?(c=c.concat(this.buildConvexHull([s[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,s[1]],d.newPoints)),c):[s[0]]},getConvexHull:function(s){var h=!1,c=!1,d=!1,_=!1,m=null,p=null,v=null,y=null,w=null,x=null,E;for(E=s.length-1;E>=0;E--){var M=s[E];(h===!1||M.lat>h)&&(m=M,h=M.lat),(c===!1||M.lat<c)&&(p=M,c=M.lat),(d===!1||M.lng>d)&&(v=M,d=M.lng),(_===!1||M.lng<_)&&(y=M,_=M.lng)}c!==h?(x=p,w=m):(x=y,w=v);var I=[].concat(this.buildConvexHull([x,w],s),this.buildConvexHull([w,x],s));return I}}}(),L.MarkerCluster.include({getConvexHull:function(){var s=this.getAllChildMarkers(),h=[],c,d;for(d=s.length-1;d>=0;d--)c=s[d].getLatLng(),h.push(c);return L.QuickHull.getConvexHull(h)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var s=this.getAllChildMarkers(null,!0),h=this._group,c=h._map,d=c.latLngToLayerPoint(this._latlng),_;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?_=this._group.options.spiderfyShapePositions(s.length,d):s.length>=this._circleSpiralSwitchover?_=this._generatePointsSpiral(s.length,d):(d.y+=10,_=this._generatePointsCircle(s.length,d)),this._animationSpiderfy(s,_)}},unspiderfy:function(s){this._group._inZoomAnimation||(this._animationUnspiderfy(s),this._group._spiderfied=null)},_generatePointsCircle:function(s,h){var c=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+s),d=c/this._2PI,_=this._2PI/s,m=[],p,v;for(d=Math.max(d,35),m.length=s,p=0;p<s;p++)v=this._circleStartAngle+p*_,m[p]=new L.Point(h.x+d*Math.cos(v),h.y+d*Math.sin(v))._round();return m},_generatePointsSpiral:function(s,h){var c=this._group.options.spiderfyDistanceMultiplier,d=c*this._spiralLengthStart,_=c*this._spiralFootSeparation,m=c*this._spiralLengthFactor*this._2PI,p=0,v=[],y;for(v.length=s,y=s;y>=0;y--)y<s&&(v[y]=new L.Point(h.x+d*Math.cos(p),h.y+d*Math.sin(p))._round()),p+=_/d+y*5e-4,d+=m/p;return v},_noanimationUnspiderfy:function(){var s=this._group,h=s._map,c=s._featureGroup,d=this.getAllChildMarkers(null,!0),_,m;for(s._ignoreMove=!0,this.setOpacity(1),m=d.length-1;m>=0;m--)_=d[m],c.removeLayer(_),_._preSpiderfyLatlng&&(_.setLatLng(_._preSpiderfyLatlng),delete _._preSpiderfyLatlng),_.setZIndexOffset&&_.setZIndexOffset(0),_._spiderLeg&&(h.removeLayer(_._spiderLeg),delete _._spiderLeg);s.fire("unspiderfied",{cluster:this,markers:d}),s._ignoreMove=!1,s._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(s,h){var c=this._group,d=c._map,_=c._featureGroup,m=this._group.options.spiderLegPolylineOptions,p,v,y,w;for(c._ignoreMove=!0,p=0;p<s.length;p++)w=d.layerPointToLatLng(h[p]),v=s[p],y=new L.Polyline([this._latlng,w],m),d.addLayer(y),v._spiderLeg=y,v._preSpiderfyLatlng=v._latlng,v.setLatLng(w),v.setZIndexOffset&&v.setZIndexOffset(1e6),_.addLayer(v);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:s})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(s,h){var c=this,d=this._group,_=d._map,m=d._featureGroup,p=this._latlng,v=_.latLngToLayerPoint(p),y=L.Path.SVG,w=L.extend({},this._group.options.spiderLegPolylineOptions),x=w.opacity,E,M,I,A,O,S;for(x===void 0&&(x=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),y?(w.opacity=0,w.className=(w.className||"")+" leaflet-cluster-spider-leg"):w.opacity=x,d._ignoreMove=!0,E=0;E<s.length;E++)M=s[E],S=_.layerPointToLatLng(h[E]),I=new L.Polyline([p,S],w),_.addLayer(I),M._spiderLeg=I,y&&(A=I._path,O=A.getTotalLength()+.1,A.style.strokeDasharray=O,A.style.strokeDashoffset=O),M.setZIndexOffset&&M.setZIndexOffset(1e6),M.clusterHide&&M.clusterHide(),m.addLayer(M),M._setPos&&M._setPos(v);for(d._forceLayout(),d._animationStart(),E=s.length-1;E>=0;E--)S=_.layerPointToLatLng(h[E]),M=s[E],M._preSpiderfyLatlng=M._latlng,M.setLatLng(S),M.clusterShow&&M.clusterShow(),y&&(I=M._spiderLeg,A=I._path,A.style.strokeDashoffset=0,I.setStyle({opacity:x}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:c,markers:s})},200)},_animationUnspiderfy:function(s){var h=this,c=this._group,d=c._map,_=c._featureGroup,m=s?d._latLngToNewLayerPoint(this._latlng,s.zoom,s.center):d.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),v=L.Path.SVG,y,w,x,E,M,I;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),w=p.length-1;w>=0;w--)y=p[w],y._preSpiderfyLatlng&&(y.closePopup(),y.setLatLng(y._preSpiderfyLatlng),delete y._preSpiderfyLatlng,I=!0,y._setPos&&(y._setPos(m),I=!1),y.clusterHide&&(y.clusterHide(),I=!1),I&&_.removeLayer(y),v&&(x=y._spiderLeg,E=x._path,M=E.getTotalLength()+.1,E.style.strokeDashoffset=M,x.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout(function(){var A=0;for(w=p.length-1;w>=0;w--)y=p[w],y._spiderLeg&&A++;for(w=p.length-1;w>=0;w--)y=p[w],y._spiderLeg&&(y.clusterShow&&y.clusterShow(),y.setZIndexOffset&&y.setZIndexOffset(0),A>1&&_.removeLayer(y),d.removeLayer(y._spiderLeg),delete y._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:h,markers:p})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(s){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(s))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(s){this._spiderfied&&this._spiderfied.unspiderfy(s)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(s){s._spiderLeg&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow(),s.setZIndexOffset&&s.setZIndexOffset(0),this._map.removeLayer(s._spiderLeg),delete s._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(s){return s?s instanceof L.MarkerClusterGroup?s=s._topClusterLevel.getAllChildMarkers():s instanceof L.LayerGroup?s=s._layers:s instanceof L.MarkerCluster?s=s.getAllChildMarkers():s instanceof L.Marker&&(s=[s]):s=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(s),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(s),this},_flagParentsIconsNeedUpdate:function(s){var h,c;for(h in s)for(c=s[h].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(s){var h,c;for(h in s)c=s[h],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(s,h){var c=this.options.icon;return L.setOptions(c,s),this.setIcon(c),h&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=a,n.MarkerCluster=l,Object.defineProperty(n,"__esModule",{value:!0})})})(Qo,Qo.exports);const pf=(r,i,n)=>Object.freeze({instance:r,context:i,container:n}),gf=(r,i)=>Object.freeze({...r,...i}),vf=({...r},i)=>{const n=new Wi.MarkerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!1,...r});return pf(n,gf(i,{layerContainer:n}))},yf=lh(vf),Ta=({icon:r,popup:i,...n})=>{const a=q.useContext(St.ThemeContext);return ut.jsx(yf,{iconCreateFunction:l=>{if(i({cluster:l})){const s=l.bindPopup(Fn.default.renderToString(ut.jsx(St.ThemeContext.Provider,{value:a,children:ut.jsx(_r,{children:i({cluster:l})})})));l.on("click",()=>{s.openPopup()})}return Wi.divIcon({className:"grommet-cluster-group",html:Fn.default.renderToString(ut.jsx(St.ThemeContext.Provider,{value:a,children:r?Ot.default.cloneElement(r({cluster:l}),{cluster:l}):ut.jsx(rr,{cluster:l})}))})},...n})};Ta.propTypes={icon:rt.func,popup:rt.func};const bf=ui.default(Jt.Box)`
  // to create the pin shape
  border-bottom-right-radius: 0;
  // translate to re-align with leaflet div
  transform: rotate(45deg) translateX(-35%);
  &:hover {
    transform: rotate(45deg) translateX(-35%) scale(1.1);
    transition: transform 0.4s;
  }
`,dr=({kind:r="default"})=>{var l,s,h,c,d,_,m,p,v;const i=Ot.default.useContext(St.ThemeContext),n=nr([(h=(s=(l=i==null?void 0:i.map)==null?void 0:l.pin)==null?void 0:s.default)==null?void 0:h.container,(_=(d=(c=i==null?void 0:i.map)==null?void 0:c.pin)==null?void 0:d[r])==null?void 0:_.container]);let a=(v=(p=(m=i==null?void 0:i.map)==null?void 0:m.pin)==null?void 0:p[r])==null?void 0:v.icon;return a&&(a=Ot.default.cloneElement(a,{style:{transform:"rotate(-45deg)"}})),ut.jsx(bf,{...n,children:a})};dr.propTypes={kind:rt.string};const _r=({...r})=>{var n;const i=q.useContext(St.ThemeContext);return ut.jsx(Jt.Box,{...(n=i==null?void 0:i.map)==null?void 0:n.popup,...r})};window.console=console;const xf=console.error,wf=["useLayoutEffect does nothing on the server, because its effect cannot"];console.error=function(i,...n){wf.some(a=>i.includes(a))||xf(i,...n)};exports.Cluster=rr;exports.Controls=vs;exports.LocationBounds=gs;exports.Map=La;exports.Marker=Pa;exports.MarkerCluster=Ta;exports.Pin=dr;exports.Popup=_r;exports.base=bs;exports.deepMerge=Be;exports.isObject=Vn;exports.normalizeTheme=nr;exports.useMap=qi;exports.useMapEvent=hh;exports.useMapEvents=uh;
